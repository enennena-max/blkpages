<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - BlkPages (Updated)</title>
    <script src="https://cdn.tailwindcss.com?v=2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=2">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        'neon-pink': '#FF3CAC',
                        'neon-purple': '#784BA0',
                        'neon-blue': '#2B86C5',
                        'neon-green': '#4ADE80',
                        'charcoal': '#121212',
                        'dark-grey': '#1A1A1A',
                        'light-grey': '#E5E5E5',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(255, 60, 172, 0.3)' },
                            '100%': { boxShadow: '0 0 30px rgba(255, 60, 172, 0.6)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #2A2A2A 0%, #1A1A1A 50%, #0F0F0F 100%);
            min-height: 100vh;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #2B86C5, #4ADE80);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }
        
        .neon-glow:hover {
            box-shadow: 0 0 20px rgba(255, 60, 172, 0.5);
        }
        
        .hero-bg {
            background-image: url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1920&h=600&fit=crop&crop=center');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* Back Button Styling */
        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #ffffff;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn:hover {
            background: rgba(33, 150, 243, 0.2);
            border-color: rgba(33, 150, 243, 0.4);
            transform: translateX(-2px);
        }

        .back-btn i {
            font-size: 0.8rem;
        }
    </style>
</head>
<body class="bg-charcoal text-white font-inter">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-charcoal/95 backdrop-blur-md border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Desktop Navigation -->
            <div class="hidden lg:flex items-center justify-between h-16">
                <!-- Left: Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-bold text-white hover:text-neon-pink transition-colors duration-300">BlkPages</a>
                </div>
                
                <!-- Center: Main Navigation -->
                <div class="flex items-center space-x-8">
                    <a href="index.html" class="text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium">Home</a>
                    <a href="search-results.html" class="text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium">Browse</a>
                    <a href="offers.html" class="text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium">Offers</a>
                </div>
                
                <!-- Right: Actions -->
                <div class="flex items-center space-x-4">
                    <!-- Basket Icon -->
                    <div class="basket-icon" id="basketIcon" onclick="scrollToBooking()" style="position: relative; cursor: pointer; padding: 0.5rem; border-radius: 50%; background: rgba(13, 148, 136, 0.1); border: 1px solid rgba(13, 148, 136, 0.3); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
                        <i class="fas fa-shopping-basket" style="color: #0D9488; font-size: 1.2rem;"></i>
                        <span class="basket-count" id="basketCount" style="position: absolute; top: -5px; right: -5px; background: #ff4444; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600; border: 2px solid #1a1a1a;">0</span>
                    </div>
                    
                    <!-- Sign In / Customer Menu -->
                    <div class="auth-links" id="authLinks" style="align-items: center; gap: 0.5rem;">
                        <button id="loginBtn" class="text-white hover:text-neon-pink transition-colors duration-300 text-sm" onclick="toggleLoginModal()">
                            <i class="fas fa-sign-in-alt mr-1"></i>Sign In
                        </button>
                    </div>
                    
                    <!-- Customer Menu (for logged-in users) -->
                    <div class="customer-menu" id="customerMenu" style="display: none; position: relative;">
                        <button class="customer-initial" id="customerInitial" onclick="toggleCustomerMenu()" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #0D9488, #10B981); color: white; border: none; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(13, 148, 136, 0.3);">
                            <span id="customerInitialText">U</span>
                        </button>
                        <div class="customer-dropdown" id="customerDropdown" style="display: none; position: absolute; top: 100%; right: 0; background: rgba(26, 26, 26, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); min-width: 150px; z-index: 1000; margin-top: 0.5rem;">
                            <a href="customer-dashboard.html" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                                <i class="fas fa-user"></i>
                                Account
                            </a>
                            <a href="#" onclick="signOut()" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                                <i class="fas fa-sign-out-alt"></i>
                                Sign Out
                            </a>
                        </div>
                    </div>
                    
                    <!-- List Business Button -->
                    <a href="business-register.html" class="px-3 py-2 rounded-full bg-gradient-to-r from-neon-green to-green-500 text-white font-semibold hover:from-green-500 hover:to-green-600 transition-all duration-300 text-sm">
                        <i class="fas fa-plus mr-1"></i>List Business
                    </a>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div class="lg:hidden flex items-center justify-between h-16">
                <!-- Left: Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="text-xl font-bold text-white hover:text-neon-pink transition-colors duration-300">BlkPages</a>
                </div>
                
                <!-- Right: Actions -->
                <div class="flex items-center space-x-3">
                    <!-- Basket Icon -->
                    <div class="basket-icon" id="mobileBasketIcon" onclick="scrollToBooking()" style="position: relative; cursor: pointer; padding: 0.5rem; border-radius: 50%; background: rgba(13, 148, 136, 0.1); border: 1px solid rgba(13, 148, 136, 0.3); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
                        <i class="fas fa-shopping-basket" style="color: #0D9488; font-size: 1.2rem;"></i>
                        <span class="basket-count" id="mobileBasketCount" style="position: absolute; top: -5px; right: -5px; background: #ff4444; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600; border: 2px solid #1a1a1a;">0</span>
                    </div>
                    
                    <!-- Account Icon -->
                    <div class="auth-links" id="mobileAuthLinks" style="align-items: center; gap: 0.5rem;">
                        <button id="mobileLoginBtn" class="text-white hover:text-neon-pink transition-colors duration-300 text-sm" onclick="toggleLoginModal()">
                            <i class="fas fa-sign-in-alt"></i>
                        </button>
                    </div>
                    
                    <!-- Customer Menu (Mobile) -->
                    <div class="customer-menu" id="mobileCustomerMenu" style="display: none; position: relative;">
                        <button class="customer-initial" id="mobileCustomerInitial" onclick="toggleCustomerMenu()" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #0D9488, #10B981); color: white; border: none; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(13, 148, 136, 0.3);">
                            <span id="mobileCustomerInitialText">U</span>
                        </button>
                        <div class="customer-dropdown" id="mobileCustomerDropdown" style="display: none; position: absolute; top: 100%; right: 0; background: rgba(26, 26, 26, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); min-width: 150px; z-index: 1000; margin-top: 0.5rem;">
                            <a href="customer-dashboard.html" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                                <i class="fas fa-user"></i>
                                Account
                            </a>
                            <a href="#" onclick="signOut()" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                                <i class="fas fa-sign-out-alt"></i>
                                Sign Out
                            </a>
                        </div>
                    </div>
                    
                    <!-- Hamburger Menu -->
                    <button onclick="toggleMobileMenu()" class="text-white hover:text-neon-pink transition-colors duration-300">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Menu Dropdown -->
            <div id="mobileMenu" class="lg:hidden hidden bg-charcoal/95 backdrop-blur-md border-t border-white/10">
                <div class="px-4 py-3 space-y-3">
                    <a href="index.html" class="block text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium py-2">Home</a>
                    <a href="search-results.html" class="block text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium py-2">Browse</a>
                    <a href="offers.html" class="block text-text-secondary hover:text-neon-pink transition-colors duration-300 font-medium py-2">Offers</a>
                    <a href="business-register.html" class="block px-3 py-2 rounded-full bg-gradient-to-r from-neon-green to-green-500 text-white font-semibold hover:from-green-500 hover:to-green-600 transition-all duration-300 text-sm text-center">
                        <i class="fas fa-plus mr-1"></i>List Business
                    </a>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div class="lg:hidden flex items-center justify-between h-16">
                <!-- Left: Logo -->
                <div class="flex items-center">
                    <a href="index.html" class="text-xl font-bold text-white hover:text-neon-pink transition-colors duration-300">BlkPages</a>
                </div>
                
                <!-- Right: Actions -->
                <div class="flex items-center space-x-3">
                    <!-- Basket Icon -->
                    <div class="basket-icon" id="mobileBasketIcon" onclick="scrollToBooking()" style="position: relative; cursor: pointer; padding: 0.5rem; border-radius: 50%; background: rgba(13, 148, 136, 0.1); border: 1px solid rgba(13, 148, 136, 0.3); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px;">
                        <i class="fas fa-shopping-basket" style="color: #0D9488; font-size: 1.2rem;"></i>
                        <span class="basket-count" id="mobileBasketCount" style="position: absolute; top: -5px; right: -5px; background: #ff4444; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600; border: 2px solid #1a1a1a;">0</span>
                    </div>
                    
                    <!-- Account Icon -->
                    <div class="auth-links" id="mobileAuthLinks" style="align-items: center; gap: 0.5rem;">
                        <button id="mobileLoginBtn" class="text-white hover:text-neon-pink transition-colors duration-300 text-sm" onclick="toggleLoginModal()">
                            <i class="fas fa-sign-in-alt"></i>
                        </button>
                    </div>
                    
                    <!-- Customer Menu (Mobile) -->
                    <div class="customer-menu" id="mobileCustomerMenu" style="display: none; position: relative;">
                        <button class="customer-initial" id="mobileCustomerInitial" onclick="toggleCustomerMenu()" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #0D9488, #10B981); color: white; border: none; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(13, 148, 136, 0.3);">
                            <span id="mobileCustomerInitialText">U</span>
                        </button>
                        <div class="customer-dropdown" id="mobileCustomerDropdown" style="display: none; position: absolute; top: 100%; right: 0; background: rgba(26, 26, 26, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); min-width: 150px; z-index: 1000; margin-top: 0.5rem;">
                            <a href="customer-dashboard.html" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                                <i class="fas fa-user"></i>
                                Account
                            </a>
                            <a href="#" onclick="signOut()" class="dropdown-item" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1rem; color: #ffffff; text-decoration: none; font-size: 0.9rem; transition: all 0.3s ease;">
                                <i class="fas fa-sign-out-alt"></i>
                                Sign Out
                            </a>
                        </div>
                    </div>
                    
                    <!-- Hamburger Menu -->
                    <button onclick="toggleMobileMenu()" class="text-white hover:text-neon-pink transition-colors duration-300">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-bg relative pt-20 pb-16">
        <div class="absolute inset-0 bg-black/60"></div>
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold font-poppins gradient-text mb-4">
                Browse Businesses
            </h1>
            <p class="text-xl text-light-grey" id="dynamicSubheading">
                Discover amazing businesses near you
            </p>
        </div>
    </section>

    <!-- Search Panel -->
    <section class="py-8 bg-charcoal">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-dark-grey rounded-2xl p-6 border border-white/10">
                <!-- Initial Search Interface -->
                <div id="initialSearch" class="text-center">
                    <h2 class="text-2xl font-bold text-white mb-4 font-poppins">Find Your Perfect Business</h2>
                    <p class="text-light-grey mb-8">Search for businesses near you</p>
                    
                    <div class="max-w-4xl mx-auto">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Business Name Search -->
                            <div class="lg:col-span-2">
                                <label class="block text-sm font-medium text-light-grey mb-2 text-left">Business Name</label>
                                <input type="text" id="businessNameSearch" placeholder="Search by business name..." class="w-full px-4 py-3 bg-charcoal border border-white/20 rounded-lg text-white placeholder-light-grey focus:border-neon-pink focus:ring-2 focus:ring-neon-pink/20 transition-all duration-300">
                            </div>
                            
                            <!-- Location/Postcode -->
                            <div>
                                <label class="block text-sm font-medium text-light-grey mb-2 text-left">Location</label>
                                <input type="text" id="locationSearch" placeholder="Enter postcode or city" class="w-full px-4 py-3 bg-charcoal border border-white/20 rounded-lg text-white placeholder-light-grey focus:border-neon-pink focus:ring-2 focus:ring-neon-pink/20 transition-all duration-300">
                            </div>
                            
                            <!-- Category -->
                            <div>
                                <label class="block text-sm font-medium text-light-grey mb-2 text-left">Category</label>
                                <select id="categorySearch" class="w-full px-4 py-3 bg-charcoal border border-white/20 rounded-lg text-white focus:border-neon-pink focus:ring-2 focus:ring-neon-pink/20 transition-all duration-300">
                                    <option value="">All Categories</option>
                                    <option value="hair">Hair Salons</option>
                                    <option value="barber">Barbers</option>
                                    <option value="beauty">Beauty</option>
                                    <option value="nail">Nail Salons</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button id="searchBtn" class="px-8 py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 neon-glow">
                                <i class="fas fa-search mr-2"></i>Search
                            </button>
                            <button id="nearMeBtn" class="px-8 py-3 rounded-lg border border-neon-blue text-neon-blue hover:bg-neon-blue hover:text-white transition-all duration-300">
                                <i class="fas fa-map-marker-alt mr-2"></i>Near Me
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Advanced Filters & Sort (Hidden Initially) -->
                <div id="advancedControls" class="hidden">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-white font-poppins">Refine Your Search</h3>
                        <div class="flex gap-3">
                            <!-- Filter Hamburger Menu -->
                            <div class="relative">
                                <button id="filterMenuBtn" class="px-4 py-2 rounded-lg bg-charcoal border border-white/20 text-white hover:border-neon-pink focus:border-neon-pink transition-all duration-300 flex items-center gap-2">
                                    <i class="fas fa-filter"></i>
                                    <span>Filters</span>
                                    <i class="fas fa-chevron-down text-sm"></i>
                                </button>
                                <div id="filterMenu" class="absolute top-full right-0 mt-2 w-64 bg-charcoal border border-white/20 rounded-lg shadow-lg z-10 hidden">
                                    <div class="p-4 space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-light-grey mb-2">Min Rating</label>
                                            <select id="ratingFilter" class="w-full px-3 py-2 bg-dark-grey border border-white/20 rounded text-white focus:border-neon-pink transition-all duration-300">
                                                <option value="">Any Rating</option>
                                                <option value="4">4+ Stars</option>
                                                <option value="4.5">4.5+ Stars</option>
                                                <option value="5">5 Stars</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-light-grey mb-2">Distance</label>
                                            <select id="distanceFilter" class="w-full px-3 py-2 bg-dark-grey border border-white/20 rounded text-white focus:border-neon-pink transition-all duration-300">
                                                <option value="5">5 miles</option>
                                                <option value="10">10 miles</option>
                                                <option value="25">25 miles</option>
                                                <option value="50">50 miles</option>
                                            </select>
                                        </div>
                                        <div class="flex gap-2 pt-2">
                                            <button id="applyFiltersBtn" class="flex-1 px-4 py-2 rounded bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300">
                                                Apply
                                            </button>
                                            <button id="clearFiltersBtn" class="flex-1 px-4 py-2 rounded border border-white/20 text-light-grey hover:text-white hover:bg-white/10 transition-all duration-300">
                                                Clear
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sort Hamburger Menu -->
                            <div class="relative">
                                <button id="sortMenuBtn" class="px-4 py-2 rounded-lg bg-charcoal border border-white/20 text-white hover:border-neon-pink focus:border-neon-pink transition-all duration-300 flex items-center gap-2">
                                    <i class="fas fa-sort"></i>
                                    <span id="sortMenuText">Sort</span>
                                    <i class="fas fa-chevron-down text-sm"></i>
                                </button>
                                <div id="sortMenu" class="absolute top-full right-0 mt-2 w-48 bg-charcoal border border-white/20 rounded-lg shadow-lg z-10 hidden">
                                    <div class="py-2">
                                        <button class="w-full px-4 py-3 text-left text-white hover:bg-white/10 transition-colors duration-300" data-sort="relevance">Relevance</button>
                                        <button class="w-full px-4 py-3 text-left text-white hover:bg-white/10 transition-colors duration-300" data-sort="price">Price</button>
                                        <button class="w-full px-4 py-3 text-left text-white hover:bg-white/10 transition-colors duration-300" data-sort="distance">Distance</button>
                                        <button class="w-full px-4 py-3 text-left text-white hover:bg-white/10 transition-colors duration-300" data-sort="reviews">Reviews</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content - Two Column Layout -->
    <section class="py-12 bg-charcoal">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Mobile Featured Section (moved above main results) -->
            <div class="lg:hidden mb-8">
                <div class="bg-dark-grey rounded-2xl p-6 border border-white/10">
                    <h3 class="text-xl font-bold text-white mb-6 font-poppins">Featured Businesses</h3>
                    <div class="overflow-x-auto">
                        <div class="flex space-x-4 pb-4" id="mobileFeaturedBusinessesTop" style="min-width: max-content;">
                            <!-- Mobile featured businesses will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Results Column -->
                <div class="lg:col-span-2">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-white mb-2" id="resultsHeading">All Businesses</h2>
                        <p class="text-light-grey" id="resultsCount">12 businesses found</p>
                    </div>
                    
                    
                    <!-- Business Listings Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="businessResults">
                        <!-- Premium Business Card 1 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10 card-hover">
                            <div class="mb-4">
                                <img src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=250&fit=crop&crop=center" alt="Royal Hair Studio" class="w-full h-48 object-cover rounded-lg">
                            </div>
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-xl font-bold text-white">Royal Hair Studio</h3>
                                <div class="flex items-center">
                                    <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                </div>
                            </div>
                            <div class="flex items-center mb-2">
                                <div class="flex text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="text-light-grey text-sm">4.8 (127 reviews)</span>
                            </div>
                            <p class="text-neon-pink text-sm font-medium mb-2">Hair Salon</p>
                            <p class="text-light-grey text-sm mb-4 flex items-center">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                123 High Street, London SW1A 1AA
                            </p>
                            <button class="w-full py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 neon-glow">
                                Book Now
                            </button>
                        </div>

                        <!-- Premium Business Card 2 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10 card-hover">
                            <div class="mb-4">
                                <img src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400&h=250&fit=crop&crop=center" alt="Elite Barber Shop" class="w-full h-48 object-cover rounded-lg">
                            </div>
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-xl font-bold text-white">Elite Barber Shop</h3>
                            </div>
                            <div class="flex items-center mb-2">
                                <div class="flex text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="text-light-grey text-sm">4.9 (89 reviews)</span>
                            </div>
                            <p class="text-neon-pink text-sm font-medium mb-2">Barber Shop</p>
                            <p class="text-light-grey text-sm mb-4 flex items-center">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                456 King's Road, London SW3 4LX
                            </p>
                            <button class="w-full py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 neon-glow">
                                Book Now
                            </button>
                        </div>

                        <!-- Premium Business Card 3 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10 card-hover">
                            <div class="mb-4">
                                <img src="https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?w=400&h=250&fit=crop&crop=center" alt="Glamour Beauty Lounge" class="w-full h-48 object-cover rounded-lg">
                            </div>
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-xl font-bold text-white">Glamour Beauty Lounge</h3>
                            </div>
                            <div class="flex items-center mb-2">
                                <div class="flex text-yellow-400 mr-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="text-light-grey text-sm">4.7 (156 reviews)</span>
                            </div>
                            <p class="text-neon-pink text-sm font-medium mb-2">Beauty Salon</p>
                            <p class="text-light-grey text-sm mb-4 flex items-center">
                                <i class="fas fa-map-marker-alt mr-2"></i>
                                789 Oxford Street, London W1C 1JN
                            </p>
                            <button class="w-full py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 neon-glow">
                                Book Now
                            </button>
                        </div>

                        <!-- Basic Business Card 1 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10">
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-white mb-2">Classic Cuts</h3>
                                <p class="text-light-grey text-sm mb-3">Traditional barber shop with experienced stylists</p>
                            </div>
                            <div class="space-y-2 mb-4">
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-map-marker-alt mr-2 w-4"></i>
                                    321 Baker Street, London NW1 6XE
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-phone mr-2 w-4"></i>
                                    020 7123 4567
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-envelope mr-2 w-4"></i>
                                    info@classiccuts.co.uk
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-clock mr-2 w-4"></i>
                                    Mon-Fri: 9am-6pm, Sat: 9am-4pm
                                </p>
                            </div>
                            <div class="text-center">
                                <p class="text-light-grey text-sm mb-3">Contact the business directly for enquiries</p>
                            </div>
                        </div>

                        <!-- Basic Business Card 2 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10">
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-white mb-2">Natural Hair Care</h3>
                                <p class="text-light-grey text-sm mb-3">Specializing in natural hair treatments and styling</p>
                            </div>
                            <div class="space-y-2 mb-4">
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-map-marker-alt mr-2 w-4"></i>
                                    654 Brixton Road, London SW9 8AD
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-phone mr-2 w-4"></i>
                                    020 8765 4321
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-envelope mr-2 w-4"></i>
                                    hello@naturalhaircare.com
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-clock mr-2 w-4"></i>
                                    Tue-Sat: 10am-7pm
                                </p>
                            </div>
                            <div class="text-center">
                                <p class="text-light-grey text-sm mb-3">Contact the business directly for enquiries</p>
                            </div>
                        </div>

                        <!-- Basic Business Card 3 -->
                        <div class="bg-dark-grey rounded-2xl p-6 border border-white/10">
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-white mb-2">Style Studio</h3>
                                <p class="text-light-grey text-sm mb-3">Full-service hair and beauty salon</p>
                            </div>
                            <div class="space-y-2 mb-4">
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-map-marker-alt mr-2 w-4"></i>
                                    987 Camden High Street, London NW1 7JE
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-phone mr-2 w-4"></i>
                                    020 9876 5432
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-envelope mr-2 w-4"></i>
                                    bookings@stylestudio.co.uk
                                </p>
                                <p class="text-light-grey text-sm flex items-center">
                                    <i class="fas fa-clock mr-2 w-4"></i>
                                    Mon-Sat: 9am-8pm, Sun: 10am-5pm
                                </p>
                            </div>
                            <div class="text-center">
                                <p class="text-light-grey text-sm mb-3">Contact the business directly for enquiries</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="flex justify-center items-center mt-12 space-x-2">
                        <button class="px-4 py-2 rounded-lg border border-white/20 text-light-grey hover:text-white hover:bg-white/10 transition-all duration-300">
                            ← Previous
                        </button>
                        <button class="px-4 py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold neon-glow">
                            1
                        </button>
                        <button class="px-4 py-2 rounded-lg border border-white/20 text-light-grey hover:text-white hover:bg-white/10 transition-all duration-300">
                            2
                        </button>
                        <button class="px-4 py-2 rounded-lg border border-white/20 text-light-grey hover:text-white hover:bg-white/10 transition-all duration-300">
                            3
                        </button>
                        <button class="px-4 py-2 rounded-lg border border-white/20 text-light-grey hover:text-white hover:bg-white/10 transition-all duration-300">
                            Next →
                        </button>
                    </div>
                </div>
                
                <!-- Sidebar - Featured Businesses -->
                <div class="lg:col-span-1">
                    <!-- Desktop Featured Section -->
                    <div class="hidden lg:block bg-dark-grey rounded-2xl p-6 border border-white/10">
                        <h3 class="text-xl font-bold text-white mb-6 font-poppins">Featured Businesses</h3>
                        <div class="space-y-4" id="featuredBusinesses">
                            <!-- Featured Business 1 -->
                            <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover">
                                <div class="mb-3">
                                    <img src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=300&h=150&fit=crop&crop=center" alt="Royal Hair Studio" class="w-full h-32 object-cover rounded-lg">
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="text-lg font-bold text-white">Royal Hair Studio</h4>
                                    <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                </div>
                                <div class="flex items-center mb-2">
                                    <div class="flex text-yellow-400 mr-2">
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                    </div>
                                    <span class="text-light-grey text-xs">4.8 (127)</span>
                                </div>
                                <p class="text-neon-pink text-xs font-medium mb-2">Hair Salon</p>
                                <p class="text-light-grey text-xs mb-3">123 High Street, London</p>
                                <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                    Book Now
                                </button>
                            </div>

                            <!-- Featured Business 2 -->
                            <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover">
                                <div class="mb-3">
                                    <img src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=300&h=150&fit=crop&crop=center" alt="Elite Barber Shop" class="w-full h-32 object-cover rounded-lg">
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="text-lg font-bold text-white">Elite Barber Shop</h4>
                                    <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                </div>
                                <div class="flex items-center mb-2">
                                    <div class="flex text-yellow-400 mr-2">
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                    </div>
                                    <span class="text-light-grey text-xs">4.9 (89)</span>
                                </div>
                                <p class="text-neon-pink text-xs font-medium mb-2">Barber Shop</p>
                                <p class="text-light-grey text-xs mb-3">456 King's Road, London</p>
                                <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                    Book Now
                                </button>
                            </div>

                            <!-- Featured Business 3 -->
                            <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover">
                                <div class="mb-3">
                                    <img src="https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?w=300&h=150&fit=crop&crop=center" alt="Glamour Beauty Lounge" class="w-full h-32 object-cover rounded-lg">
                                </div>
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="text-lg font-bold text-white">Glamour Beauty Lounge</h4>
                                    <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                </div>
                                <div class="flex items-center mb-2">
                                    <div class="flex text-yellow-400 mr-2">
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                        <i class="fas fa-star text-xs"></i>
                                    </div>
                                    <span class="text-light-grey text-xs">4.7 (156)</span>
                                </div>
                                <p class="text-neon-pink text-xs font-medium mb-2">Beauty Salon</p>
                                <p class="text-light-grey text-xs mb-3">789 Oxford Street, London</p>
                                <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                    Book Now
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Featured Section -->
                    <div class="lg:hidden bg-dark-grey rounded-2xl p-6 border border-white/10 mb-8">
                        <h3 class="text-xl font-bold text-white mb-6 font-poppins">Featured Businesses</h3>
                        <div class="overflow-x-auto">
                            <div class="flex space-x-4 pb-4" id="mobileFeaturedBusinesses" style="min-width: max-content;">
                                <!-- Mobile Featured Business 1 -->
                                <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover flex-shrink-0" style="width: 280px;">
                                    <div class="mb-3">
                                        <img src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=300&h=150&fit=crop&crop=center" alt="Royal Hair Studio" class="w-full h-32 object-cover rounded-lg">
                                    </div>
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-lg font-bold text-white">Royal Hair Studio</h4>
                                        <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                    </div>
                                    <div class="flex items-center mb-2">
                                        <div class="flex text-yellow-400 mr-2">
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                        </div>
                                        <span class="text-light-grey text-xs">4.8 (127)</span>
                                    </div>
                                    <p class="text-neon-pink text-xs font-medium mb-2">Hair Salon</p>
                                    <p class="text-light-grey text-xs mb-3">123 High Street, London</p>
                                    <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                        Book Now
                                    </button>
                                </div>

                                <!-- Mobile Featured Business 2 -->
                                <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover flex-shrink-0" style="width: 280px;">
                                    <div class="mb-3">
                                        <img src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=300&h=150&fit=crop&crop=center" alt="Elite Barber Shop" class="w-full h-32 object-cover rounded-lg">
                                    </div>
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-lg font-bold text-white">Elite Barber Shop</h4>
                                        <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                    </div>
                                    <div class="flex items-center mb-2">
                                        <div class="flex text-yellow-400 mr-2">
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                        </div>
                                        <span class="text-light-grey text-xs">4.9 (89)</span>
                                    </div>
                                    <p class="text-neon-pink text-xs font-medium mb-2">Barber Shop</p>
                                    <p class="text-light-grey text-xs mb-3">456 King's Road, London</p>
                                    <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                        Book Now
                                    </button>
                                </div>

                                <!-- Mobile Featured Business 3 -->
                                <div class="bg-charcoal rounded-xl p-4 border border-white/10 card-hover flex-shrink-0" style="width: 280px;">
                                    <div class="mb-3">
                                        <img src="https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?w=300&h=150&fit=crop&crop=center" alt="Glamour Beauty Lounge" class="w-full h-32 object-cover rounded-lg">
                                    </div>
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-lg font-bold text-white">Glamour Beauty Lounge</h4>
                                        <span class="bg-gradient-to-r from-neon-green to-green-500 text-white text-xs px-2 py-1 rounded-full font-semibold">Featured</span>
                                    </div>
                                    <div class="flex items-center mb-2">
                                        <div class="flex text-yellow-400 mr-2">
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                            <i class="fas fa-star text-xs"></i>
                                        </div>
                                        <span class="text-light-grey text-xs">4.7 (156)</span>
                                    </div>
                                    <p class="text-neon-pink text-xs font-medium mb-2">Beauty Salon</p>
                                    <p class="text-light-grey text-xs mb-3">789 Oxford Street, London</p>
                                    <button class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-sm">
                                        Book Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark-grey py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="mb-8">
                    <h3 class="text-2xl font-bold font-poppins gradient-text mb-4">BlkPages</h3>
                    <p class="text-light-grey mb-8">© 2025 BlkPages – Supporting Black-owned Businesses</p>
                    <div class="flex justify-center space-x-8 text-light-grey mb-6">
                        <a href="about.html" class="hover:text-neon-blue transition-colors font-medium">About</a>
                        <a href="contact.html" class="hover:text-neon-blue transition-colors font-medium">Contact</a>
                        <a href="privacy.html" class="hover:text-neon-blue transition-colors font-medium">Privacy</a>
                        <a href="terms.html" class="hover:text-neon-blue transition-colors font-medium">Terms</a>
                        <a href="blog.html" class="hover:text-neon-blue transition-colors font-medium">Blog</a>
                    </div>
                    <div class="max-w-4xl mx-auto mb-6">
                        <p class="text-xs text-light-grey leading-relaxed">
                            <strong>Disclaimer:</strong> BlkPages is a third-party directory and booking facilitator. Each business listed on our platform is an independent provider and is solely responsible for its own services, pricing, availability, and cancellation or refund policies. By booking through BlkPages, you agree that any cancellations, changes, or disputes must be resolved directly with the business.
                        </p>
                    </div>
                </div>
                <div class="flex justify-center space-x-6">
                    <a href="#" class="text-light-grey hover:text-neon-pink transition-colors duration-300 text-2xl">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="text-light-grey hover:text-neon-pink transition-colors duration-300 text-2xl">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="#" class="text-light-grey hover:text-neon-pink transition-colors duration-300 text-2xl">
                        <i class="fab fa-twitter"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu functions
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }
        
        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.add('hidden');
        }
        
        // Modal functions (placeholder - these would need to be implemented)
        function toggleLoginModal() {
            alert('Login modal would open here');
        }
        
        function toggleSignupModal() {
            alert('Signup modal would open here');
        }
        
        // Basket management
        const BASKET_KEY = 'blkpages_basket';
        const GUEST_BASKET_KEY = 'blkpages_guest_basket';
        let selectedServices = [];
        
        function saveBasket() {
            const basketData = {
                selectedServices: selectedServices,
                timestamp: Date.now()
            };
            
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            if (isLoggedIn) {
                localStorage.setItem(BASKET_KEY, JSON.stringify(basketData));
            } else {
                sessionStorage.setItem(GUEST_BASKET_KEY, JSON.stringify(basketData));
            }
            
            // Store current page as referrer for login redirect
            localStorage.setItem('loginReferrer', window.location.pathname);
        }
        
        function loadBasket() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            let basketData = null;
            
            if (isLoggedIn) {
                const savedBasket = localStorage.getItem(BASKET_KEY);
                if (savedBasket) basketData = JSON.parse(savedBasket);
            } else {
                const guestBasket = sessionStorage.getItem(GUEST_BASKET_KEY);
                if (guestBasket) basketData = JSON.parse(guestBasket);
            }
            
            if (basketData) {
                selectedServices = basketData.selectedServices || [];
                updateBasketCount();
            }
        }
        
        function updateBasketCount() {
            const basketCount = document.getElementById('basketCount');
            if (basketCount) {
                basketCount.textContent = selectedServices.length;
            }
        }
        
        function scrollToBooking() {
            if (selectedServices.length > 0) {
                alert('You have ' + selectedServices.length + ' service(s) in your basket. Visit a business profile to complete your booking.');
            } else {
                alert('Your basket is empty. Browse businesses to add services.');
            }
        }
        
        // Customer menu functions
        function toggleCustomerMenu() {
            const dropdown = document.getElementById('customerDropdown');
            if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const customerMenu = document.getElementById('customerMenu');
            const dropdown = document.getElementById('customerDropdown');
            
            if (customerMenu && dropdown && !customerMenu.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Check login status and show/hide customer menu
        function updateNavVisibility() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const authLinks = document.getElementById('authLinks');
            const customerMenu = document.getElementById('customerMenu');
            const basketIcon = document.getElementById('basketIcon');
            
            if (isLoggedIn) {
                if (authLinks) authLinks.style.display = 'none';
                if (customerMenu) customerMenu.style.display = 'block';
                if (basketIcon) basketIcon.style.display = 'flex';
            } else {
                if (authLinks) authLinks.style.display = 'flex';
                if (customerMenu) customerMenu.style.display = 'none';
                if (basketIcon) basketIcon.style.display = 'flex';
            }
        }
        
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const customerMenu = document.getElementById('customerMenu');
            
            if (customerMenu) {
                if (isLoggedIn) {
                    customerMenu.style.display = 'block';
                    
                    // Set customer initial
                    const userName = localStorage.getItem('userName') || 'Demo User';
                    const initial = userName.charAt(0).toUpperCase();
                    document.getElementById('customerInitialText').textContent = initial;
                } else {
                    customerMenu.style.display = 'none';
                }
            }
            
            // Update navigation visibility
            updateNavVisibility();
        }
        
        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                // Clear all user data from localStorage
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userName');
                localStorage.removeItem('userPhone');
                localStorage.removeItem('basketContents');
                
                // Show success message
                alert('You have been signed out successfully.');
                
                // Reload the page
                location.reload();
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            loadBasket();
        });

        // Fade in animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in-section').forEach(section => {
            observer.observe(section);
        });

        // Business data for search functionality with premium/basic tiers
        const businessData = [
            // Premium businesses (with photos, ratings, booking)
            { 
                name: "Royal Hair Studio", 
                category: "hair", 
                rating: 4.9, 
                reviews: 127,
                location: "123 Main Street, London", 
                image: "https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=250&fit=crop&crop=center",
                subscription: "premium",
                hasPhoto: true,
                hasBooking: true,
                featured: true
            },
            { 
                name: "Elite Barber Shop", 
                category: "barber", 
                rating: 4.8, 
                reviews: 89,
                location: "456 High Street, London", 
                image: "https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=400&h=250&fit=crop&crop=center",
                subscription: "premium",
                hasPhoto: true,
                hasBooking: true,
                featured: true
            },
            { 
                name: "Glamour Beauty", 
                category: "beauty", 
                rating: 4.7, 
                reviews: 156,
                location: "789 Queen Street, London", 
                image: "https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=400&h=250&fit=crop&crop=center",
                subscription: "premium",
                hasPhoto: true,
                hasBooking: true,
                featured: true
            },
            // Basic businesses (no photos, no ratings, contact info only)
            { 
                name: "Perfect Nails", 
                category: "nail", 
                location: "321 Beauty Lane, London",
                phone: "+44 20 7654 3210",
                email: "info@perfectnails.com",
                instagram: "@perfectnails_london",
                tiktok: "@perfectnails_uk",
                hours: "Mon-Fri: 9AM-7PM, Sat: 9AM-6PM, Sun: 10AM-5PM",
                subscription: "basic",
                hasPhoto: false,
                hasBooking: false,
                featured: false
            },
            { 
                name: "Style & Grace Hair", 
                category: "hair", 
                location: "555 Fashion Ave, London",
                phone: "+44 20 9876 5432",
                email: "hello@styleandgrace.com",
                instagram: "@styleandgrace_hair",
                tiktok: "@styleandgrace_uk",
                hours: "Tue-Sat: 10AM-8PM, Sun: 11AM-6PM",
                subscription: "basic",
                hasPhoto: false,
                hasBooking: false,
                featured: false
            },
            { 
                name: "Urban Barber Co", 
                category: "barber", 
                location: "777 Style Street, London",
                phone: "+44 20 1122 3344",
                email: "book@urbanbarber.co.uk",
                instagram: "@urbanbarber_co",
                tiktok: "@urbanbarber_london",
                hours: "Mon-Sat: 9AM-7PM, Sun: 10AM-5PM",
                subscription: "basic",
                hasPhoto: false,
                hasBooking: false,
                featured: false
            }
        ];

        // Track if search has been performed
        let hasSearched = false;

        // Show advanced controls after search
        function showAdvancedControls() {
            document.getElementById('advancedControls').classList.remove('hidden');
        }

        // Hide advanced controls (reset to initial state)
        function hideAdvancedControls() {
            document.getElementById('advancedControls').classList.add('hidden');
        }

        // Filter menu functionality
        function toggleFilterMenu() {
            const filterMenu = document.getElementById('filterMenu');
            filterMenu.classList.toggle('hidden');
        }

        function applyFilters() {
            const filterMenu = document.getElementById('filterMenu');
            filterMenu.classList.add('hidden');
            performSearch();
        }

        function clearFilters() {
            document.getElementById('categoryFilter').value = '';
            document.getElementById('locationFilter').value = '';
            document.getElementById('ratingFilter').value = '';
            document.getElementById('distanceFilter').value = '5';
            const filterMenu = document.getElementById('filterMenu');
            filterMenu.classList.add('hidden');
            performSearch();
        }

        // Sort menu functionality
        function toggleSortMenu() {
            const sortMenu = document.getElementById('sortMenu');
            sortMenu.classList.toggle('hidden');
        }

        function selectSortOption(sortType) {
            const sortMenuText = document.getElementById('sortMenuText');
            const sortMenu = document.getElementById('sortMenu');
            
            sortMenuText.textContent = sortType.charAt(0).toUpperCase() + sortType.slice(1);
            sortMenu.classList.add('hidden');
            
            // Trigger search with new sort
            performSearch();
        }

        // Business name search with partial matching
        function searchBusinesses() {
            const businessName = document.getElementById('businessNameSearch').value.toLowerCase().trim();
            const location = document.getElementById('locationSearch').value.toLowerCase().trim();
            const category = document.getElementById('categorySearch').value;
            
            // Get advanced filter values (if available)
            const advancedCategory = document.getElementById('categoryFilter')?.value || '';
            const advancedLocation = document.getElementById('locationFilter')?.value.toLowerCase().trim() || '';
            const minRating = document.getElementById('ratingFilter')?.value || '';
            const distance = document.getElementById('distanceFilter')?.value || '5';
            const sortBy = document.getElementById('sortMenuText')?.textContent.toLowerCase() || 'relevance';

            let filteredBusinesses = businessData.filter(business => {
                // Business name partial matching
                const nameMatch = !businessName || business.name.toLowerCase().includes(businessName);
                
                // Category filter (from initial search or advanced filters)
                const categoryMatch = !category && !advancedCategory || business.category === category || business.category === advancedCategory;
                
                // Location filter (from initial search or advanced filters)
                const locationMatch = !location && !advancedLocation || business.location.toLowerCase().includes(location) || business.location.toLowerCase().includes(advancedLocation);
                
                // Rating filter (from advanced filters only)
                const ratingMatch = !minRating || business.rating >= parseFloat(minRating);
                
                return nameMatch && categoryMatch && locationMatch && ratingMatch;
            });

            // Sort results
            if (sortBy === 'price') {
                // Sort by price (assuming lower is better for demo)
                filteredBusinesses.sort((a, b) => a.rating - b.rating);
            } else if (sortBy === 'distance') {
                // For demo purposes, randomize distance
                filteredBusinesses.sort(() => Math.random() - 0.5);
            } else if (sortBy === 'reviews') {
                // Sort by number of reviews (assuming higher is better)
                filteredBusinesses.sort((a, b) => b.rating - a.rating);
            } else if (sortBy === 'relevance') {
                // Keep original order for relevance
                // No sorting needed
            }

            displaySearchResults(filteredBusinesses);
        }

        // Near Me functionality
        function handleNearMe() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    // Store location data
                    localStorage.setItem('userLat', position.coords.latitude);
                    localStorage.setItem('userLng', position.coords.longitude);
                    localStorage.setItem('userLocation', 'Current Location');
                    
                    // Update location field
                    document.getElementById('locationSearch').value = 'Current Location';
                    
                    // Perform search with current location
                    performSearch();
                }, function(error) {
                    alert('Unable to get your location. Please enter your location manually.');
                });
            } else {
                alert('Geolocation is not supported by this browser. Please enter your location manually.');
            }
        }

        function displaySearchResults(businesses) {
            const resultsContainer = document.getElementById('businessResults');
            const resultsCount = document.querySelector('.text-light-grey');
            
            if (businesses.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="col-span-2 bg-dark-grey rounded-2xl p-8 border border-white/10 text-center">
                        <i class="fas fa-search text-4xl text-light-grey mb-4"></i>
                        <h3 class="text-xl font-bold text-white mb-2">No results found</h3>
                        <p class="text-light-grey mb-4">Try broadening your filters or search area.</p>
                        <div class="text-sm text-light-grey mb-6">
                            <p class="mb-2">Suggestions:</p>
                            <ul class="text-left max-w-md mx-auto">
                                <li>• Try different keywords or categories</li>
                                <li>• Expand your search radius</li>
                                <li>• Check nearby areas</li>
                            </ul>
                        </div>
                        <button onclick="clearAllFilters()" class="px-6 py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300">
                            Clear All Filters
                        </button>
                    </div>
                `;
                resultsCount.textContent = '0 businesses found';
                return;
            }

            resultsCount.textContent = `${businesses.length} businesses found`;

            resultsContainer.innerHTML = businesses.map(business => {
                const isPremium = business.subscription === 'premium';
                const categoryColor = business.category === 'hair' ? 'neon-pink' : 
                                     business.category === 'barber' ? 'neon-blue' : 
                                     business.category === 'beauty' ? 'neon-green' : 'neon-purple';
                const categoryIcon = business.category === 'hair' ? 'fas fa-cut' : 
                                   business.category === 'barber' ? 'fas fa-cut' : 
                                   business.category === 'beauty' ? 'fas fa-spa' : 'fas fa-star';
                
                if (isPremium) {
                    // Premium card with photo, ratings, and Book Now button
                    return `
                    <div class="card-hover bg-dark-grey rounded-2xl p-6 border border-white/10 hover:border-neon-pink/50 transition-all duration-300" role="article" aria-label="Premium business listing for ${business.name}">
                        <img src="${business.image}" alt="${business.name} - ${business.category} salon" class="w-full h-48 object-cover rounded-xl mb-4" loading="lazy">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="text-xl font-bold text-white">${business.name}</h3>
                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-${categoryColor}/20 text-${categoryColor} border border-${categoryColor}/30">
                                ${business.category.charAt(0).toUpperCase() + business.category.slice(1)}
                            </span>
                        </div>
                        <div class="flex items-center text-yellow-400 mb-3" aria-label="Rating: ${business.rating} out of 5 stars">
                            <i class="fas fa-star text-sm" aria-hidden="true"></i>
                            <i class="fas fa-star text-sm" aria-hidden="true"></i>
                            <i class="fas fa-star text-sm" aria-hidden="true"></i>
                            <i class="fas fa-star text-sm" aria-hidden="true"></i>
                            <i class="fas fa-star text-sm" aria-hidden="true"></i>
                            <span class="ml-2 text-sm font-semibold text-white">${business.rating}</span>
                            <span class="ml-2 text-sm text-light-grey">(${business.reviews} reviews)</span>
                        </div>
                        <div class="flex items-center text-light-grey mb-4">
                            <i class="fas fa-map-marker-alt mr-2" aria-hidden="true"></i>
                            <span class="text-sm">${business.location}</span>
                        </div>
                        <a href="business-profile.html" class="w-full py-3 rounded-xl bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 neon-glow text-center block" aria-label="Book appointment with ${business.name}">
                            Book Now
                        </a>
                    </div>
                `;
                } else {
                    // Basic card with contact info only
                    return `
                    <div class="card-hover bg-dark-grey rounded-2xl p-6 border border-white/10 hover:border-neon-pink/50 transition-all duration-300" role="article" aria-label="Basic business listing for ${business.name}">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-bold text-white">${business.name}</h3>
                            <span class="px-3 py-1 rounded-full text-xs font-medium bg-${categoryColor}/20 text-${categoryColor} border border-${categoryColor}/30">
                                ${business.category.charAt(0).toUpperCase() + business.category.slice(1)}
                            </span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center text-light-grey">
                                <i class="fas fa-map-marker-alt mr-3 w-4" aria-hidden="true"></i>
                                <span class="text-sm">${business.location}</span>
                            </div>
                            <div class="flex items-center text-light-grey">
                                <i class="fas fa-phone mr-3 w-4" aria-hidden="true"></i>
                                <a href="tel:${business.phone}" class="text-sm hover:text-neon-blue transition-colors">${business.phone}</a>
                            </div>
                            <div class="flex items-center text-light-grey">
                                <i class="fas fa-envelope mr-3 w-4" aria-hidden="true"></i>
                                <a href="mailto:${business.email}" class="text-sm hover:text-neon-blue transition-colors">${business.email}</a>
                            </div>
                            <div class="flex items-center text-light-grey">
                                <i class="fab fa-instagram mr-3 w-4" aria-hidden="true"></i>
                                <span class="text-sm">${business.instagram}</span>
                            </div>
                            <div class="flex items-center text-light-grey">
                                <i class="fab fa-tiktok mr-3 w-4" aria-hidden="true"></i>
                                <span class="text-sm">${business.tiktok}</span>
                            </div>
                            <div class="flex items-center text-light-grey">
                                <i class="fas fa-clock mr-3 w-4" aria-hidden="true"></i>
                                <span class="text-sm">${business.hours}</span>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-charcoal/50 rounded-lg border border-white/10">
                            <p class="text-sm text-light-grey text-center">
                                Contact the business directly for enquiries.
                            </p>
                        </div>
                    </div>
                `;
                }
            }).join('');
        }

        function clearAllFilters() {
            document.getElementById('businessNameSearch').value = '';
            document.getElementById('locationSearch').value = '';
            document.getElementById('categorySearch').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('locationFilter').value = '';
            document.getElementById('ratingFilter').value = '';
            document.getElementById('distanceFilter').value = '5';
            
            // Reset search state and hide advanced controls
            hasSearched = false;
            hideAdvancedControls();
            
            // Show all businesses
            displaySearchResults(businessData);
        }

        function performSearch() {
            searchBusinesses();
            // Show advanced controls after any search is performed
            hasSearched = true;
            showAdvancedControls();
        }

        // Populate featured businesses
        function populateFeaturedBusinesses() {
            const featuredBusinesses = businessData.filter(business => business.featured);
            const desktopContainer = document.getElementById('featuredBusinesses');
            const mobileContainer = document.getElementById('mobileFeaturedBusinesses');
            const mobileTopContainer = document.getElementById('mobileFeaturedBusinessesTop');
            
            // Desktop featured businesses
            if (desktopContainer) {
                desktopContainer.innerHTML = featuredBusinesses.map(business => `
                    <div class="card-hover bg-charcoal rounded-xl p-4 border border-white/10 hover:border-neon-pink/50 transition-all duration-300" role="article" aria-label="Featured business: ${business.name}">
                        <div class="flex items-start space-x-3">
                            <img src="${business.image}" alt="${business.name}" class="w-16 h-16 object-cover rounded-lg" loading="lazy">
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="text-sm font-bold text-white">${business.name}</h4>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium bg-neon-pink/20 text-neon-pink border border-neon-pink/30">
                                        Featured
                                    </span>
                                </div>
                                <p class="text-xs text-light-grey mb-2">Premium ${business.category} services</p>
                                <div class="flex items-center text-yellow-400 mb-3" aria-label="Rating: ${business.rating} out of 5 stars">
                                    <i class="fas fa-star text-xs" aria-hidden="true"></i>
                                    <i class="fas fa-star text-xs" aria-hidden="true"></i>
                                    <i class="fas fa-star text-xs" aria-hidden="true"></i>
                                    <i class="fas fa-star text-xs" aria-hidden="true"></i>
                                    <i class="fas fa-star text-xs" aria-hidden="true"></i>
                                    <span class="ml-1 text-xs font-semibold text-white">${business.rating}</span>
                                    <span class="ml-1 text-xs text-light-grey">(${business.reviews})</span>
                                </div>
                                <a href="business-profile.html" class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-xs text-center block" aria-label="Book appointment with ${business.name}">
                                    Book Now
                                </a>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Mobile featured businesses (horizontal scroll) - both containers
            const mobileFeaturedHTML = featuredBusinesses.map(business => `
                <div class="card-hover bg-charcoal rounded-xl p-4 border border-white/10 hover:border-neon-pink/50 transition-all duration-300 flex-shrink-0" style="width: 280px;" role="article" aria-label="Featured business: ${business.name}">
                    <div class="flex flex-col">
                        <img src="${business.image}" alt="${business.name}" class="w-full h-32 object-cover rounded-lg mb-3" loading="lazy">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-sm font-bold text-white">${business.name}</h4>
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-neon-pink/20 text-neon-pink border border-neon-pink/30">
                                Featured
                            </span>
                        </div>
                        <p class="text-xs text-light-grey mb-2">Premium ${business.category} services</p>
                        <div class="flex items-center text-yellow-400 mb-3" aria-label="Rating: ${business.rating} out of 5 stars">
                            <i class="fas fa-star text-xs" aria-hidden="true"></i>
                            <i class="fas fa-star text-xs" aria-hidden="true"></i>
                            <i class="fas fa-star text-xs" aria-hidden="true"></i>
                            <i class="fas fa-star text-xs" aria-hidden="true"></i>
                            <i class="fas fa-star text-xs" aria-hidden="true"></i>
                            <span class="ml-1 text-xs font-semibold text-white">${business.rating}</span>
                            <span class="ml-1 text-xs text-light-grey">(${business.reviews})</span>
                        </div>
                        <a href="business-profile.html" class="w-full py-2 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300 text-xs text-center block" aria-label="Book appointment with ${business.name}">
                            Book Now
                        </a>
                    </div>
                </div>
            `).join('');
            
            if (mobileContainer) {
                mobileContainer.innerHTML = mobileFeaturedHTML;
            }
            if (mobileTopContainer) {
                mobileTopContainer.innerHTML = mobileFeaturedHTML;
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event listeners
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            document.getElementById('nearMeBtn').addEventListener('click', handleNearMe);
            document.getElementById('filterMenuBtn').addEventListener('click', toggleFilterMenu);
            document.getElementById('sortMenuBtn').addEventListener('click', toggleSortMenu);
            document.getElementById('applyFiltersBtn').addEventListener('click', applyFilters);
            document.getElementById('clearFiltersBtn').addEventListener('click', clearFilters);
            
            // Sort menu options
            document.querySelectorAll('#sortMenu button').forEach(button => {
                button.addEventListener('click', () => selectSortOption(button.dataset.sort));
            });

            // Real-time search as user types in business name or location
            document.getElementById('businessNameSearch').addEventListener('input', performSearch);
            document.getElementById('locationSearch').addEventListener('input', performSearch);
            document.getElementById('categorySearch').addEventListener('change', performSearch);

            // Close menus when clicking outside
            document.addEventListener('click', (e) => {
                const filterMenu = document.getElementById('filterMenu');
                const filterMenuBtn = document.getElementById('filterMenuBtn');
                const sortMenu = document.getElementById('sortMenu');
                const sortMenuBtn = document.getElementById('sortMenuBtn');
                
                if (!filterMenu.contains(e.target) && !filterMenuBtn.contains(e.target)) {
                    filterMenu.classList.add('hidden');
                }
                
                if (!sortMenu.contains(e.target) && !sortMenuBtn.contains(e.target)) {
                    sortMenu.classList.add('hidden');
                }
            });

            // Initialize with all businesses and hidden advanced controls
            displaySearchResults(businessData);
            populateFeaturedBusinesses();
            hideAdvancedControls();
        });

        // Back button function
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                // If no history, go to homepage
                window.location.href = 'index.html';
            }
        }

        // Modal functions
        function toggleLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.toggle('hidden');
            
            // Store current page as referrer when opening login modal
            if (!modal.classList.contains('hidden')) {
                localStorage.setItem('loginReferrer', window.location.pathname);
            }
        }

        function toggleSignupModal() {
            const modal = document.getElementById('signupModal');
            modal.classList.toggle('hidden');
        }

        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            console.log('Login attempt:', email, password);
            
            // Demo credentials check
            if (email === 'customer@example.com' && password === 'password123') {
                console.log('Credentials valid, logging in...');
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userName', 'Demo Customer');
                
                // Close modal
                toggleLoginModal();
                
                // Show success message
                alert('Login successful! Redirecting...');
                
                // Redirect to referring page or dashboard
                setTimeout(() => {
                    console.log('Attempting redirect...');
                    const referringPage = localStorage.getItem('loginReferrer') || 'customer-dashboard.html';
                    localStorage.removeItem('loginReferrer');
                    window.location.replace(referringPage);
                }, 500);
                
            } else {
                alert('Invalid credentials. Use the demo credentials: customer@example.com / password123');
            }
        }

        // Handle signup
        function handleSignup(event) {
            event.preventDefault();
            const name = event.target.querySelector('input[type="text"]').value;
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            console.log('Signup attempt:', name, email, password);
            
            // Demo signup - just log them in
            localStorage.setItem('userLoggedIn', 'true');
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userName', name);
            
            // Close modal
            toggleSignupModal();
            
            // Show success message
            alert('Account created successfully! Redirecting...');
            
            // Redirect to referring page or dashboard
            setTimeout(() => {
                console.log('Attempting redirect...');
                const referringPage = localStorage.getItem('loginReferrer') || 'customer-dashboard.html';
                localStorage.removeItem('loginReferrer');
                window.location.replace(referringPage);
            }, 500);
        }
    </script>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-black/90 backdrop-blur-md rounded-2xl p-8 max-w-md w-full border border-white/10">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold gradient-text">Login</h3>
                    <button onclick="toggleLoginModal()" class="text-white/70 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="mb-4">
                        <label class="block text-white/70 mb-2">Email</label>
                        <input type="email" required class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-neon-pink" placeholder="customer@example.com">
                    </div>
                    <div class="mb-6">
                        <label class="block text-white/70 mb-2">Password</label>
                        <input type="password" required class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-neon-pink" placeholder="password123">
                    </div>
                    <button type="submit" class="w-full py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300">
                        Login
                    </button>
                </form>
                <p class="text-center text-white/70 mt-4">
                    Don't have an account? 
                    <button onclick="toggleSignupModal(); toggleLoginModal();" class="text-neon-pink hover:underline">Sign up</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-black/90 backdrop-blur-md rounded-2xl p-8 max-w-md w-full border border-white/10">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold gradient-text">Sign Up</h3>
                    <button onclick="toggleSignupModal()" class="text-white/70 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="signupForm" onsubmit="handleSignup(event)">
                    <div class="mb-4">
                        <label class="block text-white/70 mb-2">Full Name</label>
                        <input type="text" required class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-neon-pink" placeholder="John Doe">
                    </div>
                    <div class="mb-4">
                        <label class="block text-white/70 mb-2">Email</label>
                        <input type="email" required class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-neon-pink" placeholder="customer@example.com">
                    </div>
                    <div class="mb-6">
                        <label class="block text-white/70 mb-2">Password</label>
                        <input type="password" required class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-neon-pink" placeholder="password123">
                    </div>
                    <button type="submit" class="w-full py-3 rounded-lg bg-gradient-to-r from-neon-pink to-neon-purple text-white font-semibold hover:from-neon-purple hover:to-neon-blue transition-all duration-300">
                        Sign Up
                    </button>
                </form>
                <p class="text-center text-white/70 mt-4">
                    Already have an account? 
                    <button onclick="toggleLoginModal(); toggleSignupModal();" class="text-neon-pink hover:underline">Login</button>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Navigation functions
        function updateNavVisibility() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const userName = localStorage.getItem('userName') || 'User';
            const userInitial = userName.charAt(0).toUpperCase();
            
            // Desktop elements
            const authLinks = document.getElementById('authLinks');
            const customerMenu = document.getElementById('customerMenu');
            const customerInitialText = document.getElementById('customerInitialText');
            const basketIcon = document.getElementById('basketIcon');
            
            // Mobile elements
            const mobileAuthLinks = document.getElementById('mobileAuthLinks');
            const mobileCustomerMenu = document.getElementById('mobileCustomerMenu');
            const mobileCustomerInitialText = document.getElementById('mobileCustomerInitialText');
            const mobileBasketIcon = document.getElementById('mobileBasketIcon');
            
            if (isLoggedIn) {
                // Show customer menu, hide sign in
                if (authLinks) authLinks.style.display = 'none';
                if (customerMenu) customerMenu.style.display = 'block';
                if (customerInitialText) customerInitialText.textContent = userInitial;
                
                // Mobile
                if (mobileAuthLinks) mobileAuthLinks.style.display = 'none';
                if (mobileCustomerMenu) mobileCustomerMenu.style.display = 'block';
                if (mobileCustomerInitialText) mobileCustomerInitialText.textContent = userInitial;
            } else {
                // Show sign in, hide customer menu
                if (authLinks) authLinks.style.display = 'flex';
                if (customerMenu) customerMenu.style.display = 'none';
                
                // Mobile
                if (mobileAuthLinks) mobileAuthLinks.style.display = 'flex';
                if (mobileCustomerMenu) mobileCustomerMenu.style.display = 'none';
            }
            
            // Basket is always visible
            if (basketIcon) basketIcon.style.display = 'flex';
            if (mobileBasketIcon) mobileBasketIcon.style.display = 'flex';
        }

        // Modal functions
        function toggleLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.toggle('hidden');
            
            // Store current page as referrer when opening login modal
            if (!modal.classList.contains('hidden')) {
                localStorage.setItem('loginReferrer', window.location.pathname);
            }
        }

        function toggleSignupModal() {
            const modal = document.getElementById('signupModal');
            modal.classList.toggle('hidden');
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.add('hidden');
        }

        function toggleCustomerMenu() {
            const dropdown = document.getElementById('customerDropdown');
            const mobileDropdown = document.getElementById('mobileCustomerDropdown');
            
            if (dropdown) dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
            if (mobileDropdown) mobileDropdown.style.display = mobileDropdown.style.display === 'none' ? 'block' : 'none';
        }

        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            console.log('Login attempt:', email, password);
            
            // Demo credentials check
            if (email === 'customer@example.com' && password === 'password123') {
                console.log('Credentials valid, logging in...');
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userName', 'Demo Customer');
                
                // Close modal
                toggleLoginModal();
                
                // Show success message
                alert('Login successful! Redirecting...');
                
                // Redirect to referring page or dashboard
                setTimeout(() => {
                    console.log('Attempting redirect...');
                    const referringPage = localStorage.getItem('loginReferrer') || 'customer-dashboard.html';
                    localStorage.removeItem('loginReferrer');
                    window.location.replace(referringPage);
                }, 500);
                
            } else {
                alert('Invalid credentials. Use the demo credentials: customer@example.com / password123');
            }
        }

        // Handle signup
        function handleSignup(event) {
            event.preventDefault();
            const name = event.target.querySelector('input[type="text"]').value;
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            console.log('Signup attempt:', name, email, password);
            
            // Demo signup - just log them in
            localStorage.setItem('userLoggedIn', 'true');
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userName', name);
            
            // Close modal
            toggleSignupModal();
            
            // Show success message
            alert('Account created successfully! Redirecting...');
            
            // Redirect to referring page or dashboard
            setTimeout(() => {
                console.log('Attempting redirect...');
                const referringPage = localStorage.getItem('loginReferrer') || 'customer-dashboard.html';
                localStorage.removeItem('loginReferrer');
                window.location.replace(referringPage);
            }, 500);
        }

        // Sign out function
        function signOut() {
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userName');
            localStorage.removeItem('loginReferrer');
            
            // Update navigation
            updateNavVisibility();
            
            // Redirect to homepage
            window.location.href = 'index.html';
        }

        // Modal functions
        function toggleLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.toggle('hidden');
            
            // Store current page as referrer when opening login modal
            if (!modal.classList.contains('hidden')) {
                localStorage.setItem('loginReferrer', window.location.pathname);
            }
        }
        
        function toggleSignupModal() {
            const modal = document.getElementById('signupModal');
            modal.classList.toggle('hidden');
        }
        
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }
        
        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.add('hidden');
        }
        
        function toggleCustomerMenu() {
            const dropdown = document.getElementById('customerDropdown');
            const mobileDropdown = document.getElementById('mobileCustomerDropdown');
            
            if (dropdown) {
                dropdown.style.display = dropdown.style.display === 'none' || dropdown.style.display === '' ? 'block' : 'none';
            }
            if (mobileDropdown) {
                mobileDropdown.style.display = mobileDropdown.style.display === 'none' || mobileDropdown.style.display === '' ? 'block' : 'none';
            }
        }
        
        // Handle login
        function handleLogin(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            console.log('Login attempt:', email, password);
            
            if (email === 'customer@example.com' && password === 'password123') {
                console.log('Credentials valid, logging in...');
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userName', 'Demo Customer');
                
                toggleLoginModal(); // Close modal
                alert('Login successful! Redirecting...');
                
                setTimeout(() => {
                    console.log('Attempting redirect...');
                    const referringPage = localStorage.getItem('loginReferrer') || 'customer-dashboard.html';
                    localStorage.removeItem('loginReferrer');
                    window.location.replace(referringPage);
                }, 500);
                
            } else {
                alert('Invalid credentials. Use the demo credentials: customer@example.com / password123');
            }
        }
        
        // Handle signup
        function handleSignup(event) {
            event.preventDefault();
            const name = event.target.querySelector('input[type="text"]').value;
            const email = event.target.querySelector('input[type="email"]').value;
            const password = event.target.querySelector('input[type="password"]').value;
            
            // Simple validation
            if (name && email && password) {
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userName', name);
                updateNavVisibility();
                toggleSignupModal();
                alert('Account created successfully! You can now save searches.');
            }
        }
        
        // Dynamic heading and search functionality
        function updateDynamicHeadings(searchTerm, location, category) {
            const dynamicSubheading = document.getElementById('dynamicSubheading');
            const resultsHeading = document.getElementById('resultsHeading');
            const resultsCount = document.getElementById('resultsCount');
            
            if (searchTerm || location || category) {
                let context = '';
                if (category) context += category;
                if (location) context += (context ? ' in ' : '') + location;
                if (searchTerm) context += (context ? ' matching "' : '') + searchTerm + (searchTerm ? '"' : '');
                
                if (dynamicSubheading) {
                    dynamicSubheading.textContent = `Showing results for ${context}`;
                }
                if (resultsHeading) {
                    resultsHeading.textContent = `Search Results`;
                }
            } else {
                if (dynamicSubheading) {
                    dynamicSubheading.textContent = 'Discover amazing businesses near you';
                }
                if (resultsHeading) {
                    resultsHeading.textContent = 'All Businesses';
                }
            }
        }
        
        // Search functionality
        function performSearch() {
            const businessName = document.getElementById('businessNameSearch').value;
            const location = document.getElementById('locationSearch').value;
            const category = document.getElementById('categorySearch').value;
            
            // Update dynamic headings
            updateDynamicHeadings(businessName, location, category);
            
            // Show advanced controls after search
            const advancedControls = document.getElementById('advancedControls');
            if (advancedControls) {
                advancedControls.classList.remove('hidden');
            }
            
            // Update results count (simulate filtering)
            const resultsCount = document.getElementById('resultsCount');
            if (resultsCount) {
                const baseCount = 12;
                let filteredCount = baseCount;
                
                if (businessName) filteredCount = Math.max(3, Math.floor(filteredCount * 0.6));
                if (location) filteredCount = Math.max(2, Math.floor(filteredCount * 0.7));
                if (category) filteredCount = Math.max(1, Math.floor(filteredCount * 0.5));
                
                resultsCount.textContent = `${filteredCount} businesses found`;
            }
        }
        
        // Near Me functionality
        function findNearMe() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    // Simulate location-based results
                    updateDynamicHeadings('', 'your area', '');
                    const resultsCount = document.getElementById('resultsCount');
                    if (resultsCount) {
                        resultsCount.textContent = '8 businesses found near you';
                    }
                    
                    // Show advanced controls
                    const advancedControls = document.getElementById('advancedControls');
                    if (advancedControls) {
                        advancedControls.classList.remove('hidden');
                    }
                }, function(error) {
                    alert('Unable to get your location. Please enter your postcode manually.');
                });
            } else {
                alert('Geolocation is not supported by this browser.');
            }
        }
        
        // Initialize search functionality
        document.addEventListener('DOMContentLoaded', function() {
            updateNavVisibility();
            
            // Add event listeners
            const searchBtn = document.getElementById('searchBtn');
            const nearMeBtn = document.getElementById('nearMeBtn');
            
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            }
            
            if (nearMeBtn) {
                nearMeBtn.addEventListener('click', findNearMe);
            }
            
            // Add enter key support for search inputs
            const searchInputs = document.querySelectorAll('#businessNameSearch, #locationSearch');
            searchInputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            });
        });
    </script>
</body>
</html>