<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bookings - BlkPages</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Access control temporarily disabled for testing -->
    <!-- <script src="js/access-control.js"></script> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #121212 0%, #1A1A1A 50%, #0F0F0F 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        .header {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .basket-icon {
            position: relative;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            background: rgba(13, 148, 136, 0.1);
            border: 1px solid rgba(13, 148, 136, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }
        
        .basket-icon:hover {
            background: rgba(13, 148, 136, 0.2);
            transform: scale(1.1);
        }
        
        .basket-icon i {
            color: #0D9488;
            font-size: 1.2rem;
        }
        
        .basket-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            border: 2px solid #1a1a1a;
        }
        
        .customer-menu {
            position: relative;
        }
        
        .customer-initial {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0D9488, #10B981);
            color: white;
            border: none;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(13, 148, 136, 0.3);
        }
        
        .customer-initial:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(13, 148, 136, 0.5);
        }
        
        .customer-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            min-width: 150px;
            z-index: 1000;
            margin-top: 0.5rem;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: #ffffff;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item:hover {
            background: rgba(13, 148, 136, 0.2);
            color: #0D9488;
        }
        
        .dropdown-item i {
            font-size: 0.8rem;
            width: 16px;
        }
        
        .header-link {
            color: #cccccc;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .header-link:hover {
            color: #FF3CAC;
        }
        
        /* Page Header */
        .page-header {
            padding: 3rem 0;
        }
        
        .page-header .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .sign-out-btn {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .sign-out-btn:hover {
            background: linear-gradient(135deg, #ff6666, #ff0000);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.3);
        }
        
        .sign-out-btn i {
            font-size: 0.8rem;
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 1rem;
        }
        
        .page-subtitle {
            color: #cccccc;
            font-size: 1.2rem;
        }
        
        /* Dashboard Navigation */
        .dashboard-nav {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: #1A1A1A;
            border-radius: 12px;
            padding: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .nav-tab {
            flex: 1;
            background: transparent;
            border: none;
            color: #cccccc;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 500;
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            color: white;
        }
        
        .nav-tab i {
            font-size: 1.1rem;
        }
        
        /* Dashboard Content */
        .dashboard-content {
            position: relative;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section-header {
            margin-bottom: 2rem;
        }
        
        .section-header h2 {
            color: #FF3CAC;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        .section-header p {
            color: #cccccc;
            font-size: 1.1rem;
        }
        
        /* Favorites Grid */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }
        
        .favorite-card {
            background: #1A1A1A;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .favorite-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .favorite-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .favorite-header .business-logo {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .favorite-header .business-details h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }
        
        .favorite-header .business-category {
            color: #FF3CAC;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .favorite-header .business-rating {
            color: #cccccc;
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }
        
        .favorite-btn {
            background: transparent;
            border: 2px solid #FF3CAC;
            color: #FF3CAC;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .favorite-btn.active {
            background: #FF3CAC;
            color: white;
        }
        
        .favorite-btn:hover {
            background: #FF3CAC;
            color: white;
        }
        
        .favorite-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        /* Recent Searches */
        .recent-searches {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .search-item {
            background: #1A1A1A;
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .search-info {
            flex: 1;
        }
        
        .search-query {
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        
        .search-time {
            color: #cccccc;
            font-size: 0.9rem;
        }
        
        .search-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .search-btn {
            background: transparent;
            border: 1px solid #cccccc;
            color: #cccccc;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .search-btn:hover {
            background: #cccccc;
            color: #1A1A1A;
        }
        
        /* Account Sections */
        .account-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }
        
        .account-section {
            background: #1A1A1A;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .account-section h3 {
            color: #FF3CAC;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            color: #ffffff;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: #2A2A2A;
            color: #ffffff;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #FF3CAC;
        }
        
        .preference-item {
            margin-bottom: 1rem;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            color: #ffffff;
        }
        
        .checkbox-label input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 18px;
            height: 18px;
        }
        
        .account-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #DC2626, #B91C1C);
            color: white;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #B91C1C, #991B1B);
        }
        
        /* Bookings Grid */
        .bookings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .booking-card {
            background: #1A1A1A;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .booking-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .business-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .business-logo {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .business-details h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }
        
        .business-category {
            color: #FF3CAC;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .booking-status {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-confirmed {
            background: rgba(74, 222, 128, 0.2);
            color: #4ADE80;
            border: 1px solid rgba(74, 222, 128, 0.3);
        }
        
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #FFC107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }
        
        .status-cancelled {
            background: rgba(239, 68, 68, 0.2);
            color: #EF4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .status-completed {
            background: rgba(16, 185, 129, 0.2);
            color: #10B981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        /* Refund Amount Styling */
        .refund-amount {
            color: #10B981;
            font-weight: 600;
        }
        
        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
        }
        
        .notification-success {
            background: #10B981;
        }
        
        .notification-error {
            background: #EF4444;
        }
        
        .notification-info {
            background: #3B82F6;
        }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Past Booking Styling */
        .past-booking {
            opacity: 0.9;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .past-booking:hover {
            opacity: 1;
            transform: translateY(-2px);
        }
        
        .past-booking .booking-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .past-booking .business-details h3 {
            color: #cccccc;
        }
        
        .past-booking .detail-value {
            color: #999;
        }
        
        .past-booking .service-name {
            color: #cccccc;
        }
        
        .past-booking .service-price {
            color: #999;
        }
        
        .booking-details {
            margin-bottom: 1.5rem;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .detail-label {
            color: #cccccc;
            font-size: 0.9rem;
        }
        
        .detail-value {
            color: #ffffff;
            font-weight: 500;
        }
        
        /* Loyalty Rewards Styles */
        .loyalty-programs {
            display: grid;
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .loyalty-card {
            background: #1A1A1A;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .loyalty-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .loyalty-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .loyalty-status {
            display: flex;
            align-items: center;
        }
        
        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-badge.active {
            background: rgba(59, 130, 246, 0.2);
            color: #3B82F6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .status-badge.unlocked {
            background: rgba(16, 185, 129, 0.2);
            color: #10B981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .loyalty-progress {
            background: #2A2A2A;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .progress-text {
            color: #ffffff;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .progress-percentage {
            color: #FF3CAC;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .progress-bar {
            background: #444;
            border-radius: 4px;
            height: 8px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .progress-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .progress-label {
            color: #cccccc;
        }
        
        .progress-remaining {
            color: #FF3CAC;
            font-weight: 600;
        }
        
        .loyalty-reward {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: #2A2A2A;
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .loyalty-reward.unlocked {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        .reward-icon {
            font-size: 1.5rem;
        }
        
        .reward-info {
            flex: 1;
        }
        
        .reward-title {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }
        
        .reward-description {
            color: #ffffff;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .reward-status {
            display: flex;
            align-items: center;
        }
        
        .status-locked {
            color: #999;
            font-size: 0.9rem;
        }
        
        .status-unlocked {
            color: #10B981;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* Cancellation Note Styles */
        .cancellation-note {
            background: rgba(255, 60, 172, 0.1);
            border: 1px solid rgba(255, 60, 172, 0.3);
            border-radius: 6px;
            padding: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .cancellation-note .detail-label {
            color: #FF3CAC;
            font-weight: 600;
        }
        
        .cancellation-note .detail-value {
            color: #ffffff;
            font-weight: 500;
        }
        
        /* Payment Model Status Styles */
        .payment-model-status {
            background: rgba(255, 60, 172, 0.1);
            border: 1px solid rgba(255, 60, 172, 0.3);
            border-radius: 6px;
            padding: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .payment-model-status .detail-label {
            color: #FF3CAC;
            font-weight: 600;
        }
        
        .payment-model-status .detail-value {
            color: #ffffff;
            font-weight: 500;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        /* Non-refundable Notice Styles */
        .non-refundable-notice {
            background: rgba(255, 60, 172, 0.1);
            border: 1px solid rgba(255, 60, 172, 0.3);
            border-radius: 6px;
            padding: 0.75rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .non-refundable-notice i {
            color: #FF3CAC;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .non-refundable-notice span {
            color: #e5e7eb;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .services-list {
            margin-bottom: 1.5rem;
        }
        
        .services-title {
            color: #FF3CAC;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .service-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }
        
        .service-name {
            color: #cccccc;
        }
        
        .service-price {
            color: #4ADE80;
            font-weight: 500;
        }
        
        .booking-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2B86C5, #4ADE80);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1E40AF, #059669);
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: transparent;
            border: 2px solid #cccccc;
            color: #cccccc;
        }
        
        .btn-secondary:hover {
            background: #cccccc;
            color: #1A1A1A;
        }
        
        .btn-danger {
            background: transparent;
            border: 2px solid #EF4444;
            color: #EF4444;
        }
        
        .btn-danger:hover {
            background: #EF4444;
            color: white;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: #1A1A1A;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .empty-icon {
            font-size: 4rem;
            color: #666666;
            margin-bottom: 1rem;
        }
        
        .empty-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }
        
        .empty-subtitle {
            color: #cccccc;
            margin-bottom: 2rem;
        }
        
        .empty-cta {
            background: linear-gradient(135deg, #FF3CAC, #784BA0);
            color: white;
            padding: 1rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .empty-cta:hover {
            background: linear-gradient(135deg, #FF1493, #8A2BE2);
            transform: translateY(-1px);
        }
        
        /* Footer */
        .footer {
            background: #1A1A1A;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-links {
            display: flex;
            gap: 2rem;
        }
        
        .footer-link {
            color: #cccccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-link:hover {
            color: #FF3CAC;
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .bookings-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .booking-card {
                padding: 1.5rem;
            }
            
            .booking-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .business-info {
                width: 100%;
            }
            
            .booking-actions {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
                justify-content: center;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }
        }
        
        /* Loyalty FAQ Styles */
        .loyalty-faq-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .faq-container {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .faq-item {
            background: #1A1A1A;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .faq-item:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        
        .faq-question {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #2A2A2A;
            border: none;
            color: #ffffff;
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .faq-question:hover {
            background: #333;
        }
        
        .faq-question i {
            color: #0D9488;
            transition: transform 0.3s ease;
            font-size: 0.9rem;
        }
        
        .faq-question.active i {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            background: #1A1A1A;
            color: #cccccc;
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        
        .faq-answer.show {
            padding: 1.5rem;
            max-height: 200px;
        }
        
        @media (max-width: 768px) {
            .loyalty-faq-section {
                margin-top: 2rem;
                padding-top: 1.5rem;
            }
            
            .faq-question {
                padding: 1rem;
                font-size: 0.9rem;
            }
            
            .faq-answer.show {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">BlkPages</div>
                <div class="header-actions">
                    <a href="index.html" class="header-link">
                        <i class="fas fa-home"></i> Home
                    </a>
                    <a href="search-results.html" class="header-link">
                        <i class="fas fa-search"></i> Browse
                    </a>
                    <a href="preview-test.html" class="header-link" style="background: linear-gradient(135deg, #FF3CAC, #784BA0); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 600;">
                        <i class="fas fa-flask"></i> Preview Test
                    </a>
                    
                    <!-- Basket Icon -->
                    <div class="basket-icon" id="basketIcon" onclick="scrollToBooking()">
                        <i class="fas fa-shopping-basket"></i>
                        <span class="basket-count" id="basketCount">0</span>
                </div>
                    
                    <!-- Customer Menu (for logged-in users) -->
                    <div class="customer-menu" id="customerMenu" style="display: none; position: relative;">
                        <button class="customer-initial" id="customerInitial" onclick="toggleCustomerMenu()">
                            <span id="customerInitialText">U</span>
                    </button>
                        <div class="customer-dropdown" id="customerDropdown" style="display: none;">
                            <a href="customer-dashboard.html" class="dropdown-item">
                                <i class="fas fa-user"></i>
                                Account
                            </a>
                            <a href="#" onclick="signOut()" class="dropdown-item">
                                <i class="fas fa-sign-out-alt"></i>
                                Sign Out
                            </a>
                </div>
            </div>
        </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-content">
                <div>
                    <h1 class="page-title">My Dashboard</h1>
                    <p class="page-subtitle">Manage your bookings, favorites, and account</p>
                </div>
                <button onclick="signOut()" class="sign-out-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    Sign Out
                </button>
            </div>
        </div>

        <!-- Dashboard Navigation -->
        <div class="dashboard-nav">
            <button class="nav-tab active" onclick="showTab('bookings')">
                <i class="fas fa-calendar"></i> My Bookings
            </button>
            <button class="nav-tab" onclick="showTab('favorites')">
                <i class="fas fa-heart"></i> Favorites
            </button>
            <button class="nav-tab" onclick="showTab('recent')">
                <i class="fas fa-history"></i> Recent Searches
            </button>
            <button class="nav-tab" onclick="showTab('loyalty')">
                <i class="fas fa-gift"></i> Loyalty Rewards
            </button>
            <button class="nav-tab" onclick="showTab('account')">
                <i class="fas fa-user"></i> Account
            </button>
                    </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Bookings Tab -->
            <div class="tab-content active" id="bookingsTab">
                <!-- Upcoming Bookings Section -->
                <div class="section-header">
                    <h2>Upcoming Bookings</h2>
                    <p>Your confirmed and pending appointments</p>
                    </div>
                <div class="bookings-grid" id="bookingsGrid">
            <!-- Sample Booking 1 -->
            <div class="booking-card">
                <div class="booking-header">
                    <div class="business-info">
                        <div class="business-logo">RH</div>
                        <div class="business-details">
                            <h3>Royal Hair Studio</h3>
                            <div class="business-category">Hair Salon</div>
                </div>
                    </div>
                    <div class="booking-status status-confirmed">Confirmed</div>
            </div>
            
                <div class="booking-details">
                    <div class="detail-row">
                        <span class="detail-label">Date:</span>
                        <span class="detail-value">Saturday, Dec 28, 2024</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Time:</span>
                        <span class="detail-value">2:00 PM</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value">1h 15m</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment:</span>
                        <span class="detail-value">Paid Online</span>
                    </div>
                    <div class="detail-row payment-model-status">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">✅ Haircut & Style, £70 paid in full online.</span>
                    </div>
                    <div class="detail-row cancellation-note">
                        <span class="detail-label">Cancellation:</span>
                        <span class="detail-value">48h notice required</span>
                </div>
            </div>
            
                <div class="services-list">
                    <div class="services-title">Services</div>
                    <div class="service-item">
                        <span class="service-name">Haircut & Style</span>
                        <span class="service-price">£45</span>
                    </div>
                    <div class="service-item">
                        <span class="service-name">Hair Wash & Blow Dry</span>
                        <span class="service-price">£25</span>
                    </div>
                </div>
                
                <div class="booking-actions">
                    <a href="booking-confirmation.html" class="action-btn btn-primary">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    <div class="cancellation-status" id="cancellationStatus1">
                        <a href="cancel-booking.html?booking=booking1&user=loggedin" class="action-btn btn-danger" id="cancelBtn1">
                            <i class="fas fa-times"></i> Cancel Booking
                        </a>
                        <div class="non-refundable-notice" id="nonRefundableNotice1" style="display: none;">
                            <i class="fas fa-info-circle"></i>
                            <span>This booking is non-refundable under Royal Hair Studio's cancellation policy.</span>
                    </div>
                </div>
            </div>
        </div>

            <!-- Sample Booking 2 -->
            <div class="booking-card">
                <div class="booking-header">
                    <div class="business-info">
                        <div class="business-logo">BS</div>
                        <div class="business-details">
                            <h3>Beauty Studio</h3>
                            <div class="business-category">Beauty Salon</div>
            </div>
                    </div>
                    <div class="booking-status status-pending">Pending</div>
        </div>

                <div class="booking-details">
                    <div class="detail-row">
                        <span class="detail-label">Date:</span>
                        <span class="detail-value">Monday, Dec 30, 2024</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Time:</span>
                        <span class="detail-value">10:00 AM</span>
            </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value">2h 30m</span>
        </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment:</span>
                        <span class="detail-value">Deposit Paid</span>
                    </div>
                    <div class="detail-row payment-model-status">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">💳 Full Body Massage, £28 deposit paid, £52 due at venue.</span>
                    </div>
                    <div class="detail-row cancellation-note">
                        <span class="detail-label">Cancellation:</span>
                        <span class="detail-value">24h notice required</span>
            </div>
        </div>

                <div class="services-list">
                    <div class="services-title">Services</div>
                    <div class="service-item">
                        <span class="service-name">Full Body Massage</span>
                        <span class="service-price">£80</span>
                    </div>
                    <div class="service-item">
                        <span class="service-name">Facial Treatment</span>
                        <span class="service-price">£60</span>
            </div>
        </div>

                <div class="booking-actions">
                    <a href="booking-confirmation.html" class="action-btn btn-primary">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    <div class="cancellation-status" id="cancellationStatus2">
                        <a href="cancel-booking.html?booking=booking2&user=loggedin" class="action-btn btn-danger" id="cancelBtn2">
                            <i class="fas fa-times"></i> Cancel Booking
                        </a>
                        <div class="non-refundable-notice" id="nonRefundableNotice2" style="display: none;">
                            <i class="fas fa-info-circle"></i>
                            <span>This booking is non-refundable under Beauty Studio's cancellation policy.</span>
                </div>
                    </div>
                </div>
            </div>
            
            <!-- Sample Booking 3 - Pay at Venue -->
            <div class="booking-card">
                <div class="booking-header">
                    <div class="business-info">
                        <div class="business-logo">FS</div>
                        <div class="business-details">
                            <h3>Fitness Studio</h3>
                            <div class="business-category">Wellness Center</div>
                        </div>
                    </div>
                    <div class="booking-status status-confirmed">Confirmed</div>
                </div>
                
                <div class="booking-details">
                    <div class="detail-row">
                        <span class="detail-label">Date:</span>
                        <span class="detail-value">Friday, Jan 19, 2025</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Time:</span>
                        <span class="detail-value">3:00 PM</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value">1h 00m</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment:</span>
                        <span class="detail-value">Pay at Venue</span>
                    </div>
                    <div class="detail-row payment-model-status">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">💷 Massage, £50 payable at the venue. No online payment taken.</span>
                    </div>
                    <div class="detail-row cancellation-note">
                        <span class="detail-label">Cancellation:</span>
                        <span class="detail-value">24h notice required</span>
                    </div>
                </div>
                
                <div class="services-list">
                    <div class="services-title">Services</div>
                    <div class="service-item">
                        <span class="service-name">Massage</span>
                        <span class="service-price">£50</span>
                    </div>
                </div>
                
                <div class="booking-actions">
                    <a href="booking-confirmation.html" class="action-btn btn-primary">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    <div class="cancellation-status" id="cancellationStatus3">
                        <a href="cancel-booking.html?booking=booking3&user=loggedin" class="action-btn btn-danger" id="cancelBtn3">
                            <i class="fas fa-times"></i> Cancel Booking
                        </a>
                        <div class="non-refundable-notice" id="nonRefundableNotice3" style="display: none;">
                            <i class="fas fa-info-circle"></i>
                            <span>This booking is non-refundable under Fitness Studio's cancellation policy.</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sample Booking 4 - Non-Cancellable (Too Close) -->
            <div class="booking-card">
                <div class="booking-header">
                    <div class="business-info">
                        <div class="business-logo">GS</div>
                        <div class="business-details">
                            <h3>Glow Salon</h3>
                            <div class="business-category">Hair Salon</div>
                </div>
                    </div>
                    <div class="booking-status status-confirmed">Confirmed</div>
                </div>
                
                <div class="booking-details">
                    <div class="detail-row">
                        <span class="detail-label">Date:</span>
                        <span class="detail-value">Tomorrow, Jan 16, 2025</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Time:</span>
                        <span class="detail-value">10:00 AM</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value">1h 00m</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment:</span>
                        <span class="detail-value">Paid Online</span>
                    </div>
                    <div class="detail-row payment-model-status">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">✅ Haircut, £35 paid in full online.</span>
                    </div>
                    <div class="detail-row cancellation-note">
                        <span class="detail-label">Cancellation:</span>
                        <span class="detail-value">24h notice required</span>
                    </div>
                </div>
                
                <div class="services-list">
                    <div class="services-title">Services</div>
                    <div class="service-item">
                        <span class="service-name">Haircut</span>
                        <span class="service-price">£35</span>
                    </div>
                </div>
                
                <div class="booking-actions">
                    <a href="booking-confirmation.html" class="action-btn btn-primary">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    <div class="cancellation-status" id="cancellationStatus4">
                        <div class="non-refundable-notice">
                            <i class="fas fa-info-circle"></i>
                            <span>This booking is outside the cancellation timeframe. Contact the venue directly for assistance.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

                <!-- Empty State (hidden by default) -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">📅</div>
                    <h2 class="empty-title">No Bookings Yet</h2>
                    <p class="empty-subtitle">Start exploring and book your first appointment</p>
                    <a href="search-results.html" class="empty-cta">
                        <i class="fas fa-search"></i> Browse Services
                    </a>
                </div>

                <!-- Past Bookings Section -->
                <div class="section-header" style="margin-top: 3rem;">
                    <h2>Past Bookings</h2>
                    <p>Your completed appointments</p>
                </div>
                <div class="bookings-grid" id="pastBookingsGrid">
                    <!-- Sample Past Booking 1 -->
                    <div class="booking-card past-booking">
                        <div class="booking-header">
                            <div class="business-info">
                                <div class="business-logo">RH</div>
                                <div class="business-details">
                                    <h3>Royal Hair Studio</h3>
                                    <div class="business-category">Hair Salon</div>
                                </div>
                            </div>
                            <div class="booking-status status-completed">Completed</div>
                        </div>
                        
                        <div class="booking-details">
                            <div class="detail-row">
                                <span class="detail-label">Date:</span>
                                <span class="detail-value">Saturday, Dec 14, 2024</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Time:</span>
                                <span class="detail-value">2:00 PM</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">1h 15m</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Payment:</span>
                                <span class="detail-value">Paid Online</span>
                            </div>
                        </div>
                        
                        <div class="services-list">
                            <div class="services-title">Services</div>
                            <div class="service-item">
                                <span class="service-name">Haircut & Style</span>
                                <span class="service-price">£45</span>
                            </div>
                            <div class="service-item">
                                <span class="service-name">Hair Wash & Blow Dry</span>
                                <span class="service-price">£25</span>
                            </div>
                        </div>
                        
                        <div class="booking-actions">
                            <a href="booking-confirmation.html" class="action-btn btn-primary">
                                <i class="fas fa-eye"></i> View Details
                            </a>
                            <a href="business-profile.html" class="action-btn btn-secondary" onclick="rebookAppointment('Royal Hair Studio', 'business-profile.html')">
                                <i class="fas fa-redo"></i> Rebook
                            </a>
                        </div>
                    </div>

                    <!-- Sample Past Booking 2 -->
                    <div class="booking-card past-booking">
                        <div class="booking-header">
                            <div class="business-info">
                                <div class="business-logo">BS</div>
                                <div class="business-details">
                                    <h3>Beauty Studio</h3>
                                    <div class="business-category">Beauty Salon</div>
                </div>
                            </div>
                            <div class="booking-status status-completed">Completed</div>
                        </div>
                        
                        <div class="booking-details">
                            <div class="detail-row">
                                <span class="detail-label">Date:</span>
                                <span class="detail-value">Wednesday, Dec 11, 2024</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Time:</span>
                                <span class="detail-value">10:00 AM</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">2h 30m</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Payment:</span>
                                <span class="detail-value">Paid at Venue</span>
                            </div>
                        </div>
                        
                        <div class="services-list">
                            <div class="services-title">Services</div>
                            <div class="service-item">
                                <span class="service-name">Full Body Massage</span>
                                <span class="service-price">£80</span>
                            </div>
                            <div class="service-item">
                                <span class="service-name">Facial Treatment</span>
                                <span class="service-price">£60</span>
                            </div>
                        </div>
                        
                        <div class="booking-actions">
                            <a href="booking-confirmation.html" class="action-btn btn-primary">
                                <i class="fas fa-eye"></i> View Details
                            </a>
                            <a href="business-profile.html" class="action-btn btn-secondary" onclick="rebookAppointment('Beauty Studio', 'business-profile.html')">
                                <i class="fas fa-redo"></i> Rebook
            </a>
        </div>
                    </div>

                    <!-- Sample Past Booking 3 -->
                    <div class="booking-card past-booking">
                        <div class="booking-header">
                            <div class="business-info">
                                <div class="business-logo">NS</div>
                                <div class="business-details">
                                    <h3>Nail Studio</h3>
                                    <div class="business-category">Nail Salon</div>
                </div>
                            </div>
                            <div class="booking-status status-completed">Completed</div>
                        </div>
                        
                        <div class="booking-details">
                            <div class="detail-row">
                                <span class="detail-label">Date:</span>
                                <span class="detail-value">Monday, Dec 9, 2024</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Time:</span>
                                <span class="detail-value">3:30 PM</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">1h 45m</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Payment:</span>
                                <span class="detail-value">Paid Online</span>
                            </div>
                        </div>
                        
                        <div class="services-list">
                            <div class="services-title">Services</div>
                            <div class="service-item">
                                <span class="service-name">Manicure & Pedicure</span>
                                <span class="service-price">£55</span>
                            </div>
                            <div class="service-item">
                                <span class="service-name">Gel Polish</span>
                                <span class="service-price">£25</span>
                            </div>
                        </div>
                        
                        <div class="booking-actions">
                            <a href="booking-confirmation.html" class="action-btn btn-primary">
                                <i class="fas fa-eye"></i> View Details
                            </a>
                            <a href="business-profile.html" class="action-btn btn-secondary" onclick="rebookAppointment('Nail Studio', 'business-profile.html')">
                                <i class="fas fa-redo"></i> Rebook
            </a>
                            </div>
                            </div>
                        </div>
                        
                        <!-- Sample Past Booking 4 - Cancelled -->
                        <div class="booking-card past-booking">
                            <div class="booking-header">
                                <div class="business-info">
                                    <div class="business-logo">GS</div>
                                    <div class="business-details">
                                        <h3>Glow Salon</h3>
                                        <div class="business-category">Hair Salon</div>
                                    </div>
                                </div>
                                <div class="booking-status status-cancelled">Cancelled</div>
                            </div>
                            
                            <div class="booking-details">
                                <div class="detail-row">
                                    <span class="detail-label">Date:</span>
                                    <span class="detail-value">Monday, Jan 8, 2025</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Time:</span>
                                    <span class="detail-value">2:00 PM</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Duration:</span>
                                    <span class="detail-value">1h 30m</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Payment:</span>
                                    <span class="detail-value">Refunded</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Refund Amount:</span>
                                    <span class="detail-value refund-amount">£45.00</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Refund Date:</span>
                                    <span class="detail-value">Jan 8, 2025</span>
                                </div>
                                <div class="detail-row payment-model-status">
                                    <span class="detail-label">Refund Status:</span>
                                    <span class="detail-value">🔄 Refund £45 issued to your payment method.</span>
                                </div>
                            </div>
                            
                            <div class="services-list">
                                <div class="services-title">Services</div>
                                <div class="service-item">
                                    <span class="service-name">Haircut & Style</span>
                                    <span class="service-price">£45</span>
                                </div>
                            </div>
                            
                            <div class="booking-actions">
                                <a href="booking-confirmation.html" class="action-btn btn-secondary">
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                                <a href="business-profile.html" class="action-btn btn-primary">
                                    <i class="fas fa-calendar-plus"></i> Book Again
                                </a>
                            </div>
                        </div>

                <!-- Past Bookings Empty State (hidden by default) -->
                <div class="empty-state" id="pastBookingsEmptyState" style="display: none;">
                    <div class="empty-icon">📋</div>
                    <h2 class="empty-title">No Past Bookings</h2>
                    <p class="empty-subtitle">Your completed appointments will appear here</p>
                    </div>
            </div>

            <!-- Favorites Tab -->
            <div class="tab-content" id="favoritesTab">
                <div class="section-header">
                    <h2>My Favorites</h2>
                    <p>Businesses and services you've saved</p>
                </div>
                <div class="favorites-grid" id="favoritesGrid">
                    <!-- Sample Favorite 1 -->
                    <div class="favorite-card">
                        <div class="favorite-header">
                            <div class="business-logo">RH</div>
                            <div class="business-details">
                                <h3>Royal Hair Studio</h3>
                                <div class="business-category">Hair Salon</div>
                                <div class="business-rating">⭐ 4.8 (120 reviews)</div>
                            </div>
                            <button class="favorite-btn active" onclick="toggleFavorite(this)">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                        <div class="favorite-actions">
                            <a href="business-profile.html" class="action-btn btn-primary">
                                <i class="fas fa-eye"></i> View Profile
                            </a>
                            <a href="business-profile.html" class="action-btn btn-secondary">
                                <i class="fas fa-calendar"></i> Book Now
                            </a>
                        </div>
                    </div>

                    <!-- Sample Favorite 2 -->
                    <div class="favorite-card">
                        <div class="favorite-header">
                            <div class="business-logo">BS</div>
                            <div class="business-details">
                                <h3>Beauty Studio</h3>
                                <div class="business-category">Beauty Salon</div>
                                <div class="business-rating">⭐ 4.6 (89 reviews)</div>
                        </div>
                            <button class="favorite-btn active" onclick="toggleFavorite(this)">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                        <div class="favorite-actions">
                            <a href="business-profile.html" class="action-btn btn-primary">
                                <i class="fas fa-eye"></i> View Profile
                            </a>
                            <a href="business-profile.html" class="action-btn btn-secondary">
                                <i class="fas fa-calendar"></i> Book Now
                            </a>
                    </div>
                    </div>
                </div>
            </div>

            <!-- Recent Searches Tab -->
            <div class="tab-content" id="recentTab">
                <div class="section-header">
                    <h2>Recent Searches</h2>
                    <p>Your recent search history</p>
                            </div>
                <div class="recent-searches" id="recentSearches">
                    <!-- Sample Recent Search 1 -->
                    <div class="search-item">
                        <div class="search-info">
                            <div class="search-query">Hair salons in London</div>
                            <div class="search-time">2 hours ago</div>
                            </div>
                        <div class="search-actions">
                            <button class="search-btn" onclick="repeatSearch('Hair salons in London')">
                                <i class="fas fa-search"></i> Search Again
                            </button>
                            <button class="search-btn" onclick="removeSearch(this)">
                                <i class="fas fa-times"></i> Remove
                    </button>
                </div>
                    </div>

                    <!-- Sample Recent Search 2 -->
                    <div class="search-item">
                        <div class="search-info">
                            <div class="search-query">Beauty treatments near me</div>
                            <div class="search-time">1 day ago</div>
                        </div>
                        <div class="search-actions">
                            <button class="search-btn" onclick="repeatSearch('Beauty treatments near me')">
                                <i class="fas fa-search"></i> Search Again
                            </button>
                            <button class="search-btn" onclick="removeSearch(this)">
                                <i class="fas fa-times"></i> Remove
                            </button>
                        </div>
                    </div>

                    <!-- Sample Recent Search 3 -->
                    <div class="search-item">
                        <div class="search-info">
                            <div class="search-query">Barbers in Manchester</div>
                            <div class="search-time">3 days ago</div>
                        </div>
                        <div class="search-actions">
                            <button class="search-btn" onclick="repeatSearch('Barbers in Manchester')">
                                <i class="fas fa-search"></i> Search Again
                            </button>
                            <button class="search-btn" onclick="removeSearch(this)">
                                <i class="fas fa-times"></i> Remove
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loyalty Rewards Tab -->
            <div class="tab-content" id="loyaltyTab">
                <div class="section-header">
                    <h2>Loyalty Rewards</h2>
                    <p>Track your progress and unlock rewards with your favorite businesses</p>
                </div>
                
                <div class="loyalty-programs">
                    <!-- Glow Hair Loyalty Program -->
                    <div class="loyalty-card">
                        <div class="loyalty-header">
                            <div class="business-info">
                                <div class="business-logo">GH</div>
                                <div class="business-details">
                                    <h3>Glow Hair</h3>
                                    <p>Hair Salon</p>
                                </div>
                            </div>
                            <div class="loyalty-status">
                                <span class="status-badge active">Active</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-progress">
                            <div class="progress-info">
                                <div class="progress-text">3 of 5 visits complete</div>
                                <div class="progress-percentage">60%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%;"></div>
                            </div>
                            <div class="progress-details">
                                <span class="progress-label">Book 5 visits, get reward</span>
                                <span class="progress-remaining">2 more visits needed</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-reward">
                            <div class="reward-icon">🎁</div>
                            <div class="reward-info">
                                <div class="reward-title">Reward</div>
                                <div class="reward-description">1 Free Service</div>
                            </div>
                            <div class="reward-status">
                                <span class="status-locked">Locked</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Spa Haven Loyalty Program -->
                    <div class="loyalty-card">
                        <div class="loyalty-header">
                            <div class="business-info">
                                <div class="business-logo">SH</div>
                                <div class="business-details">
                                    <h3>Spa Haven</h3>
                                    <p>Beauty Spa</p>
                                </div>
                            </div>
                            <div class="loyalty-status">
                                <span class="status-badge active">Active</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-progress">
                            <div class="progress-info">
                                <div class="progress-text">£45 of £100 spent</div>
                                <div class="progress-percentage">45%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 45%;"></div>
                            </div>
                            <div class="progress-details">
                                <span class="progress-label">Spend £100, get reward</span>
                                <span class="progress-remaining">£55 more to spend</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-reward">
                            <div class="reward-icon">🎁</div>
                            <div class="reward-info">
                                <div class="reward-title">Reward</div>
                                <div class="reward-description">20% off next booking</div>
                            </div>
                            <div class="reward-status">
                                <span class="status-locked">Locked</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Luxe Beauty Loyalty Program (Unlocked) -->
                    <div class="loyalty-card">
                        <div class="loyalty-header">
                            <div class="business-info">
                                <div class="business-logo">LB</div>
                                <div class="business-details">
                                    <h3>Luxe Beauty</h3>
                                    <p>Premium Beauty</p>
                                </div>
                            </div>
                            <div class="loyalty-status">
                                <span class="status-badge unlocked">Reward Unlocked!</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-progress">
                            <div class="progress-info">
                                <div class="progress-text">4 of 4 visits complete</div>
                                <div class="progress-percentage">100%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 100%;"></div>
                            </div>
                            <div class="progress-details">
                                <span class="progress-label">Book 4 visits within 8 weeks, get reward</span>
                                <span class="progress-remaining">Completed!</span>
                            </div>
                        </div>
                        
                        <div class="loyalty-reward unlocked">
                            <div class="reward-icon">🎉</div>
                            <div class="reward-info">
                                <div class="reward-title">Reward Unlocked!</div>
                                <div class="reward-description">£15 off next booking</div>
                            </div>
                            <div class="reward-status">
                                <span class="status-unlocked">Available</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Loyalty Rewards FAQ Section -->
                <div class="loyalty-faq-section">
                    <div class="section-header">
                        <h2>Loyalty Rewards FAQ</h2>
                        <p>Everything you need to know about earning and using rewards</p>
                    </div>
                    
                    <div class="faq-container">
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                How do I earn loyalty rewards?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                Each business sets their own loyalty programme. You might unlock a reward by booking a certain number of times, spending a certain amount, or booking within a timeframe.
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                How do I know if I'm close to unlocking a reward?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                You can track your progress in your customer dashboard. You'll also receive an email (and SMS if enabled) when you're close.
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                How do I use my reward?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                Rewards apply automatically at checkout once unlocked. You'll see the discount or free service before you confirm payment.
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                Do rewards expire?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                Each business sets their own rules. Some rewards may not expire, while others may need to be used within a timeframe (e.g., 6 weeks or 6 months). Check the details in your dashboard.
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                Can I transfer rewards between businesses?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                No. Rewards are tied to the business where you earned them.
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                Can I save a reward for later?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                Yes. If you don't use it immediately, you can save it for your next booking (until expiry if the business has set one).
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleLoyaltyFAQ(this)">
                                Do I need a code to redeem rewards?
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                No. Rewards are applied automatically at checkout when you book online.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Tab -->
            <div class="tab-content" id="accountTab">
                <div class="section-header">
                    <h2>Account Settings</h2>
                    <p>Manage your account details and preferences</p>
                </div>
                
                <div class="account-sections">
                    <!-- Profile Information -->
                    <div class="account-section">
                        <h3>Profile Information</h3>
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="profileName" value="Test User" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" id="profileEmail" value="test@example.com" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="profilePhone" value="07123456789" class="form-input">
                    </div>
                        <button class="action-btn btn-primary" onclick="updateProfile()">
                            <i class="fas fa-save"></i> Update Profile
                    </button>
                </div>

                    <!-- Change Password -->
                    <div class="account-section">
                        <h3>Change Password</h3>
                        <div class="form-group">
                            <label>Current Password</label>
                            <input type="password" id="currentPassword" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>New Password</label>
                            <input type="password" id="newPassword" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <input type="password" id="confirmPassword" class="form-input">
                        </div>
                        <button class="action-btn btn-primary" onclick="changePassword()">
                            <i class="fas fa-key"></i> Change Password
                    </button>
                </div>

                    <!-- Notification Preferences -->
                    <div class="account-section">
                        <h3>Notification Preferences</h3>
                        <div class="preference-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="emailNotifications" checked>
                                <span class="checkmark"></span>
                                Email notifications
                            </label>
                        </div>
                        <div class="preference-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="smsNotifications">
                                <span class="checkmark"></span>
                                SMS notifications
                            </label>
                        </div>
                        <div class="preference-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="marketingEmails" checked>
                                <span class="checkmark"></span>
                                Marketing emails
                            </label>
                        </div>
                        <button class="action-btn btn-secondary" onclick="updatePreferences()">
                            <i class="fas fa-bell"></i> Update Preferences
                            </button>
                    </div>

                    <!-- Account Actions -->
                    <div class="account-section">
                        <h3>Account Actions</h3>
                        <div class="account-actions">
                            <button class="action-btn btn-secondary" onclick="exportData()">
                                <i class="fas fa-download"></i> Export My Data
                            </button>
                            <button class="action-btn btn-danger" onclick="deleteAccount()">
                                <i class="fas fa-trash"></i> Delete Account
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="about.html" class="footer-link">About</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                    <a href="terms.html" class="footer-link">Terms</a>
                    <a href="privacy.html" class="footer-link">Privacy</a>
                </div>
                <div>
                    <p>&copy; 2025 BlkPages – Supporting Black-owned Businesses</p>
                </div>
                </div>
        </div>
    </footer>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            const selectedTab = document.getElementById(tabName + 'Tab');
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }
        
        // Favorites functionality
        function toggleFavorite(button) {
            const isActive = button.classList.contains('active');
            
            if (isActive) {
                button.classList.remove('active');
                button.innerHTML = '<i class="far fa-heart"></i>';
                showMessage('Removed from favorites', 'success');
            } else {
                button.classList.add('active');
                button.innerHTML = '<i class="fas fa-heart"></i>';
                showMessage('Added to favorites', 'success');
            }
        }
        
        // Recent searches functionality
        function repeatSearch(query) {
            // Redirect to search results with the query
            window.location.href = `search-results.html?q=${encodeURIComponent(query)}`;
        }
        
        function removeSearch(button) {
            const searchItem = button.closest('.search-item');
            searchItem.remove();
            showMessage('Search removed from history', 'success');
        }
        
        // Account management functionality
        function updateProfile() {
            const name = document.getElementById('profileName').value;
            const email = document.getElementById('profileEmail').value;
            const phone = document.getElementById('profilePhone').value;
            
            if (!name || !email || !phone) {
                showMessage('Please fill in all fields', 'error');
                return;
            }
            
            // Simulate profile update
            showMessage('Profile updated successfully', 'success');
        }
        
        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showMessage('Please fill in all password fields', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showMessage('New passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 8) {
                showMessage('Password must be at least 8 characters long', 'error');
                return;
            }
            
            // Simulate password change
            showMessage('Password changed successfully', 'success');
            
            // Clear password fields
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }
        
        function updatePreferences() {
            const emailNotifications = document.getElementById('emailNotifications').checked;
            const smsNotifications = document.getElementById('smsNotifications').checked;
            const marketingEmails = document.getElementById('marketingEmails').checked;
            
            showMessage('Notification preferences updated', 'success');
        }
        
        function exportData() {
            showMessage('Data export initiated. You will receive an email with your data shortly.', 'success');
        }
        
        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                if (confirm('This will permanently delete all your data. Are you absolutely sure?')) {
                    showMessage('Account deletion initiated. You will receive a confirmation email.', 'success');
                }
            }
        }
        
        // Message display function
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 2rem;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 1000;
                max-width: 300px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            `;
            
            if (type === 'success') {
                messageDiv.style.background = '#4ADE80';
            } else if (type === 'error') {
                messageDiv.style.background = '#DC2626';
            } else {
                messageDiv.style.background = '#2B86C5';
            }
            
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.parentNode.removeChild(messageDiv);
                }
            }, 3000);
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if there are any upcoming bookings
            const bookingsGrid = document.getElementById('bookingsGrid');
            const upcomingBookings = bookingsGrid.querySelectorAll('.booking-card:not(.past-booking)');
            
            if (upcomingBookings.length === 0) {
                document.getElementById('emptyState').style.display = 'block';
            }
            
            // Check if there are any past bookings
            const pastBookingsGrid = document.getElementById('pastBookingsGrid');
            const pastBookings = pastBookingsGrid.querySelectorAll('.booking-card.past-booking');
            
            if (pastBookings.length === 0) {
                document.getElementById('pastBookingsEmptyState').style.display = 'block';
            }
            
            // Load user preferences from localStorage
            loadUserPreferences();
        });
        
        function loadUserPreferences() {
            // Load notification preferences
            const emailNotifications = localStorage.getItem('emailNotifications') === 'true';
            const smsNotifications = localStorage.getItem('smsNotifications') === 'true';
            const marketingEmails = localStorage.getItem('marketingEmails') === 'true';
            
            document.getElementById('emailNotifications').checked = emailNotifications;
            document.getElementById('smsNotifications').checked = smsNotifications;
            document.getElementById('marketingEmails').checked = marketingEmails;
        }
        
        // Save preferences to localStorage
        document.getElementById('emailNotifications').addEventListener('change', function() {
            localStorage.setItem('emailNotifications', this.checked);
        });
        
        document.getElementById('smsNotifications').addEventListener('change', function() {
            localStorage.setItem('smsNotifications', this.checked);
        });
        
        document.getElementById('marketingEmails').addEventListener('change', function() {
            localStorage.setItem('marketingEmails', this.checked);
        });
        
        // Sign out function
        // Basket management
        const BASKET_KEY = 'blkpages_basket';
        let selectedServices = [];
        
        function loadBasket() {
            const savedBasket = localStorage.getItem(BASKET_KEY);
            if (savedBasket) {
                const basketData = JSON.parse(savedBasket);
                selectedServices = basketData.selectedServices || [];
                updateBasketCount();
            }
        }
        
        function updateBasketCount() {
            const basketCount = document.getElementById('basketCount');
            if (basketCount) {
                basketCount.textContent = selectedServices.length;
            }
        }
        
        function scrollToBooking() {
            // For customer dashboard, scroll to a booking section or show message
            if (selectedServices.length > 0) {
                alert('You have ' + selectedServices.length + ' service(s) in your basket. Visit a business profile to complete your booking.');
            } else {
                alert('Your basket is empty. Browse businesses to add services.');
            }
        }
        
        // Customer menu functions
        function toggleCustomerMenu() {
            const dropdown = document.getElementById('customerDropdown');
            if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const customerMenu = document.getElementById('customerMenu');
            const dropdown = document.getElementById('customerDropdown');
            
            if (customerMenu && dropdown && !customerMenu.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Check login status and show/hide customer menu
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
            const customerMenu = document.getElementById('customerMenu');
            const basketIcon = document.getElementById('basketIcon');
            
            if (customerMenu) {
                if (isLoggedIn) {
                    customerMenu.style.display = 'block';
                    
                    // Set customer initial
                    const userName = localStorage.getItem('userName') || 'Demo User';
                    const initial = userName.charAt(0).toUpperCase();
                    document.getElementById('customerInitialText').textContent = initial;
                } else {
                    customerMenu.style.display = 'none';
                }
            }
            
            if (basketIcon) {
                if (isLoggedIn) {
                    basketIcon.style.display = 'flex';
                } else {
                    basketIcon.style.display = 'none';
                }
            }
        }
        
        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                // Clear all user data from localStorage
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userName');
                localStorage.removeItem('userPhone');
                localStorage.removeItem('basketContents');
                
                // Show success message
                alert('You have been signed out successfully.');
                
                // Redirect to homepage
            window.location.href = 'index.html';
            }
        }

        // Rebook appointment function
        function rebookAppointment(businessName, businessUrl) {
            // Store the business name for potential use in the booking flow
            localStorage.setItem('rebookBusiness', businessName);
            
            // Show confirmation message
            if (confirm(`Redirecting to ${businessName} to book a new appointment. Continue?`)) {
                // Redirect to the business profile page
                window.location.href = businessUrl;
            }
        }
        
        // Cancellation Policy Logic
        function checkCancellationEligibility() {
            // In real implementation, this would check:
            // 1. Business cancellation policy
            // 2. Time until appointment
            // 3. Booking status
            
            // Sample data for demonstration
            const bookings = [
                {
                    id: 'booking1',
                    businessName: 'Royal Hair Studio',
                    appointmentDate: new Date('2024-12-28T14:00:00'), // 2 days from now
                    policy: 'moderate', // 48h notice required
                    canCancel: true
                },
                {
                    id: 'booking2', 
                    businessName: 'Beauty Studio',
                    appointmentDate: new Date('2024-12-30T10:00:00'), // 4 days from now
                    policy: 'strict', // Non-refundable
                    canCancel: false
                }
            ];
            
            bookings.forEach(booking => {
                const cancelBtn = document.getElementById(`cancelBtn${booking.id.slice(-1)}`);
                const nonRefundableNotice = document.getElementById(`nonRefundableNotice${booking.id.slice(-1)}`);
                
                if (booking.canCancel) {
                    cancelBtn.style.display = 'block';
                    nonRefundableNotice.style.display = 'none';
                } else {
                    cancelBtn.style.display = 'none';
                    nonRefundableNotice.style.display = 'block';
                }
            });
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            loadBasket();
            checkCancellationEligibility();
            
            // Check if user came from Account Settings link
            if (localStorage.getItem('redirectToAccount') === 'true') {
                // Clear the flag
                localStorage.removeItem('redirectToAccount');
                // Switch to account tab
                showTab('account');
            }
        });
        
        // Loyalty FAQ toggle function
        function toggleLoyaltyFAQ(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('i');
            
            if (answer.classList.contains('show')) {
                answer.classList.remove('show');
                element.classList.remove('active');
            } else {
                // Close all other FAQ answers
                document.querySelectorAll('.faq-answer.show').forEach(openAnswer => {
                    openAnswer.classList.remove('show');
                });
                document.querySelectorAll('.faq-question.active').forEach(openQuestion => {
                    openQuestion.classList.remove('active');
                });
                
                // Open this answer
                answer.classList.add('show');
                element.classList.add('active');
            }
        }
        
        // Load and display customer bookings from localStorage
        function loadCustomerBookings() {
            const customerId = localStorage.getItem('customerId') || 'customer_1';
            const customerBookings = JSON.parse(localStorage.getItem(`customerBookings_${customerId}`) || '[]');
            const bookingsGrid = document.getElementById('bookingsGrid');
            
            if (!bookingsGrid) return;
            
            // Clear existing bookings
            bookingsGrid.innerHTML = '';
            
            if (customerBookings.length === 0) {
                bookingsGrid.innerHTML = `
                    <div class="no-bookings">
                        <div class="no-bookings-icon">📅</div>
                        <h3>No bookings yet</h3>
                        <p>Start exploring businesses and book your first appointment!</p>
                        <a href="index.html" class="btn-primary">Browse Businesses</a>
                    </div>
                `;
                return;
            }
            
            // Display each booking
            customerBookings.forEach(booking => {
                const bookingCard = createBookingCard(booking);
                bookingsGrid.appendChild(bookingCard);
            });
        }
        
        // Create booking card HTML
        function createBookingCard(booking) {
            const card = document.createElement('div');
            card.className = 'booking-card';
            
            const statusClass = booking.status.toLowerCase().replace(' ', '-');
            const statusIcon = booking.status === 'Confirmed' ? '✅' : 
                             booking.status === 'Pending' ? '⏳' : 
                             booking.status === 'Cancelled' ? '❌' : '📅';
            
            // Generate refund information if applicable
            const refundInfo = generateRefundInfo(booking);
            
            card.innerHTML = `
                <div class="booking-header">
                    <div class="business-info">
                        <div class="business-logo">${booking.businessName.charAt(0)}</div>
                        <div class="business-details">
                            <h3>${booking.businessName}</h3>
                            <div class="business-category">Hair Salon</div>
                        </div>
                    </div>
                    <div class="booking-status status-${statusClass}">
                        ${statusIcon} ${booking.status}
                    </div>
                </div>
                
                <div class="booking-details">
                    <div class="detail-row">
                        <span class="detail-label">Date:</span>
                        <span class="detail-value">${booking.date}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Time:</span>
                        <span class="detail-value">${booking.time}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment:</span>
                        <span class="detail-value">${booking.paymentMethod === 'payNow' ? 'Paid Online' : 'Pay at Venue'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Total:</span>
                        <span class="detail-value">£${booking.totalAmount}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Booking ID:</span>
                        <span class="detail-value">${booking.bookingId}</span>
                    </div>
                    ${refundInfo}
                </div>
                
                <div class="services-list">
                    <div class="services-title">Services</div>
                    ${booking.services.map(service => `
                        <div class="service-item">
                            <span class="service-name">${service.name}</span>
                            <span class="service-price">£${service.price}</span>
                        </div>
                    `).join('')}
                </div>
                
                ${booking.status === 'Confirmed' ? `
                    <div class="booking-actions">
                        <button class="btn-cancel" onclick="cancelBooking('${booking.bookingId}')">
                            <i class="fas fa-times"></i> Cancel Booking
                        </button>
                    </div>
                ` : ''}
            `;
            
            return card;
        }
        
        // Generate refund information for cancelled bookings
        function generateRefundInfo(booking) {
            if (booking.status === 'Cancelled' && booking.refundAmount) {
                const refundDate = booking.refundTimestamp ? 
                    new Date(booking.refundTimestamp).toLocaleDateString() : 
                    new Date().toLocaleDateString();
                
                return `
                    <div class="detail-row">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">${booking.paymentStatus || 'Refunded'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Refund Amount:</span>
                        <span class="detail-value refund-amount">£${booking.refundAmount.toFixed(2)}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Refund Date:</span>
                        <span class="detail-value">${refundDate}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Refund Status:</span>
                        <span class="detail-value">${booking.refundStatus || 'Processed'}</span>
                    </div>
                `;
            } else if (booking.status === 'Cancelled' && booking.refundStatus === 'Non-refundable') {
                return `
                    <div class="detail-row">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value">Non-refundable</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Refund Status:</span>
                        <span class="detail-value">Non-refundable under business policy</span>
                    </div>
                `;
            }
            return '';
        }
        
        // Enhanced cancel booking function with API integration
        async function cancelBooking(bookingId) {
            if (confirm('Are you sure you want to cancel this booking?')) {
                try {
                    // Show loading state
                    showNotification('Processing cancellation...', 'info');
                    
                    // Call cancellation API
                    const response = await fetch('/api/bookings/cancel', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${localStorage.getItem('customerToken')}`
                        },
                        body: JSON.stringify({
                            bookingId: bookingId,
                            cancellationReason: 'Customer cancellation'
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // Update booking status to cancelled
                        updateBookingStatus(bookingId, 'Cancelled');
                        
                        // Add refund information if applicable
                        if (result.refundAmount > 0) {
                            updateBookingRefundInfo(bookingId, result.refundAmount, result.refundId);
                        }
                        
                        // Trigger storage event for real-time sync
                        localStorage.setItem(`bookingCancelled_${bookingId}`, Date.now().toString());
                        
                        // Show success notification
                        showNotification(result.message, 'success');
                        
                        // Reload bookings display
                        loadCustomerBookings();
                    } else {
                        showNotification(result.message || 'Failed to cancel booking', 'error');
                    }
                } catch (error) {
                    console.error('Cancellation failed:', error);
                    showNotification('Failed to cancel booking. Please try again.', 'error');
                }
            }
        }
        
        // Update booking with refund information
        function updateBookingRefundInfo(bookingId, refundAmount, refundId) {
            const customerId = localStorage.getItem('customerId') || 'customer_1';
            const customerBookings = JSON.parse(localStorage.getItem(`customerBookings_${customerId}`) || '[]');
            const bookingIndex = customerBookings.findIndex(b => b.bookingId === bookingId);
            
            if (bookingIndex !== -1) {
                customerBookings[bookingIndex].refundAmount = refundAmount;
                customerBookings[bookingIndex].refundId = refundId;
                customerBookings[bookingIndex].refundStatus = 'Processed';
                customerBookings[bookingIndex].refundTimestamp = new Date().toISOString();
                customerBookings[bookingIndex].paymentStatus = 'Refunded';
                localStorage.setItem(`customerBookings_${customerId}`, JSON.stringify(customerBookings));
            }
        }
        
        // Enhanced notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        // Update booking status in localStorage
        function updateBookingStatus(bookingId, newStatus) {
            const customerId = localStorage.getItem('customerId') || 'customer_1';
            const customerBookings = JSON.parse(localStorage.getItem(`customerBookings_${customerId}`) || '[]');
            const bookingIndex = customerBookings.findIndex(b => b.bookingId === bookingId);
            
            if (bookingIndex !== -1) {
                customerBookings[bookingIndex].status = newStatus;
                customerBookings[bookingIndex].updatedAt = new Date().toISOString();
                localStorage.setItem(`customerBookings_${customerId}`, JSON.stringify(customerBookings));
            }
        }
        
        // Listen for booking status updates
        window.addEventListener('storage', function(e) {
            if (e.key && e.key.startsWith('bookingCancelled_')) {
                const bookingId = e.key.replace('bookingCancelled_', '');
                updateBookingStatus(bookingId, 'Cancelled');
                loadCustomerBookings(); // Refresh display
            }
        });
        
        // Initialize bookings on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomerBookings();
        });
    </script>
</body>
</html>