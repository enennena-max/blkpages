<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Welcome Email System - BLKPAGES</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .welcome-email-demo {
            padding: 24px;
            color: #fff;
            font-family: system-ui, -apple-system, Inter, Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .demo-header h1 {
            color: #fff;
            font-size: 2.5rem;
            margin-bottom: 16px;
            font-weight: 700;
        }
        
        .demo-header p {
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .feature-highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .feature-highlight h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .feature-highlight p {
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        
        .feature-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }
        
        .feature-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #fff;
        }
        
        .demo-section {
            background: #222;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }
        
        .demo-section h3 {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .email-preview {
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .email-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .email-header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
        }
        
        .email-header p {
            margin: 10px 0 0 0;
            font-size: 16px;
            opacity: 0.9;
        }
        
        .email-content {
            padding: 30px;
            color: #333;
        }
        
        .welcome-message {
            font-size: 18px;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .features {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .features h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 18px;
        }
        
        .feature-list-email {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .feature-list-email li {
            padding: 6px 0;
            color: #555;
            position: relative;
            padding-left: 20px;
        }
        
        .feature-list-email li:before {
            content: "‚úì";
            color: #27ae60;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .cta-section {
            text-align: center;
            margin: 30px 0;
        }
        
        .dashboard-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 16px;
        }
        
        .security-notice {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        
        .security-notice h4 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 14px;
        }
        
        .security-notice p {
            margin: 0;
            font-size: 13px;
            color: #555;
        }
        
        .email-footer {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .email-footer p {
            margin: 0 0 10px 0;
            font-size: 14px;
        }
        
        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-info {
            background: #4BC0C0;
            color: white;
        }
        
        .btn-info:hover {
            background: #3BA8A8;
        }
        
        .notification {
            background: #2ecc71;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }
        
        .notification.error {
            background: #e74c3c;
        }
        
        .notification.warning {
            background: #f39c12;
        }
        
        .notification.info {
            background: #3498db;
        }
        
        .token-demo {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .token-demo h4 {
            color: #fff;
            margin-bottom: 15px;
        }
        
        .token-display {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            color: #4CAF50;
            word-break: break-all;
            margin-bottom: 15px;
        }
        
        .token-info {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .expiry-info {
            color: #f39c12;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .dashboard-link {
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            word-break: break-all;
        }
        
        .dashboard-link a {
            color: #3498db;
            text-decoration: none;
        }
        
        .dashboard-link a:hover {
            text-decoration: underline;
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .welcome-email-demo {
                padding: 16px;
            }
            
            .demo-header h1 {
                font-size: 2rem;
            }
            
            .email-content {
                padding: 20px;
            }
            
            .demo-controls {
                flex-direction: column;
                align-items: center;
            }
        }
        
        @media (max-width: 480px) {
            .email-header {
                padding: 20px;
            }
            
            .email-header h1 {
                font-size: 20px;
            }
            
            .email-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="welcome-email-demo">
        <div class="demo-header">
            <h1>Business Welcome Email System</h1>
            <p>Automated welcome emails with secure dashboard access tokens</p>
        </div>

        <div class="feature-highlight">
            <h3>üìß Automated Welcome Email System</h3>
            <p>Send personalized welcome emails with secure dashboard access links</p>
            <div class="feature-list">
                <div class="feature-item">üîê JWT Token Security</div>
                <div class="feature-item">‚è∞ 7-Day Expiry</div>
                <div class="feature-item">üì± Responsive Design</div>
                <div class="feature-item">üéØ Personalized Links</div>
                <div class="feature-item">üìä Analytics Tracking</div>
            </div>
        </div>

        <div id="notification" class="notification"></div>

        <div class="demo-section">
            <h3>üìß Email Preview</h3>
            <div class="email-preview">
                <div class="email-header">
                    <h1>Welcome to BlkPages!</h1>
                    <p>Your business is now live and ready to grow</p>
                </div>
                
                <div class="email-content">
                    <div class="welcome-message">
                        Hi <span id="businessName">Royal Hair Studio</span>,
                    </div>
                    
                    <p>Congratulations! Your business has been successfully registered on BlkPages. You're now part of a growing community of businesses connecting with customers across the UK.</p>
                    
                    <div class="features">
                        <h3>üöÄ What you can do now:</h3>
                        <ul class="feature-list-email">
                            <li>Manage your business profile and services</li>
                            <li>Track customer bookings and analytics</li>
                            <li>Upload photos to showcase your business</li>
                            <li>Set up your availability and booking preferences</li>
                            <li>Access customer reviews and feedback</li>
                            <li>Use our loyalty program to retain customers</li>
                        </ul>
                    </div>
                    
                    <div class="cta-section">
                        <a href="#" class="dashboard-button" id="dashboardLink">
                            üéØ Access Your Dashboard
                        </a>
                    </div>
                    
                    <div class="security-notice">
                        <h4>üîí Secure Access</h4>
                        <p>This link is personalized for your business and expires in 7 days for security. If you need a new link, please contact our support team.</p>
                    </div>
                    
                    <p>If you have any questions or need help getting started, our support team is here to help. You can reach us at <a href="mailto:support@blkpages.co.uk">support@blkpages.co.uk</a> or visit our help center.</p>
                    
                    <p>Welcome to the BlkPages family!</p>
                    
                    <p>Best regards,<br>
                    <strong>The BlkPages Team</strong></p>
                </div>
                
                <div class="email-footer">
                    <p>¬© 2024 BlkPages. All rights reserved.</p>
                    <p>You're receiving this email because you registered a business on BlkPages.</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>üîê JWT Token Demo</h3>
            <div class="token-demo">
                <h4>Generated Dashboard Token</h4>
                <div class="token-display" id="tokenDisplay">
                    eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJidXNpbmVzc0lkIjoiNjY3ODkwYWJjZGVmMTIzNDU2Nzg5IiwidHlwZSI6ImRhc2hib2FyZEFjY2VzcyIsImlhdCI6MTcwNDg0MDAwMCwiZXhwIjoxNzA1NDQ0ODAwfQ.example_signature_here
                </div>
                <div class="token-info">
                    <strong>Token Type:</strong> Dashboard Access<br>
                    <strong>Business ID:</strong> 667890abcdef123456789<br>
                    <strong>Issued:</strong> <span id="issuedTime">2024-01-10 12:00:00</span>
                </div>
                <div class="expiry-info">
                    ‚è∞ <strong>Expires:</strong> <span id="expiryTime">2024-01-17 12:00:00</span> (7 days)
                </div>
                
                <h4>Dashboard Access Link</h4>
                <div class="dashboard-link">
                    <a href="#" id="dashboardLinkFull">
                        https://blkpages.co.uk/dashboard/667890abcdef123456789?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    </a>
                </div>
            </div>
        </div>

        <div class="demo-controls">
            <button class="btn btn-primary" onclick="simulateBusinessRegistration()">Simulate Business Registration</button>
            <button class="btn btn-success" onclick="generateNewToken()">Generate New Token</button>
            <button class="btn btn-warning" onclick="testTokenVerification()">Test Token Verification</button>
            <button class="btn btn-info" onclick="previewEmailTemplate()">Preview Email Template</button>
        </div>

        <div class="demo-section">
            <h3>üîß Technical Implementation</h3>
            <div style="background: #1a1a1a; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #fff; margin-bottom: 15px;">Backend API Endpoints</h4>
                <div style="font-family: monospace; color: #4CAF50; margin-bottom: 10px;">
                    <strong>POST</strong> /api/business/register
                </div>
                <div style="font-family: monospace; color: #4CAF50; margin-bottom: 10px;">
                    <strong>GET</strong> /api/auth/verify-dashboard-token
                </div>
                <div style="font-family: monospace; color: #4CAF50;">
                    <strong>POST</strong> /api/email/send-welcome
                </div>
            </div>
            
            <div style="background: #1a1a1a; border-radius: 8px; padding: 20px;">
                <h4 style="color: #fff; margin-bottom: 15px;">Environment Variables</h4>
                <div style="font-family: monospace; color: #aaa; font-size: 0.9rem;">
                    <div>JWT_SECRET=your-super-secret-key</div>
                    <div>SMTP_HOST=smtp.yourmailhost.com</div>
                    <div>SMTP_PORT=465</div>
                    <div>SMTP_USER=youruser</div>
                    <div>SMTP_PASS=yourpass</div>
                    <div>SMTP_FROM="BlkPages &lt;no-reply@blkpages.co.uk&gt;"</div>
                    <div>APP_UI_BASE_URL=https://blkpages.co.uk</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentToken = null;
        let businessId = '667890abcdef123456789';

        // Simulate business registration
        function simulateBusinessRegistration() {
            showNotification('Simulating business registration...', 'info');
            
            setTimeout(() => {
                const newBusinessId = generateBusinessId();
                const token = generateJWTToken(newBusinessId);
                updateTokenDisplay(token, newBusinessId);
                updateDashboardLink(token, newBusinessId);
                showNotification('Business registered successfully! Welcome email sent.', 'success');
            }, 1500);
        }

        // Generate new token
        function generateNewToken() {
            showNotification('Generating new dashboard token...', 'info');
            
            setTimeout(() => {
                const newBusinessId = generateBusinessId();
                const token = generateJWTToken(newBusinessId);
                updateTokenDisplay(token, newBusinessId);
                updateDashboardLink(token, newBusinessId);
                showNotification('New token generated successfully!', 'success');
            }, 1000);
        }

        // Test token verification
        function testTokenVerification() {
            if (!currentToken) {
                showNotification('Please generate a token first', 'warning');
                return;
            }
            
            showNotification('Testing token verification...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Token verification successful! Access granted.', 'success');
            }, 1000);
        }

        // Preview email template
        function previewEmailTemplate() {
            showNotification('Loading email template preview...', 'info');
            
            setTimeout(() => {
                showNotification('üìß Email template preview loaded successfully!', 'success');
            }, 800);
        }

        // Generate business ID
        function generateBusinessId() {
            return Math.random().toString(36).substr(2, 15) + Date.now().toString(36);
        }

        // Generate JWT token (simulated)
        function generateJWTToken(businessId) {
            const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));
            const payload = btoa(JSON.stringify({
                businessId: businessId,
                type: 'dashboardAccess',
                iat: Math.floor(Date.now() / 1000),
                exp: Math.floor(Date.now() / 1000) + (7 * 24 * 60 * 60) // 7 days
            }));
            const signature = 'example_signature_' + Math.random().toString(36).substr(2, 9);
            
            return `${header}.${payload}.${signature}`;
        }

        // Update token display
        function updateTokenDisplay(token, businessId) {
            currentToken = token;
            document.getElementById('tokenDisplay').textContent = token;
            document.getElementById('businessName').textContent = 'Royal Hair Studio';
            
            const now = new Date();
            const expiry = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);
            
            document.getElementById('issuedTime').textContent = now.toLocaleString();
            document.getElementById('expiryTime').textContent = expiry.toLocaleString();
        }

        // Update dashboard link
        function updateDashboardLink(token, businessId) {
            const baseUrl = 'https://blkpages.co.uk';
            const fullLink = `${baseUrl}/dashboard/${businessId}?token=${token}`;
            
            document.getElementById('dashboardLink').href = fullLink;
            document.getElementById('dashboardLinkFull').href = fullLink;
            document.getElementById('dashboardLinkFull').textContent = fullLink;
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Initialize with sample data
        document.addEventListener('DOMContentLoaded', function() {
            const token = generateJWTToken(businessId);
            updateTokenDisplay(token, businessId);
            updateDashboardLink(token, businessId);
        });
    </script>
</body>
</html>
