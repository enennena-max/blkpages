<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Dashboard - Receipts | Black Pages</title>
    <link rel="stylesheet" href="css/stripe-receipts.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #121212 0%, #1A1A1A 50%, #0F0F0F 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid #333;
        }
        
        .dashboard-title {
            color: #fff;
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
        }
        
        .dashboard-subtitle {
            color: #999;
            font-size: 1rem;
            margin: 5px 0 0 0;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #333;
            text-align: center;
        }
        
        .stat-value {
            color: #fff;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #999;
            font-size: 0.9rem;
        }
        
        .stat-card.revenue .stat-value {
            color: #4ade80;
        }
        
        .stat-card.receipts .stat-value {
            color: #3b82f6;
        }
        
        .stat-card.refunds .stat-value {
            color: #f87171;
        }
        
        .receipts-filters {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }
        
        .filters-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .filter-label {
            color: #ccc;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .filter-input,
        .filter-select {
            background: #1a1a1a;
            border: 1px solid #333;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .filter-input:focus,
        .filter-select:focus {
            outline: none;
            border-color: #3b82f6;
        }
        
        .btn-filter {
            background: #3b82f6;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-filter:hover {
            background: #2563eb;
        }
        
        .btn-generate-receipt {
            background: #4ade80;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-generate-receipt:hover {
            background: #22c55e;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Business Dashboard</h1>
                <p class="dashboard-subtitle">Manage your receipts and payments</p>
            </div>
            <button class="btn-generate-receipt" onclick="generateTestReceipt()">
                <i class="fas fa-plus"></i> Generate Test Receipt
            </button>
        </div>

        <!-- Dashboard Stats -->
        <div class="dashboard-stats">
            <div class="stat-card revenue">
                <div class="stat-value">£2,450.00</div>
                <div class="stat-label">Total Revenue</div>
            </div>
            <div class="stat-card receipts">
                <div class="stat-value">47</div>
                <div class="stat-label">Receipts Generated</div>
            </div>
            <div class="stat-card refunds">
                <div class="stat-value">3</div>
                <div class="stat-label">Refunds Processed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">98%</div>
                <div class="stat-label">Customer Satisfaction</div>
            </div>
        </div>

        <!-- Receipts Filters -->
        <div class="receipts-filters">
            <h3 style="color: #fff; margin-bottom: 15px;">Filter Receipts</h3>
            <div class="filters-row">
                <div class="filter-group">
                    <label class="filter-label">Date Range</label>
                    <input type="date" class="filter-input" id="startDate">
                </div>
                <div class="filter-group">
                    <label class="filter-label">to</label>
                    <input type="date" class="filter-input" id="endDate">
                </div>
                <div class="filter-group">
                    <label class="filter-label">Status</label>
                    <select class="filter-select" id="statusFilter">
                        <option value="">All</option>
                        <option value="completed">Completed</option>
                        <option value="refunded">Refunded</option>
                        <option value="pending">Pending</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Amount Range</label>
                    <input type="number" class="filter-input" placeholder="Min" id="minAmount">
                </div>
                <div class="filter-group">
                    <label class="filter-label">&nbsp;</label>
                    <input type="number" class="filter-input" placeholder="Max" id="maxAmount">
                </div>
                <div class="filter-group">
                    <label class="filter-label">&nbsp;</label>
                    <button class="btn-filter" onclick="filterReceipts()">
                        <i class="fas fa-search"></i> Filter
                    </button>
                </div>
            </div>
        </div>

        <!-- Business Receipts Section -->
        <div class="business-receipts">
            <h2><i class="fas fa-receipt"></i> Recent Receipts</h2>
            <div class="receipts-grid" id="receiptsGrid">
                <!-- Receipts will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/stripe-receipts.js"></script>
    <script>
        // Sample receipts data
        const sampleReceipts = [
            {
                id: 'receipt_1',
                type: 'payment',
                customer: {
                    name: 'Sarah Johnson',
                    email: 'sarah.johnson@email.com',
                    phone: '+44 7700 900123'
                },
                business: {
                    name: 'Hair Studio Pro',
                    address: '123 High Street, London',
                    phone: '+44 20 7123 4567',
                    email: 'info@hairstudiopro.com'
                },
                service: {
                    name: 'Haircut & Styling',
                    description: 'Full haircut and styling service',
                    date: '2024-01-20',
                    time: '14:00'
                },
                payment: {
                    amount: 45.00,
                    currency: 'GBP',
                    method: 'card',
                    transactionId: 'pi_1234567890',
                    status: 'completed',
                    date: '2024-01-15T10:30:00Z'
                },
                receipt: {
                    number: 'RCP-ABC123456',
                    generatedAt: '2024-01-15T10:30:00Z'
                }
            },
            {
                id: 'receipt_2',
                type: 'payment',
                customer: {
                    name: 'Michael Brown',
                    email: 'michael.brown@email.com',
                    phone: '+44 7700 900456'
                },
                business: {
                    name: 'Hair Studio Pro',
                    address: '123 High Street, London',
                    phone: '+44 20 7123 4567',
                    email: 'info@hairstudiopro.com'
                },
                service: {
                    name: 'Hair Color Treatment',
                    description: 'Full hair coloring service',
                    date: '2024-01-22',
                    time: '11:00'
                },
                payment: {
                    amount: 120.00,
                    currency: 'GBP',
                    method: 'card',
                    transactionId: 'pi_0987654321',
                    status: 'completed',
                    date: '2024-01-18T14:15:00Z'
                },
                receipt: {
                    number: 'RCP-DEF789012',
                    generatedAt: '2024-01-18T14:15:00Z'
                }
            },
            {
                id: 'receipt_3',
                type: 'refund',
                customer: {
                    name: 'Emma Wilson',
                    email: 'emma.wilson@email.com',
                    phone: '+44 7700 900789'
                },
                business: {
                    name: 'Hair Studio Pro',
                    address: '123 High Street, London',
                    phone: '+44 20 7123 4567',
                    email: 'info@hairstudiopro.com'
                },
                service: {
                    name: 'Hair Treatment',
                    description: 'Deep conditioning treatment',
                    date: '2024-01-25',
                    time: '16:00'
                },
                payment: {
                    originalAmount: 80.00,
                    refundAmount: 80.00,
                    currency: 'GBP',
                    refundId: 're_1234567890',
                    status: 'refunded',
                    date: '2024-01-19T09:45:00Z'
                },
                receipt: {
                    number: 'REF-GHI345678',
                    generatedAt: '2024-01-19T09:45:00Z'
                }
            }
        ];

        // Load receipts on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadReceipts();
        });

        function loadReceipts() {
            const receiptsGrid = document.getElementById('receiptsGrid');
            receiptsGrid.innerHTML = '';

            sampleReceipts.forEach(receipt => {
                const receiptCard = createReceiptCard(receipt);
                receiptsGrid.appendChild(receiptCard);
            });
        }

        function createReceiptCard(receipt) {
            const card = document.createElement('div');
            card.className = 'receipt-card';
            
            const isRefund = receipt.type === 'refund';
            const amount = isRefund ? receipt.payment.refundAmount : receipt.payment.amount;
            const amountLabel = isRefund ? 'Refund' : 'Payment';
            
            card.innerHTML = `
                <div class="receipt-card-header">
                    <div class="receipt-card-title">${receipt.service.name}</div>
                    <div class="receipt-card-amount">£${amount.toFixed(2)}</div>
                </div>
                <div class="receipt-card-details">
                    <div><strong>Customer:</strong> ${receipt.customer.name}</div>
                    <div><strong>Date:</strong> ${new Date(receipt.service.date).toLocaleDateString()}</div>
                    <div><strong>Time:</strong> ${receipt.service.time}</div>
                    <div><strong>Status:</strong> <span class="status ${receipt.payment.status}">${receipt.payment.status.toUpperCase()}</span></div>
                </div>
                <div class="receipt-card-footer">
                    <div class="receipt-card-date">${new Date(receipt.payment.date).toLocaleDateString()}</div>
                    <div class="receipt-card-actions">
                        <button class="btn-view-receipt" onclick="stripeReceipts.showReceipt('${receipt.id}')">
                            View Receipt
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        function filterReceipts() {
            // Filter logic would be implemented here
            console.log('Filtering receipts...');
        }

        function generateTestReceipt() {
            const testReceipt = {
                id: 'test_receipt_' + Date.now(),
                type: 'payment',
                customer: {
                    name: 'Test Customer',
                    email: 'test@example.com',
                    phone: '+44 7700 900000'
                },
                business: {
                    name: 'Hair Studio Pro',
                    address: '123 High Street, London',
                    phone: '+44 20 7123 4567',
                    email: 'info@hairstudiopro.com'
                },
                service: {
                    name: 'Test Service',
                    description: 'Test service for demonstration',
                    date: new Date().toISOString().split('T')[0],
                    time: '15:00'
                },
                payment: {
                    amount: 50.00,
                    currency: 'GBP',
                    method: 'card',
                    transactionId: 'pi_test_' + Math.random().toString(36).substr(2, 9),
                    status: 'completed',
                    date: new Date().toISOString()
                },
                receipt: {
                    number: 'RCP-TEST' + Math.random().toString(36).substr(2, 6).toUpperCase(),
                    generatedAt: new Date().toISOString()
                }
            };

            // Add to sample receipts
            sampleReceipts.unshift(testReceipt);
            
            // Reload receipts
            loadReceipts();
            
            // Show receipt
            stripeReceipts.showReceipt(testReceipt.id);
        }
    </script>
</body>
</html>
