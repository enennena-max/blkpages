<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BlkPages Business Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
  <script src="url-plan-support.js"></script>
    <style>
        body {
            background-color: #0A0A0A;
      color: #D4AF37;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s ease;
    }
    .sidebar-link {
         display: flex;
         align-items: center;
      gap: 10px;
      padding: 0.7rem 1rem;
      border-radius: 8px;
      color: rgba(212,175,55,0.75);
         font-weight: 500;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .sidebar-link:hover {
      color: #D4AF37;
      background: rgba(212,175,55,0.1);
    }
    .active {
      background: rgba(212,175,55,0.15);
         color: #D4AF37;
      border-left: 3px solid #D4AF37;
    }
    .sidebar-link svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
    }
    .card {
      background: #111;
      border: 1px solid rgba(212,175,55,0.3);
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }
    .card:hover {
      border-color: #D4AF37;
      box-shadow: 0 0 15px rgba(212,175,55,0.25);
    }
    .fade {
      animation: fadeIn 0.4s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .locked {
      filter: grayscale(0.6) brightness(0.6);
      position: relative;
    }
    .locked::after {
      content: "üîê Upgrade to unlock";
            position: absolute;
      top: 0;
      left: 0;
            right: 0;
      bottom: 0;
      border-radius: 12px;
      background: rgba(0,0,0,0.75);
      border: 1px solid rgba(212,175,55,0.45);
      color: #D4AF37;
      font-size: 0.8rem;
      font-weight: 600;
            display: flex;
            align-items: center;
      justify-content: center;
      text-align: center;
      padding: 16px;
      cursor: pointer;
    }
    .plan-indicator {
      font-size: 0.8rem;
      color: rgba(212,175,55,0.7);
      margin-top: 4px;
    }
    .upgrade-card {
      background: rgba(212,175,55,0.1);
      border: 1px solid rgba(212,175,55,0.5);
        }
    </style>
</head>

<body class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 bg-black border-r border-[#D4AF37]/30 flex flex-col justify-between">
    <div>
      <div class="p-6 text-2xl font-bold text-[#D4AF37]">BlkPages</div>
      <nav class="px-3 space-y-1" id="sidebar-nav">
        <div class="sidebar-link active" data-section="dashboard">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75l9-7.5 9 7.5V21a.75.75 0 01-.75.75H3.75A.75.75 0 013 21V9.75z" />
          </svg>
          <span>Dashboard</span>
        </div>
        <div class="sidebar-link" data-section="bookings">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          <span>Bookings</span>
        </div>
        <div class="sidebar-link" data-section="reviews">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
          </svg>
          <span>Reviews</span>
        </div>
        <div class="sidebar-link" data-section="insights">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v18h18" />
          </svg>
          <span>Insights</span>
        </div>
        <div class="sidebar-link" data-section="profile">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 12c2.28 0 4-1.72 4-4s-1.72-4-4-4-4 1.72-4 4 1.72 4 4 4zm0 2c-3.33 0-6 2.67-6 6v1h12v-1c0-3.33-2.67-6-6-6z" />
          </svg>
          <span>Profile</span>
        </div>
        <div class="sidebar-link" data-section="settings">
          <svg fill="none" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.591 1.066c1.543-.942 3.42.935 2.478 2.478a1.724 1.724 0 001.066 2.591c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.591c.942 1.543-.935 3.42-2.478 2.478a1.724 1.724 0 00-2.591 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.591-1.066c-1.543.942-3.42-.935-2.478-2.478a1.724 1.724 0 00-1.066-2.591c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.591c-.942-1.543.935-3.42 2.478-2.478.882.538 2.034.176 2.591-1.066z" />
          </svg>
          <span>Settings</span>
        </div>
                    </nav>
                </div>
    <div class="p-6">
      <button class="text-[#D4AF37]/70 hover:text-[#D4AF37] font-semibold">Logout</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8 space-y-6">
    <header class="flex justify-between items-center">
      <div>
        <h1 class="text-3xl font-bold text-[#D4AF37]">Business Dashboard</h1>
        <div class="plan-indicator" id="planLabel">Plan: ‚Äî</div>
      </div>
      <div class="flex items-center gap-4">
        <select id="planSwitcher" class="bg-black text-[#D4AF37] border border-[#D4AF37]/40 px-3 py-2 rounded-md">
          <option value="starter">Starter (¬£14.99/month)</option>
          <option value="pro">Professional (¬£28.99/month)</option>
        </select>
        <button id="upgradeBtn" class="bg-[#D4AF37] text-black px-4 py-2 font-semibold rounded-md hover:bg-yellow-500 transition">Upgrade</button>
      </div>
    </header>

    <!-- Dashboard Sections -->
    <div id="dashboard" class="section fade">
      <!-- Free Plan Dashboard -->
      <div class="dashboard-section" id="dash-free">
        <div class="card">
          <h2 class="text-xl font-semibold mb-3">Free Plan Overview</h2>
          <p class="text-sm text-[#D4AF37]/80 mb-4">Welcome to BlkPages! Here's what you can do with your free plan.</p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Profile Views</h3>
              <p class="text-2xl font-bold">182</p>
              <p class="text-xs text-[#D4AF37]/60">Last 30 days</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Your Plan</h3>
              <p class="text-2xl font-bold">Free</p>
              <p class="text-xs text-[#D4AF37]/60">¬£0 forever</p>
            </div>
            <div class="card text-center locked" data-lock="starter">
              <h3 class="text-sm text-[#D4AF37]/70">Bookings</h3>
              <p class="text-2xl font-bold">‚Äî</p>
              <p class="text-xs text-[#D4AF37]/60">Upgrade to unlock</p>
            </div>
            <div class="card text-center locked" data-lock="starter">
              <h3 class="text-sm text-[#D4AF37]/70">Reviews</h3>
              <p class="text-2xl font-bold">‚Äî</p>
              <p class="text-xs text-[#D4AF37]/60">Upgrade to unlock</p>
            </div>
          </div>
        </div>
        <div class="card upgrade-card">
          <h2 class="text-xl font-semibold mb-3">Upgrade to Starter</h2>
          <p class="text-sm text-[#D4AF37]/80 mb-4">Unlock bookings, calendar management, and customer reviews.</p>
          <button class="bg-[#D4AF37] text-black px-4 py-2 font-semibold rounded-md hover:bg-yellow-500 transition" data-upgrade>Upgrade Now</button>
        </div>
                    </div>
                    
      <!-- Starter Plan Dashboard -->
      <div class="dashboard-section" id="dash-starter">
        <div class="card">
          <h2 class="text-xl font-semibold mb-3">Starter Plan Overview</h2>
          <p class="text-sm text-[#D4AF37]/80 mb-4">Great! You have access to bookings and reviews.</p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Total Reviews</h3>
              <p class="text-2xl font-bold">32</p>
              <p class="text-xs text-[#D4AF37]/60">4.8‚òÖ average</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Bookings</h3>
              <p class="text-2xl font-bold">216</p>
              <p class="text-xs text-[#D4AF37]/60">This month</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Profile Views</h3>
              <p class="text-2xl font-bold">1,234</p>
              <p class="text-xs text-[#D4AF37]/60">Last 30 days</p>
            </div>
            <div class="card text-center locked" data-lock="pro">
              <h3 class="text-sm text-[#D4AF37]/70">Payments</h3>
              <p class="text-2xl font-bold">‚Äî</p>
              <p class="text-xs text-[#D4AF37]/60">Upgrade to unlock</p>
            </div>
          </div>
        </div>
        <div class="card upgrade-card">
          <h2 class="text-xl font-semibold mb-3">Upgrade to Professional</h2>
          <p class="text-sm text-[#D4AF37]/80 mb-4">Unlock payments, SMS reminders, and advanced analytics.</p>
          <button class="bg-[#D4AF37] text-black px-4 py-2 font-semibold rounded-md hover:bg-yellow-500 transition" data-upgrade>Upgrade Now</button>
        </div>
                    </div>
                    
      <!-- Professional Plan Dashboard -->
      <div class="dashboard-section" id="dash-pro">
        <div class="card">
          <h2 class="text-xl font-semibold mb-3">Professional Overview</h2>
          <p class="text-sm text-[#D4AF37]/80 mb-4">Welcome back! Here's a quick overview of your activity.</p>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Total Reviews</h3>
              <p class="text-2xl font-bold">127</p>
              <p class="text-xs text-[#D4AF37]/60">4.9‚òÖ average</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Average Rating</h3>
              <p class="text-2xl font-bold">4.9</p>
              <p class="text-xs text-[#D4AF37]/60">Across all reviews</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Profile Views</h3>
              <p class="text-2xl font-bold">1,234</p>
              <p class="text-xs text-[#D4AF37]/60">Last 30 days</p>
            </div>
            <div class="card text-center">
              <h3 class="text-sm text-[#D4AF37]/70">Bookings This Month</h3>
              <p class="text-2xl font-bold">89</p>
              <p class="text-xs text-[#D4AF37]/60">Confirmed appointments</p>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
          <div class="card">
            <h3 class="text-lg font-semibold mb-3">SMS Credits</h3>
            <p class="text-2xl font-bold mb-2">38 / 50</p>
            <p class="text-sm text-[#D4AF37]/70">Automated confirmations & reminders</p>
          </div>
          <div class="card">
            <h3 class="text-lg font-semibold mb-3">Loyalty Rewards</h3>
            <p class="text-2xl font-bold mb-2">Active</p>
            <p class="text-sm text-[#D4AF37]/70">62 customers enrolled</p>
          </div>
        </div>
                        </div>
                    </div>
                    
    <div id="bookings" class="section hidden fade">
      <!-- BOOKINGS TAB - FREE PLAN TEASER -->
      <section id="bookings-free" class="min-h-screen w-full bg-[#0A0A0A] text-white p-6 md:p-8 font-sans flex items-center justify-center" style="display: none;">
        <div class="max-w-md w-full bg-[#111] border border-[#2a2a2a] rounded-2xl p-6 shadow-xl">
          <div class="flex flex-col items-center gap-3 mb-5">
            <div class="text-[#D4AF37] text-[11px] font-medium bg-[#1a1a1a] border border-[#333] rounded-full px-3 py-1 uppercase tracking-wide">
              Upgrade Required
            </div>
            <h1 class="text-xl font-semibold text-white tracking-tight">
              Bookings aren't included on the Free plan
            </h1>
            <p class="text-sm text-gray-400 leading-relaxed">
              Receive and manage customer appointments directly inside your dashboard.
              View who's coming in, confirm or cancel, and keep full control of your day.
            </p>
          </div>

          <ul class="text-left text-[13px] text-gray-300 space-y-2 mb-6">
            <li class="flex items-start gap-2">
              <span class="text-[#D4AF37]">‚úî</span>
              <span>See all today's and upcoming bookings</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-[#D4AF37]">‚úî</span>
              <span>Manually add walk-in or phone bookings</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-[#D4AF37]">‚úî</span>
              <span>Update status to Confirmed / Cancelled</span>
            </li>
          </ul>

          <button
            class="w-full rounded-lg text-sm font-medium bg-[#D4AF37] text-black px-4 py-3 hover:opacity-90 transition"
            onclick="document.getElementById('upgradeModal').classList.remove('hidden')"
          >
            ‚ö° Upgrade to Starter
          </button>

          <p class="text-[11px] text-gray-500 mt-4">
            Starter plan from ¬£14.99/mo. Cancel anytime.
          </p>
        </div>
      </section>

      <!-- BOOKINGS TAB - STARTER PLAN -->
      <section id="bookings-starter" class="min-h-screen w-full bg-[#0A0A0A] text-white p-6 md:p-8 font-sans" style="display: none;">
        <!-- Header -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8">
          <div>
            <h1 class="text-2xl font-semibold text-white tracking-tight flex items-center gap-2">
              <span>Bookings</span>
              <span class="text-[11px] font-medium bg-[#1a1a1a] border border-[#333] text-[#D4AF37] px-2 py-0.5 rounded-full leading-none uppercase">
                Starter
              </span>
            </h1>
            <p class="text-sm text-gray-400 mt-1">
              View, confirm, reschedule and manage all upcoming appointments.
            </p>
          </div>

          <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
            <!-- Search -->
            <div class="relative">
              <input
                id="bookingSearchInput"
                type="text"
                class="w-full sm:w-64 bg-[#1a1a1a] border border-[#333] text-white text-sm rounded-lg pl-9 pr-3 py-2.5 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-[#D4AF37] focus:border-[#D4AF37]"
                placeholder="Search by client, service..."
              />
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xs">
                üîç
              </span>
                </div>

            <!-- Add Booking button -->
            <button
              onclick="openNewBookingModal()"
              class="whitespace-nowrap inline-flex items-center justify-center rounded-lg text-sm font-medium bg-[#D4AF37] text-black px-4 py-2.5 hover:opacity-90 transition"
            >
              + Add Booking
                    </button>
                </div>
        </div>

        <!-- Stats cards -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <!-- Total Bookings (all time / this month) -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Total Bookings (Oct)</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statTotalBookings" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-[#D4AF37] bg-[#1a1a1a] border border-[#333] rounded px-2 py-0.5 leading-none">Live</span>
            </div>
          </div>

          <!-- Bookings Today -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Bookings Today</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statTodayBookings" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">For <span id="todayLabel"></span></span>
            </div>
          </div>

          <!-- Pending / Upcoming -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Pending / Upcoming</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statPending" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">Awaiting confirm</span>
            </div>
          </div>

          <!-- Cancelled / No-Show -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Cancelled / No-Show</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statCancelled" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">This month</span>
            </div>
            </div>
        </div>

        <!-- Filters row -->
        <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4 mb-6 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
          <div class="flex flex-col sm:flex-row gap-4 flex-1">
            <!-- Status filter -->
            <div class="flex-1 min-w-[140px]">
              <label class="text-[11px] text-gray-500 uppercase tracking-wide mb-1 block">Status</label>
              <select
                id="filterStatus"
                class="w-full bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-[12px] text-white focus:outline-none focus:ring-1 focus:ring-[#D4AF37]"
              >
                <option value="all">All</option>
                <option value="Pending">Pending</option>
                <option value="Confirmed">Confirmed</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>

            <!-- Date filter (basic, for future extension) -->
            <div class="flex-1 min-w-[140px]">
              <label class="text-[11px] text-gray-500 uppercase tracking-wide mb-1 block">Date</label>
              <input
                id="filterDate"
                type="date"
                class="w-full bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-[12px] text-white focus:outline-none focus:ring-1 focus:ring-[#D4AF37]"
              />
            </div>
          </div>

          <div class="text-[10px] text-gray-500 flex flex-wrap items-center gap-2">
            <span class="hidden sm:inline text-gray-400">Legend:</span>
            <span class="flex items-center gap-1">
              <span class="w-2 h-2 rounded-full bg-[#D4AF37]"></span><span>Confirmed</span>
            </span>
            <span class="flex items-center gap-1">
              <span class="w-2 h-2 rounded-full bg-[#444]"></span><span>Pending</span>
            </span>
            <span class="flex items-center gap-1">
              <span class="w-2 h-2 rounded-full bg-[#7a1f1f]"></span><span>Cancelled</span>
            </span>
          </div>
        </div>

        <!-- Bookings table card -->
        <div class="bg-[#111] border border-[#2a2a2a] rounded-xl overflow-hidden">
          <!-- table header -->
          <div class="flex flex-col md:flex-row md:items-center md:justify-between p-4 border-b border-[#2a2a2a]">
            <div>
              <h2 class="text-sm font-medium text-white">All Bookings</h2>
              <p class="text-[11px] text-gray-500">Live list of upcoming and recent bookings</p>
            </div>
            <div class="text-[11px] text-gray-500 mt-3 md:mt-0">
              <span id="tableCount">0</span> total
            </div>
          </div>

          <!-- table -->
          <div class="overflow-x-auto">
            <table class="w-full text-left text-[12px] text-gray-300 min-w-[700px]">
              <thead class="uppercase text-[10px] text-gray-500 bg-[#1a1a1a] border-b border-[#2a2a2a]">
                <tr>
                  <th class="px-4 py-3 font-medium">Date</th>
                  <th class="px-4 py-3 font-medium">Time</th>
                  <th class="px-4 py-3 font-medium">Client</th>
                  <th class="px-4 py-3 font-medium">Service</th>
                  <th class="px-4 py-3 font-medium">Staff</th>
                  <th class="px-4 py-3 font-medium">Status</th>
                  <th class="px-4 py-3 font-medium">Price</th>
                  <th class="px-4 py-3 font-medium text-right">Actions</th>
                </tr>
              </thead>

              <tbody id="bookingsTableBody" class="divide-y divide-[#1f1f1f]">
                <!-- rows injected by JS -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Settings footer shortcut -->
        <div class="text-[12px] text-gray-400 text-center mt-8">
          <button
            class="underline hover:text-[#D4AF37] transition"
            onclick="alert('Open Booking Settings: hours, cancellation rules, etc.')"
          >
            Configure booking hours, cancellation rules & policies ‚Üí
          </button>
        </div>
      </section>

      <!-- BOOKINGS TAB - PROFESSIONAL PLAN -->
      <section id="bookings-pro" class="min-h-screen w-full bg-[#0A0A0A] text-white p-6 md:p-8 font-sans" style="display: none;">
        <!-- HEADER / ACTION BAR -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8">
          <div>
            <h1 class="text-2xl font-semibold text-white tracking-tight flex items-center gap-2">
              <span>Bookings</span>
              <span class="text-[11px] font-medium bg-[#1a1a1a] border border-[#333] text-[#D4AF37] px-2 py-0.5 rounded-full leading-none uppercase">
                Professional
              </span>
            </h1>
            <p class="text-sm text-gray-400 mt-1">
              Manage, take payment, and sync bookings automatically to your calendar.
            </p>
          </div>

          <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
            <!-- Search -->
            <div class="relative">
              <input
                id="bookingSearchInputPro"
                type="text"
                class="w-full sm:w-64 bg-[#1a1a1a] border border-[#333] text-white text-sm rounded-lg pl-9 pr-3 py-2.5 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-[#D4AF37] focus:border-[#D4AF37]"
                placeholder="Search by client, service..."
              />
              <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-xs">
                üîç
              </span>
            </div>

            <!-- Add Booking button -->
            <button
              onclick="openNewBookingModalPro()"
              class="whitespace-nowrap inline-flex items-center justify-center rounded-lg text-sm font-medium bg-[#D4AF37] text-black px-4 py-2.5 hover:opacity-90 transition"
            >
              + Add Booking
            </button>

            <!-- Sync Calendar button -->
            <button
              onclick="openCalendarConnectModal()"
              class="whitespace-nowrap inline-flex items-center justify-center rounded-lg text-sm font-medium bg-[#1a1a1a] border border-[#333] text-white px-4 py-2.5 hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
            >
              üóì Sync Calendar
            </button>
          </div>
        </div>

        <!-- STATS CARDS -->
        <div class="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8">

          <!-- Total Revenue (Stripe) -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <div class="flex items-start justify-between">
              <p class="text-[11px] uppercase text-gray-400 tracking-wide">
                Revenue (Oct)
              </p>
              <span id="stripeStatusPill"
                class="text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border border-[#333] bg-[#1a1a1a] text-gray-400">
                Stripe: Not Connected
              </span>
            </div>
            <div class="flex items-end justify-between mt-2">
              <span id="statRevenue" class="text-2xl font-semibold text-white">¬£0</span>
              <span class="text-[11px] text-[#D4AF37] leading-none">+ via Stripe</span>
            </div>
          </div>

          <!-- Bookings Today -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Bookings Today</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statTodayBookingsPro" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">
                <span id="todayLabelPro"></span>
              </span>
            </div>
          </div>

          <!-- Pending / Upcoming -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Pending / Upcoming</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statPendingPro" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">Awaiting confirm</span>
            </div>
          </div>

          <!-- Cancelled / No-Show -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <p class="text-[11px] uppercase text-gray-400 tracking-wide">Cancelled / No-Show</p>
            <div class="flex items-end justify-between mt-2">
              <span id="statCancelledPro" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">This month</span>
            </div>
          </div>

          <!-- Synced to Calendar -->
          <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4">
            <div class="flex items-start justify-between">
              <p class="text-[11px] uppercase text-gray-400 tracking-wide">Calendar Sync</p>
              <span id="calendarStatusPill"
                class="text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border border-[#333] bg-[#1a1a1a] text-gray-400">
                Not Connected
              </span>
            </div>
            <div class="flex items-end justify-between mt-2">
              <span id="statSynced" class="text-2xl font-semibold text-white">0</span>
              <span class="text-[11px] text-gray-400 leading-none">Synced events</span>
            </div>
          </div>
        </div>

        <!-- FILTERS + MAIN GRID -->
        <div class="grid grid-cols-1 xl:grid-cols-12 gap-6">

          <!-- LEFT COLUMN = TABLE + FILTERS -->
          <div class="xl:col-span-8 flex flex-col gap-6">

            <!-- Filters Card -->
            <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
              <div class="flex flex-col sm:flex-row gap-4 flex-1">
                <!-- Status filter -->
                <div class="flex-1 min-w-[140px]">
                  <label class="text-[11px] text-gray-500 uppercase tracking-wide mb-1 block">Status</label>
                  <select
                    id="filterStatusPro"
                    class="w-full bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-[12px] text-white focus:outline-none focus:ring-1 focus:ring-[#D4AF37]"
                  >
                    <option value="all">All</option>
                    <option value="Pending">Pending</option>
                    <option value="Confirmed">Confirmed</option>
                    <option value="Cancelled">Cancelled</option>
                  </select>
                </div>

                <!-- Date filter -->
                <div class="flex-1 min-w-[140px]">
                  <label class="text-[11px] text-gray-500 uppercase tracking-wide mb-1 block">Date</label>
                  <input
                    id="filterDatePro"
                    type="date"
                    class="w-full bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-[12px] text-white focus:outline-none focus:ring-1 focus:ring-[#D4AF37]"
                  />
                </div>
              </div>

              <div class="text-[10px] text-gray-500 flex flex-wrap items-center gap-2">
                <span class="hidden sm:inline text-gray-400">Legend:</span>
                <span class="flex items-center gap-1">
                  <span class="w-2 h-2 rounded-full bg-[#D4AF37]"></span><span>Confirmed</span>
                </span>
                <span class="flex items-center gap-1">
                  <span class="w-2 h-2 rounded-full bg-[#444]"></span><span>Pending</span>
                </span>
                <span class="flex items-center gap-1">
                  <span class="w-2 h-2 rounded-full bg-[#7a1f1f]"></span><span>Cancelled</span>
                </span>
              </div>
            </div>

            <!-- BOOKINGS TABLE CARD -->
            <div class="bg-[#111] border border-[#2a2a2a] rounded-xl overflow-hidden">
              <!-- table header -->
              <div class="flex flex-col md:flex-row md:items-center md:justify-between p-4 border-b border-[#2a2a2a]">
            <div>
                  <h2 class="text-sm font-medium text-white">All Bookings</h2>
                  <p class="text-[11px] text-gray-500">Live list of upcoming and recent bookings</p>
                </div>
                <div class="text-[11px] text-gray-500 mt-3 md:mt-0">
                  <span id="tableCountPro">0</span> total
                </div>
              </div>

              <!-- table -->
              <div class="overflow-x-auto">
                <table class="w-full text-left text-[12px] text-gray-300 min-w-[900px]">
                  <thead class="uppercase text-[10px] text-gray-500 bg-[#1a1a1a] border-b border-[#2a2a2a]">
                    <tr>
                      <th class="px-4 py-3 font-medium">Date</th>
                      <th class="px-4 py-3 font-medium">Time</th>
                      <th class="px-4 py-3 font-medium">Client</th>
                      <th class="px-4 py-3 font-medium">Service</th>
                      <th class="px-4 py-3 font-medium">Staff</th>
                      <th class="px-4 py-3 font-medium">Status</th>
                      <th class="px-4 py-3 font-medium">Payment</th>
                      <th class="px-4 py-3 font-medium">Calendar</th>
                      <th class="px-4 py-3 font-medium text-right">Actions</th>
                    </tr>
                  </thead>

                  <tbody id="bookingsTableBodyPro" class="divide-y divide-[#1f1f1f]">
                    <!-- rows injected by JS -->
                  </tbody>
                </table>
              </div>
            </div>

          </div>

          <!-- RIGHT COLUMN = STRIPE / CAL SYNC / ANALYTICS -->
          <aside class="xl:col-span-4 flex flex-col gap-6">

            <!-- STRIPE PANEL -->
            <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4 flex flex-col gap-4">
              <div class="flex items-start justify-between">
                <div>
                  <h3 class="text-sm font-medium text-white flex items-center gap-2">
                    <span>Stripe Payments</span>
                    <span id="stripeConnectedBadge"
                      class="text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border border-[#333] bg-[#1a1a1a] text-gray-400">
                      Not Connected
                    </span>
                  </h3>
                  <p class="text-[11px] text-gray-500 leading-snug">
                    Take deposits and card payments directly from clients.
                  </p>
                </div>
                <button
                  id="connectStripeBtn"
                  onclick="toggleStripeConnection()"
                  class="text-[11px] font-medium bg-[#D4AF37] text-black rounded-lg px-3 py-1.5 hover:opacity-90 transition"
                >
                  Connect Stripe
                </button>
              </div>

            <div>
                <p class="text-[11px] text-gray-400 uppercase mb-2 tracking-wide">
                  Recent Payments
                </p>
                <div id="recentPaymentsList" class="space-y-3 text-[12px]">
                  <!-- payments injected here -->
                </div>
              </div>

              <button
                onclick="alert('Open full payout/transactions view')"
                class="w-full text-[12px] font-medium bg-[#1a1a1a] border border-[#333] text-white rounded-lg px-3 py-2 hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
              >
                View All Payments ‚Üí
              </button>
            </div>

            <!-- CALENDAR SYNC PANEL -->
            <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4 flex flex-col gap-4">
              <div class="flex items-start justify-between">
            <div>
                  <h3 class="text-sm font-medium text-white flex items-center gap-2">
                    <span>Calendar Sync</span>
                    <span id="calendarConnectedBadge"
                      class="text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border border-[#333] bg-[#1a1a1a] text-gray-400">
                      Not Connected
                    </span>
                  </h3>
                  <p class="text-[11px] text-gray-500 leading-snug">
                    Push bookings to Google Calendar / iCal automatically.
                  </p>
                  <p id="nextSyncLabel" class="text-[11px] text-gray-600 leading-snug mt-1">
                    Next sync: ‚Äî
                  </p>
                </div>
                <button
                  id="connectCalendarBtn"
                  onclick="toggleCalendarConnection()"
                  class="text-[11px] font-medium bg-[#1a1a1a] border border-[#333] text-white rounded-lg px-3 py-1.5 hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
                >
                  Connect Calendar
                </button>
              </div>

              <button
                onclick="syncAllBookingsToCalendar()"
                class="text-[12px] font-medium bg-[#D4AF37] text-black rounded-lg px-3 py-2 hover:opacity-90 transition"
              >
                Sync Now
              </button>
            </div>

            <!-- ANALYTICS SUMMARY PANEL -->
            <div class="bg-[#111] border border-[#2a2a2a] rounded-xl p-4 flex flex-col gap-4">
              <div>
                <h3 class="text-sm font-medium text-white">Quick Insights</h3>
                <p class="text-[11px] text-gray-500 leading-snug">
                  Snapshot of what's working best this month.
                </p>
              </div>

              <ul class="text-[12px] text-gray-300 space-y-3">
                <li class="bg-[#1a1a1a] border border-[#333] rounded-lg p-3">
                  <div class="flex items-start justify-between">
                    <div>
                      <p class="text-white font-medium leading-tight text-[12px]">Top Service</p>
                      <p id="insightTopService" class="text-gray-400 leading-tight text-[11px]">
                        Silk Press ‚Äî 28 bookings
                      </p>
                    </div>
                    <span class="text-[10px] text-[#D4AF37] font-medium bg-[#1a1a1a] border border-[#333] rounded px-2 py-0.5 leading-none">
                      Popular
                    </span>
                  </div>
                </li>

                <li class="bg-[#1a1a1a] border border-[#333] rounded-lg p-3">
                  <p class="text-white font-medium leading-tight text-[12px]">Busiest Day</p>
                  <p id="insightBusiestDay" class="text-gray-400 leading-tight text-[11px]">
                    Saturday ‚Äî 12 bookings
                  </p>
                </li>

                <li class="bg-[#1a1a1a] border border-[#333] rounded-lg p-3">
                  <p class="text-white font-medium leading-tight text-[12px]">Avg Booking Value</p>
                  <p id="insightAvgValue" class="text-gray-400 leading-tight text-[11px]">
                    ¬£52.30
                  </p>
                </li>
              </ul>

              <button
                onclick="alert('Go to full analytics dashboard')"
                class="w-full text-[12px] font-medium bg-[#1a1a1a] border border-[#333] text-white rounded-lg px-3 py-2 hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
              >
                View Full Analytics ‚Üí
              </button>
            </div>

          </aside>
        </div>

        <!-- FOOTER LINK -->
        <div class="text-[12px] text-gray-400 text-center mt-8">
          <button
            class="underline hover:text-[#D4AF37] transition"
            onclick="alert('Open Booking Settings: hours, deposits, cancellation rules, etc.')"
          >
            Configure hours, deposits, cancellation rules ‚Üí
          </button>
        </div>
      </section>

      <!-- ======================== -->
      <!-- ADD BOOKING MODAL        -->
      <!-- ======================== -->
      <div
        id="newBookingModal"
        class="fixed inset-0 z-[999] hidden items-center justify-center bg-black/70 p-4"
      >
        <div class="bg-[#0F0F0F] border border-[#2a2a2a] rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto p-6 text-[13px]">
          <div class="flex items-start justify-between mb-4">
            <div>
              <h2 class="text-white text-base font-semibold">Add New Booking</h2>
              <p class="text-[11px] text-gray-500">Manual booking entry for walk-ins / phone calls</p>
            </div>
            <button
              onclick="closeNewBookingModal()"
              class="text-gray-500 hover:text-white text-sm"
            >‚úï</button>
          </div>

          <div class="space-y-4 text-[13px]">
            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Client Name *</label>
              <input id="newClient" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Sarah Jones" />
            </div>

            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Contact (Phone or Email) *</label>
              <input id="newContact" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. 07700 123456" />
            </div>

            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Service *</label>
              <input id="newService" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Silk Press" />
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Date *</label>
                <input id="newDate" type="date" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" />
              </div>
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Time *</label>
                <input id="newTime" type="time" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" />
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Staff *</label>
                <input id="newStaff" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Tasha" />
              </div>

              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Price (¬£)*</label>
                <input id="newPrice" type="number" min="0" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="45" />
              </div>
            </div>

            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Status *</label>
              <select id="newStatus" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]">
                <option>Pending</option>
                <option>Confirmed</option>
                <option>Cancelled</option>
              </select>
            </div>

            <div class="flex gap-3 pt-4">
              <button
                onclick="saveNewBooking()"
                class="flex-1 inline-flex items-center justify-center bg-[#D4AF37] text-black text-sm font-medium px-4 py-2.5 rounded-lg hover:opacity-90 transition"
              >
                Save Booking
              </button>
              <button
                onclick="closeNewBookingModal()"
                class="flex-1 inline-flex items-center justify-center bg-[#1a1a1a] border border-[#333] text-white text-sm font-medium px-4 py-2.5 rounded-lg hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================== -->
      <!-- BOOKINGS JAVASCRIPT     -->
      <!-- ======================== -->
      <script>
        // -----------------------------
        // 1. MOCK DATA
        // -----------------------------
        const todayISO = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
        const readableToday = new Date().toLocaleDateString('en-GB', {
          weekday: 'short', day: 'numeric', month: 'short', year: 'numeric'
        });

        // This array simulates bookings pulled from backend
        // status can be 'Pending' | 'Confirmed' | 'Cancelled'
        let bookings = [
          {
            date: todayISO, // today
            time: '09:00',
            client: 'Sarah Jones',
            service: 'Silk Press',
            staff: 'Tasha',
            status: 'Pending',
            price: 45
          },
          {
            date: todayISO, // today
            time: '09:00',
            client: 'Amira Patel',
            service: 'Full Set Gel Nails',
            staff: 'Rae',
            status: 'Confirmed',
            price: 32
          },
          {
            date: todayISO, // today
            time: '11:30',
            client: 'Leah Mensah',
            service: 'Knotless Braids (Mid Back)',
            staff: 'Tasha',
            status: 'Confirmed',
            price: 85
          },
          {
            date: '2025-10-31',
            time: '09:00',
            client: 'Michael K',
            service: 'Beard Trim',
            staff: 'Jay',
            status: 'Cancelled',
            price: 15
          }
        ];

        // -----------------------------
        // 2. RENDER HELPERS
        // -----------------------------

        function renderStatusBadge(status){
          if(status === 'Confirmed'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-black bg-[#D4AF37] rounded px-2 py-1 border border-[#D4AF37]">
                <span class="w-1.5 h-1.5 rounded-full bg-black"></span>
                ${status}
              </span>
            `;
          }
          if(status === 'Pending'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-[#444] bg-[#2a2a2a] rounded px-2 py-1 border border-[#444]">
                <span class="w-1.5 h-1.5 rounded-full bg-[#444]"></span>
                ${status}
              </span>
            `;
          }
          // Cancelled
          return `
            <span class="inline-flex items-center gap-1 text-[11px] font-medium text-red-500 bg-[#1a0f0f] rounded px-2 py-1 border border-[#7a1f1f]">
              <span class="w-1.5 h-1.5 rounded-full bg-[#7a1f1f]"></span>
              ${status}
            </span>
          `;
        }

        function actionButtonsHTML(index, status){
          // if cancelled, maybe only "Reinstate"? For now allow all.
          return `
            <div class="flex flex-col items-end gap-1">
              <button class="text-[#D4AF37] hover:underline text-[12px]" onclick="confirmBooking(${index})">Confirm</button>
              <button class="text-[12px] text-gray-300 hover:underline" onclick="cancelBooking(${index})">Cancel</button>
              <button class="text-[12px] text-gray-500 hover:underline" onclick="alert('Reschedule flow for ${bookings[index].client}')">Reschedule</button>
            </div>
          `;
        }

        // Convert YYYY-MM-DD to e.g. "28 Oct 2025"
        function prettyDate(iso){
          const d = new Date(iso + 'T00:00:00');
          return d.toLocaleDateString('en-GB', {
            day: '2-digit',
            month: 'short',
            year: 'numeric'
          });
        }

        // -----------------------------
        // 3. RENDER TABLE + STATS
        // -----------------------------
        function renderTable(){
          const tbody = document.getElementById('bookingsTableBody');
          tbody.innerHTML = '';

          const searchVal = document.getElementById('bookingSearchInput').value.toLowerCase().trim();
          const statusFilter = document.getElementById('filterStatus').value;
          const dateFilter = document.getElementById('filterDate').value; // "" or "YYYY-MM-DD"

          const filtered = bookings.filter((b)=> {
            // search match
            const sMatch =
              b.client.toLowerCase().includes(searchVal) ||
              b.service.toLowerCase().includes(searchVal);

            if(!sMatch) return false;

            // status match
            if(statusFilter !== 'all' && b.status !== statusFilter) return false;

            // date match (optional)
            if(dateFilter && b.date !== dateFilter) return false;

            return true;
          });

          // inject rows
          filtered.forEach((b, index)=>{
            const rowHTML = `
              <tr class="hover:bg-[#1a1a1a]/60 transition">
                <td class="px-4 py-3 text-white">${prettyDate(b.date)}</td>
                <td class="px-4 py-3 text-white">${b.time}</td>
                <td class="px-4 py-3 text-white font-medium">${b.client}</td>
                <td class="px-4 py-3 text-gray-300">${b.service}</td>
                <td class="px-4 py-3 text-gray-300">${b.staff}</td>
                <td class="px-4 py-3">${renderStatusBadge(b.status)}</td>
                <td class="px-4 py-3 text-white font-medium">¬£${b.price}</td>
                <td class="px-4 py-3 text-right">
                  ${actionButtonsHTML(index, b.status)}
                </td>
              </tr>
            `;
            tbody.insertAdjacentHTML('beforeend', rowHTML);
          });

          // update stats after render
          updateStats(filtered.length);
        }

        function updateStats(currentTableCount){
          // total bookings (just array length)
          document.getElementById('statTotalBookings').textContent = bookings.length;

          // pending
          const pendingCount = bookings.filter(b=> b.status === 'Pending').length;
          document.getElementById('statPending').textContent = pendingCount;

          // cancelled
          const cancelledCount = bookings.filter(b=> b.status === 'Cancelled').length;
          document.getElementById('statCancelled').textContent = cancelledCount;

          // today count
          const todayCount = bookings.filter(b=> b.date === todayISO).length;
          document.getElementById('statTodayBookings').textContent = todayCount;
          document.getElementById('todayLabel').textContent = readableToday;

          // table row count (after filters)
          document.getElementById('tableCount').textContent = currentTableCount;
        }

        // -----------------------------
        // 4. BUTTON ACTIONS
        // -----------------------------
        function confirmBooking(i){
          bookings[i].status = 'Confirmed';
          renderTable();
        }
        function cancelBooking(i){
          bookings[i].status = 'Cancelled';
          renderTable();
        }

        // -----------------------------
        // 5. ADD BOOKING MODAL LOGIC
        // -----------------------------
        const newBookingModal = document.getElementById('newBookingModal');

        function openNewBookingModal() {
          newBookingModal.classList.remove('hidden');
          newBookingModal.classList.add('flex');
        }
        function closeNewBookingModal() {
          newBookingModal.classList.add('hidden');
          newBookingModal.classList.remove('flex');
        }

        function saveNewBooking(){
          const client = document.getElementById('newClient').value.trim();
          const contact = document.getElementById('newContact').value.trim(); // not used yet but would be saved backend
          const service = document.getElementById('newService').value.trim();
          const date = document.getElementById('newDate').value;
          const time = document.getElementById('newTime').value;
          const staff = document.getElementById('newStaff').value.trim();
          const price = parseFloat(document.getElementById('newPrice').value || '0');
          const status = document.getElementById('newStatus').value;

          if(!client || !contact || !service || !date || !time || !staff || !price || !status){
            alert('Please fill all required fields.');
            return;
          }

          bookings.push({
            date,
            time,
            client,
            service,
            staff,
            status,
            price
          });

          closeNewBookingModal();
          clearNewBookingForm();
          renderTable();
        }

        function clearNewBookingForm(){
          document.getElementById('newClient').value = '';
          document.getElementById('newContact').value = '';
          document.getElementById('newService').value = '';
          document.getElementById('newDate').value = '';
          document.getElementById('newTime').value = '';
          document.getElementById('newStaff').value = '';
          document.getElementById('newPrice').value = '';
          document.getElementById('newStatus').value = 'Pending';
        }

        // -----------------------------
        // 6. INIT + EVENT LISTENERS
        // -----------------------------
        function initBookingsUI(){
          // hook up listeners
          document.getElementById('bookingSearchInput').addEventListener('input', renderTable);
          document.getElementById('filterStatus').addEventListener('change', renderTable);
          document.getElementById('filterDate').addEventListener('change', renderTable);

          renderTable();
        }

        // Initialize when bookings section is shown
        document.addEventListener('DOMContentLoaded', function() {
          // Check if we're on the bookings section and initialize
          const bookingsSection = document.getElementById('bookings');
          if (bookingsSection && !bookingsSection.classList.contains('hidden')) {
            initBookingsUI();
          }
        });

        // Also initialize when section becomes visible
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
              const bookingsSection = document.getElementById('bookings');
              if (bookingsSection && !bookingsSection.classList.contains('hidden')) {
                initBookingsUI();
              }
            }
          });
        });

        // Start observing
        const bookingsSection = document.getElementById('bookings');
        if (bookingsSection) {
          observer.observe(bookingsSection, { attributes: true });
        }
      </script>

      <!-- ======================== -->
      <!-- ADD BOOKING MODAL PRO    -->
      <!-- ======================== -->
      <div
        id="newBookingModalPro"
        class="fixed inset-0 z-[999] hidden items-center justify-center bg-black/70 p-4"
      >
        <div class="bg-[#0F0F0F] border border-[#2a2a2a] rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto p-6 text-[13px]">
          <div class="flex items-start justify-between mb-4">
            <div>
              <h2 class="text-white text-base font-semibold">Add New Booking</h2>
              <p class="text-[11px] text-gray-500">Take a booking or walk-in and assign staff.</p>
            </div>
            <button
              onclick="closeNewBookingModalPro()"
              class="text-gray-500 hover:text-white text-sm"
            >‚úï</button>
                </div>

          <div class="space-y-4 text-[13px]">
            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Client Name *</label>
              <input id="newClientPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Sarah Jones" />
                    </div>
                    
            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Contact (Phone or Email) *</label>
              <input id="newContactPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. 07700 123456" />
                    </div>
                    
            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Service *</label>
              <input id="newServicePro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Silk Press" />
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Date *</label>
                <input id="newDatePro" type="date" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" />
              </div>
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Time *</label>
                <input id="newTimePro" type="time" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" />
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Staff *</label>
                <input id="newStaffPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="e.g. Tasha" />
              </div>

              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Price (¬£)*</label>
                <input id="newPricePro" type="number" min="0" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]" placeholder="45" />
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Status *</label>
                <select id="newStatusPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]">
                  <option>Pending</option>
                  <option>Confirmed</option>
                  <option>Cancelled</option>
                </select>
              </div>

              <div class="flex-1 flex flex-col">
                <label class="text-[11px] text-gray-400 uppercase mb-1">Payment Method</label>
                <select id="newPaymentMethodPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]">
                  <option>Cash</option>
                  <option>Card via Stripe</option>
                </select>
              </div>
            </div>

            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Require Deposit?</label>
              <select id="newDepositRequiredPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]">
                <option>No deposit</option>
                <option>Deposit required</option>
              </select>
            </div>

            <div class="flex flex-col">
              <label class="text-[11px] text-gray-400 uppercase mb-1">Sync to Calendar?</label>
              <select id="newCalendarSyncPro" class="bg-[#1a1a1a] border border-[#333] rounded-lg px-3 py-2 text-white text-[13px] focus:outline-none focus:ring-1 focus:ring-[#D4AF37]">
                <option>Yes - add event</option>
                <option>No - don't sync</option>
              </select>
            </div>

            <div class="flex gap-3 pt-4">
              <button
                onclick="saveNewBookingPro()"
                class="flex-1 inline-flex items-center justify-center bg-[#D4AF37] text-black text-sm font-medium px-4 py-2.5 rounded-lg hover:opacity-90 transition"
              >
                Save Booking
                        </button>
              <button
                onclick="closeNewBookingModalPro()"
                class="flex-1 inline-flex items-center justify-center bg-[#1a1a1a] border border-[#333] text-white text-sm font-medium px-4 py-2.5 rounded-lg hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
              >
                Cancel
              </button>
            </div>
          </div>
                        </div>
                    </div>
                    
      <!-- ======================== -->
      <!-- CALENDAR CONNECT MODAL   -->
      <!-- ======================== -->
      <div
        id="calendarConnectModal"
        class="fixed inset-0 z-[999] hidden items-center justify-center bg-black/70 p-4"
      >
        <div class="bg-[#0F0F0F] border border-[#2a2a2a] rounded-xl w-full max-w-sm max-h-[90vh] overflow-y-auto p-6 text-[13px]">
          <div class="flex items-start justify-between mb-4">
            <div>
              <h2 class="text-white text-base font-semibold">Connect Calendar</h2>
              <p class="text-[11px] text-gray-500">Sync bookings with Google Calendar or iCal.</p>
            </div>
            <button
              onclick="closeCalendarConnectModal()"
              class="text-gray-500 hover:text-white text-sm"
            >‚úï</button>
                </div>

          <div class="space-y-4 text-[13px]">
            <button
              onclick="connectCalendarProvider('Google Calendar')"
              class="w-full flex items-center justify-between bg-[#1a1a1a] border border-[#333] rounded-lg px-4 py-3 text-white hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
            >
              <span class="text-sm font-medium">Google Calendar</span>
              <span class="text-[11px] text-gray-500">Connect ‚Üí</span>
            </button>

            <button
              onclick="connectCalendarProvider('Apple iCal')"
              class="w-full flex items-center justify-between bg-[#1a1a1a] border border-[#333] rounded-lg px-4 py-3 text-white hover:border-[#D4AF37] hover:text-[#D4AF37] transition"
            >
              <span class="text-sm font-medium">Apple iCal</span>
              <span class="text-[11px] text-gray-500">Connect ‚Üí</span>
                    </button>
                </div>

          <div class="pt-6 text-[11px] text-gray-500 leading-relaxed">
            Once connected, all upcoming bookings will automatically appear in your calendar. You can also push updates on demand using "Sync Now".
            </div>

          <div class="pt-6">
            <button
              onclick="finaliseCalendarConnection()"
              class="w-full inline-flex items-center justify-center bg-[#D4AF37] text-black text-sm font-medium px-4 py-2.5 rounded-lg hover:opacity-90 transition"
            >
              Finish & Enable Sync
            </button>
            </div>
        </div>
      </div>

      <!-- ======================== -->
      <!-- PROFESSIONAL BOOKINGS JS -->
      <!-- ======================== -->
      <script>
        // ========= 1. STATE =========
        const todayISOPro = new Date().toISOString().split('T')[0];
        const readableTodayPro = new Date().toLocaleDateString('en-GB', {
          weekday: 'short', day: 'numeric', month: 'short', year: 'numeric'
        });

        // bookings array for Professional plan
        let bookingsPro = [
          {
            date: todayISOPro,
            time: '09:00',
            client: 'Sarah Jones',
            service: 'Silk Press',
            staff: 'Tasha',
            status: 'Pending',
            paymentStatus: 'Unpaid',
            calendarStatus: 'Not Synced',
            price: 45
          },
          {
            date: todayISOPro,
            time: '09:00',
            client: 'Amira Patel',
            service: 'Full Set Gel Nails',
            staff: 'Rae',
            status: 'Confirmed',
            paymentStatus: 'Paid',
            calendarStatus: 'Synced',
            price: 32
          },
          {
            date: todayISOPro,
            time: '11:30',
            client: 'Leah Mensah',
            service: 'Knotless Braids (Mid Back)',
            staff: 'Tasha',
            status: 'Confirmed',
            paymentStatus: 'Paid',
            calendarStatus: 'Synced',
            price: 85
          },
          {
            date: '2025-10-31',
            time: '09:00',
            client: 'Michael K',
            service: 'Beard Trim',
            staff: 'Jay',
            status: 'Cancelled',
            paymentStatus: 'Unpaid',
            calendarStatus: 'Not Synced',
            price: 15
          }
        ];

        // Stripe + calendar connection flags
        let stripeConnected = false;
        let calendarConnected = false;
        let chosenCalendarProvider = null;
        let nextSyncTime = null;

        // recent payments (mock Stripe history)
        let payments = [
          { amount: 32, client: 'Amira Patel', service: 'Full Set Gel Nails', when: 'Today 09:00' },
          { amount: 85, client: 'Leah Mensah', service: 'Knotless Braids', when: 'Today 11:30' }
        ];

        // ========= 2. DOM HELPERS =========
        function prettyDatePro(iso){
          const d = new Date(iso + 'T00:00:00');
          return d.toLocaleDateString('en-GB', {
            day: '2-digit',
            month: 'short',
            year: 'numeric'
          });
        }

        function renderStatusBadgePro(status){
          if(status === 'Confirmed'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-black bg-[#D4AF37] rounded px-2 py-1 border border-[#D4AF37]">
                <span class="w-1.5 h-1.5 rounded-full bg-black"></span>
                ${status}
              </span>
            `;
          }
          if(status === 'Pending'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-[#444] bg-[#2a2a2a] rounded px-2 py-1 border border-[#444]">
                <span class="w-1.5 h-1.5 rounded-full bg-[#444]"></span>
                ${status}
              </span>
            `;
          }
          return `
            <span class="inline-flex items-center gap-1 text-[11px] font-medium text-red-500 bg-[#1a0f0f] rounded px-2 py-1 border border-[#7a1f1f]">
              <span class="w-1.5 h-1.5 rounded-full bg-[#7a1f1f]"></span>
              ${status}
            </span>
          `;
        }

        function renderPaymentBadge(paymentStatus){
          if(paymentStatus === 'Paid'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-black bg-[#D4AF37] rounded px-2 py-1 border border-[#D4AF37]">
                <span class="w-1.5 h-1.5 rounded-full bg-black"></span>
                Paid
              </span>
            `;
          }
          return `
            <span class="inline-flex items-center gap-1 text-[11px] font-medium text-[#999] bg-[#2a2a2a] rounded px-2 py-1 border border-[#444]">
              <span class="w-1.5 h-1.5 rounded-full bg-[#444]"></span>
              Unpaid
            </span>
          `;
        }

        function renderCalendarBadge(calendarStatus){
          if(calendarStatus === 'Synced'){
            return `
              <span class="inline-flex items-center gap-1 text-[11px] font-medium text-black bg-[#D4AF37] rounded px-2 py-1 border border-[#D4AF37]">
                <span class="w-1.5 h-1.5 rounded-full bg-black"></span>
                Synced
              </span>
            `;
          }
          return `
            <span class="inline-flex items-center gap-1 text-[11px] font-medium text-[#999] bg-[#2a2a2a] rounded px-2 py-1 border border-[#444]">
              <span class="w-1.5 h-1.5 rounded-full bg-[#444]"></span>
              Not Synced
            </span>
          `;
        }

        function actionButtonsHTMLPro(i){
          return `
            <div class="flex flex-col items-end gap-1">
              <button class="text-[#D4AF37] hover:underline text-[12px]" onclick="confirmBookingPro(${i})">Confirm</button>
              <button class="text-[12px] text-gray-300 hover:underline" onclick="cancelBookingPro(${i})">Cancel</button>
              <button class="text-[12px] text-gray-300 hover:underline" onclick="markPaidPro(${i})">Mark Paid</button>
              <button class="text-[12px] text-gray-500 hover:underline" onclick="syncSingleBookingPro(${i})">Sync</button>
        </div>
          `;
        }

        // ========= 3. RENDER TABLE + STATS + SIDEBAR =========
        function renderTablePro(){
          const tbody = document.getElementById('bookingsTableBodyPro');
          if (!tbody) return;
          tbody.innerHTML = '';

          const searchVal = (document.getElementById('bookingSearchInputPro')?.value || '').toLowerCase().trim();
          const statusFilter = document.getElementById('filterStatusPro')?.value || 'all';
          const dateFilter = document.getElementById('filterDatePro')?.value || '';

          const filtered = bookingsPro.filter((b)=> {
            const matchesSearch =
              b.client.toLowerCase().includes(searchVal) ||
              b.service.toLowerCase().includes(searchVal);

            if(!matchesSearch) return false;
            if(statusFilter !== 'all' && b.status !== statusFilter) return false;
            if(dateFilter && b.date !== dateFilter) return false;
            return true;
          });

          filtered.forEach((b, i)=>{
            const rowHTML = `
              <tr class="hover:bg-[#1a1a1a]/60 transition">
                <td class="px-4 py-3 text-white">${prettyDatePro(b.date)}</td>
                <td class="px-4 py-3 text-white">${b.time}</td>
                <td class="px-4 py-3 text-white font-medium">${b.client}</td>
                <td class="px-4 py-3 text-gray-300">${b.service}</td>
                <td class="px-4 py-3 text-gray-300">${b.staff}</td>
                <td class="px-4 py-3">${renderStatusBadgePro(b.status)}</td>
                <td class="px-4 py-3">${renderPaymentBadge(b.paymentStatus)}</td>
                <td class="px-4 py-3">${renderCalendarBadge(b.calendarStatus)}</td>
                <td class="px-4 py-3 text-right">
                  ${actionButtonsHTMLPro(i)}
                </td>
              </tr>
            `;
            tbody.insertAdjacentHTML('beforeend', rowHTML);
          });

          updateStatsPro(filtered.length);
          renderSidebarPayments();
          renderCalendarPanel();
        }

        function updateStatsPro(currentTableCount){
          // revenue = sum of price where paymentStatus === 'Paid'
          const revenue = bookingsPro.reduce((sum, b)=>{
            return b.paymentStatus === 'Paid' ? sum + b.price : sum;
          }, 0);

          const pendingCount = bookingsPro.filter(b=> b.status === 'Pending').length;
          const cancelledCount = bookingsPro.filter(b=> b.status === 'Cancelled').length;
          const todayCount = bookingsPro.filter(b=> b.date === todayISOPro).length;
          const syncedCount = bookingsPro.filter(b=> b.calendarStatus === 'Synced').length;

          const revEl = document.getElementById('statRevenue');
          const pendEl = document.getElementById('statPendingPro');
          const cancEl = document.getElementById('statCancelledPro');
          const todayEl = document.getElementById('statTodayBookingsPro');
          const todayLabelEl = document.getElementById('todayLabelPro');
          const syncEl = document.getElementById('statSynced');
          const countEl = document.getElementById('tableCountPro');

          if(revEl) revEl.textContent = '¬£' + revenue;
          if(pendEl) pendEl.textContent = pendingCount;
          if(cancEl) cancEl.textContent = cancelledCount;
          if(todayEl) todayEl.textContent = todayCount;
          if(todayLabelEl) todayLabelEl.textContent = readableTodayPro;
          if(syncEl) syncEl.textContent = syncedCount;
          if(countEl) countEl.textContent = currentTableCount;
        }

        function renderSidebarPayments(){
          const wrap = document.getElementById('recentPaymentsList');
          if (!wrap) return;
          wrap.innerHTML = '';

          if (!payments.length){
            wrap.innerHTML = `
              <div class="text-[12px] text-gray-500">
                No Stripe payments yet.
              </div>`;
            return;
          }

          payments.slice(0,3).forEach(p => {
            const item = `
              <div class="bg-[#1a1a1a] border border-[#333] rounded-lg p-3">
                <div class="flex items-start justify-between">
            <div>
                    <div class="text-white font-medium leading-tight text-[12px]">
                      ¬£${p.amount.toFixed(2)}
            </div>
                    <div class="text-gray-400 leading-tight text-[11px]">
                      ${p.client} ‚Ä¢ ${p.service}
            </div>
                    <div class="text-[10px] text-gray-500 leading-tight">
                      ${p.when}
            </div>
                </div>
                  <span class="text-[10px] text-[#D4AF37] font-medium bg-[#1a1a1a] border border-[#333] rounded px-2 py-0.5 leading-none">
                    Paid
                  </span>
            </div>
        </div>
            `;
            wrap.insertAdjacentHTML('beforeend', item);
          });

          // Update Stripe badges
          const stripeBadge = document.getElementById('stripeConnectedBadge');
          const stripePill = document.getElementById('stripeStatusPill');
          const stripeBtn = document.getElementById('connectStripeBtn');

          if(stripeBadge){
            stripeBadge.textContent = stripeConnected ? 'Connected' : 'Not Connected';
            stripeBadge.className = 'text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border ' +
              (stripeConnected
                ? 'border-[#333] bg-[#1a1a1a] text-[#D4AF37]'
                : 'border-[#333] bg-[#1a1a1a] text-gray-400');
          }
          if(stripePill){
            stripePill.textContent = 'Stripe: ' + (stripeConnected ? 'Connected' : 'Not Connected');
            stripePill.className = 'text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border ' +
              (stripeConnected
                ? 'border-[#333] bg-[#1a1a1a] text-[#D4AF37]'
                : 'border-[#333] bg-[#1a1a1a] text-gray-400');
          }
          if(stripeBtn){
            stripeBtn.textContent = stripeConnected ? 'Connected ‚úÖ' : 'Connect Stripe';
          }
        }

        function renderCalendarPanel(){
          const badge = document.getElementById('calendarConnectedBadge');
          const pill = document.getElementById('calendarStatusPill');
          const label = document.getElementById('nextSyncLabel');
          const btn = document.getElementById('connectCalendarBtn');

          if(badge){
            badge.textContent = calendarConnected ? 'Synced' : 'Not Connected';
            badge.className = 'text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border ' +
              (calendarConnected
                ? 'border-[#333] bg-[#1a1a1a] text-[#D4AF37]'
                : 'border-[#333] bg-[#1a1a1a] text-gray-400');
          }
          if(pill){
            pill.textContent = calendarConnected ? 'Connected' : 'Not Connected';
            pill.className = 'text-[10px] font-medium px-2 py-0.5 rounded-full leading-none border ' +
              (calendarConnected
                ? 'border-[#333] bg-[#1a1a1a] text-[#D4AF37]'
                : 'border-[#333] bg-[#1a1a1a] text-gray-400');
          }
          if(label){
            if(calendarConnected && nextSyncTime){
              label.textContent = 'Next sync: ' + nextSyncTime;
              label.className = 'text-[11px] text-gray-400 leading-snug mt-1';
            } else if(calendarConnected){
              label.textContent = 'Next sync: Ready';
              label.className = 'text-[11px] text-gray-400 leading-snug mt-1';
            } else {
              label.textContent = 'Next sync: ‚Äî';
              label.className = 'text-[11px] text-gray-600 leading-snug mt-1';
            }
          }
          if(btn){
            btn.textContent = calendarConnected ? 'Connected ‚úÖ' : 'Connect Calendar';
          }
        }

        // ========= 4. CTA ACTIONS =========
        function confirmBookingPro(i){
          bookingsPro[i].status = 'Confirmed';
          renderTablePro();
        }

        function cancelBookingPro(i){
          bookingsPro[i].status = 'Cancelled';
          bookingsPro[i].calendarStatus = 'Not Synced';
          renderTablePro();
        }

        function markPaidPro(i){
          bookingsPro[i].paymentStatus = 'Paid';
          if(stripeConnected){
            payments.unshift({
              amount: bookingsPro[i].price,
              client: bookingsPro[i].client,
              service: bookingsPro[i].service,
              when: 'Now'
            });
          }
          renderTablePro();
        }

        function syncSingleBookingPro(i){
          if(!calendarConnected){
            alert('Connect your calendar first.');
            return;
          }
          if(bookingsPro[i].status === 'Cancelled'){
            alert('Cancelled bookings will not sync.');
            return;
          }
          bookingsPro[i].calendarStatus = 'Synced';
          nextSyncTime = 'Just now';
          renderTablePro();
        }

        function syncAllBookingsToCalendar(){
          if(!calendarConnected){
            alert('Connect your calendar first.');
            return;
          }
          bookingsPro = bookingsPro.map(b => {
            if(b.status !== 'Cancelled'){
              return { ...b, calendarStatus: 'Synced' };
            }
            return b;
          });
          nextSyncTime = 'Just now';
          renderTablePro();
        }

        function toggleStripeConnection(){
          stripeConnected = !stripeConnected;
          renderTablePro();
        }

        function toggleCalendarConnection(){
          openCalendarConnectModal();
        }

        // CALENDAR connect modal controls
        const calendarConnectModal = document.getElementById('calendarConnectModal');

        function openCalendarConnectModal() {
          if(calendarConnectModal){
            calendarConnectModal.classList.remove('hidden');
            calendarConnectModal.classList.add('flex');
          }
        }
        function closeCalendarConnectModal() {
          if(calendarConnectModal){
            calendarConnectModal.classList.add('hidden');
            calendarConnectModal.classList.remove('flex');
          }
        }

        function connectCalendarProvider(provider){
          chosenCalendarProvider = provider;
        }

        function finaliseCalendarConnection(){
          calendarConnected = true;
          nextSyncTime = 'Ready';
          closeCalendarConnectModal();
          renderTablePro();
        }

        // ADD BOOKING modal controls
        const newBookingModalPro = document.getElementById('newBookingModalPro');

        function openNewBookingModalPro() {
          if(newBookingModalPro){
            newBookingModalPro.classList.remove('hidden');
            newBookingModalPro.classList.add('flex');
          }
        }
        function closeNewBookingModalPro() {
          if(newBookingModalPro){
            newBookingModalPro.classList.add('hidden');
            newBookingModalPro.classList.remove('flex');
          }
        }

        function saveNewBookingPro(){
          const client = document.getElementById('newClientPro')?.value.trim();
          const contact = document.getElementById('newContactPro')?.value.trim();
          const service = document.getElementById('newServicePro')?.value.trim();
          const date = document.getElementById('newDatePro')?.value;
          const time = document.getElementById('newTimePro')?.value;
          const staff = document.getElementById('newStaffPro')?.value.trim();
          const price = parseFloat(document.getElementById('newPricePro')?.value || '0');
          const statusVal = document.getElementById('newStatusPro')?.value;
          const payMethod = document.getElementById('newPaymentMethodPro')?.value;
          const depositReq = document.getElementById('newDepositRequiredPro')?.value;
          const calSync = document.getElementById('newCalendarSyncPro')?.value;

          if(!client || !contact || !service || !date || !time || !staff || !price || !statusVal){
            alert('Please fill all required fields.');
            return;
          }

          bookingsPro.push({
            date,
            time,
            client,
            service,
            staff,
            status: statusVal,
            paymentStatus: (payMethod === 'Card via Stripe' ? 'Paid' : 'Unpaid'),
            calendarStatus: (calSync.startsWith('Yes') && statusVal !== 'Cancelled' && calendarConnected) ? 'Synced' : 'Not Synced',
            price
          });

          closeNewBookingModalPro();
          clearNewBookingFormPro();
          renderTablePro();
        }

        function clearNewBookingFormPro(){
          const fields = ['newClientPro', 'newContactPro', 'newServicePro', 'newDatePro', 'newTimePro', 'newStaffPro', 'newPricePro'];
          fields.forEach(id => {
            const el = document.getElementById(id);
            if(el) el.value = '';
          });
          const statusEl = document.getElementById('newStatusPro');
          const payMethodEl = document.getElementById('newPaymentMethodPro');
          const depositEl = document.getElementById('newDepositRequiredPro');
          const calSyncEl = document.getElementById('newCalendarSyncPro');
          if(statusEl) statusEl.value = 'Pending';
          if(payMethodEl) payMethodEl.value = 'Cash';
          if(depositEl) depositEl.value = 'No deposit';
          if(calSyncEl) calSyncEl.value = 'Yes - add event';
        }

        // ========= 5. INIT =========
        function initBookingsProUI(){
          const searchInput = document.getElementById('bookingSearchInputPro');
          const statusFilter = document.getElementById('filterStatusPro');
          const dateFilter = document.getElementById('filterDatePro');

          if(searchInput) searchInput.addEventListener('input', renderTablePro);
          if(statusFilter) statusFilter.addEventListener('change', renderTablePro);
          if(dateFilter) dateFilter.addEventListener('change', renderTablePro);

          const todayLabelEl = document.getElementById('todayLabelPro');
          if(todayLabelEl) todayLabelEl.textContent = readableTodayPro;

          renderTablePro();
        }

        // Initialize when Professional bookings section is shown
        document.addEventListener('DOMContentLoaded', function() {
          const bookingsProSection = document.getElementById('bookings-pro');
          if (bookingsProSection && bookingsProSection.style.display !== 'none') {
            initBookingsProUI();
          }
        });

        // Also initialize when section becomes visible
        const observerPro = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
              const bookingsProSection = document.getElementById('bookings-pro');
              if (bookingsProSection && bookingsProSection.style.display !== 'none') {
                initBookingsProUI();
              }
            }
          });
        });

        const bookingsProSection = document.getElementById('bookings-pro');
        if (bookingsProSection) {
          observerPro.observe(bookingsProSection, { attributes: true, attributeFilter: ['style'] });
        }
      </script>
        </div>

    <div id="reviews" class="section hidden fade">
      <div class="card">
        <h2 class="text-xl font-semibold mb-3">Customer Reviews</h2>
        <p class="text-sm text-[#D4AF37]/70">View and reply to customer feedback.</p>
      </div>
    </div>

    <div id="insights" class="section hidden fade">
      <div class="card">
        <h2 class="text-xl font-semibold mb-3">Insights</h2>
        <p class="text-sm text-[#D4AF37]/70">Track analytics, conversions, and performance trends.</p>
      </div>
    </div>

    <div id="profile" class="section hidden fade">
      <div class="card">
        <h2 class="text-xl font-semibold mb-3">Profile & Listing</h2>
        <p class="text-sm text-[#D4AF37]/70">Edit your business details and profile settings.</p>
      </div>
    </div>

    <div id="settings" class="section hidden fade">
      <div class="card">
        <h2 class="text-xl font-semibold mb-3">Settings</h2>
        <p class="text-sm text-[#D4AF37]/70">Configure payment models, policies, and integrations.</p>
      </div>
    </div>
  </main>

  <!-- Upgrade Modal -->
  <div id="upgradeModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
    <div class="bg-[#111] border border-[#D4AF37]/40 rounded-lg p-6 max-w-md w-full mx-4">
      <h2 class="text-xl font-bold text-[#D4AF37] mb-2">Upgrade your plan</h2>
      <p class="text-sm text-[#D4AF37]/80 mb-6">
        Unlock bookings, deposits, SMS reminders and full business insights.  
        You're a few steps away from running your business on autopilot.
      </p>
      <div class="flex flex-col gap-3">
        <button id="modalViewPlansBtn" class="bg-[#D4AF37] text-black px-4 py-2 font-semibold rounded-md hover:bg-yellow-500 transition">
          View Plans
        </button>
        <button id="closeModalBtn" class="text-[#D4AF37]/70 hover:text-[#D4AF37] font-semibold">
          Not now
        </button>
      </div>
    </div>
  </div>

  <!-- JavaScript for dynamic section switching and plan management -->
  <script>
    let currentPlan = "pro"; // Default plan
    
    document.addEventListener("DOMContentLoaded", () => {
      const links = document.querySelectorAll('.sidebar-link');
      const sections = document.querySelectorAll('.section');
      const planSwitcher = document.getElementById("planSwitcher");
      const planLabelEl = document.getElementById("planLabel");
      const dashboards = {
        free: document.getElementById("dash-free"),
        starter: document.getElementById("dash-starter"),
        pro: document.getElementById("dash-pro")
      };
      
      const allLockedElements = document.querySelectorAll("[data-lock]");
      const upgradeBtn = document.getElementById("upgradeBtn");
      const upgradeModal = document.getElementById("upgradeModal");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const modalViewPlansBtn = document.getElementById("modalViewPlansBtn");
      const upgradeTriggers = document.querySelectorAll("#upgradeBtn, [data-upgrade]");

      // Section switching
      links.forEach(link => {
        link.addEventListener('click', () => {
          // remove active
          links.forEach(l => l.classList.remove('active'));
          link.classList.add('active');

          // show corresponding section
          const target = link.dataset.section;
          sections.forEach(sec => {
            sec.classList.add('hidden');
            if (sec.id === target) sec.classList.remove('hidden');
          });

          // Initialize bookings UI if bookings section is shown
          if (target === 'bookings') {
            if (currentPlan === 'starter') {
              setTimeout(() => {
                if (typeof initBookingsUI === 'function') initBookingsUI();
              }, 100);
            } else if (currentPlan === 'pro') {
              setTimeout(() => {
                if (typeof initBookingsProUI === 'function') initBookingsProUI();
              }, 100);
            }
            // Free plan just shows the teaser, no initialization needed
          }
        });
      });

      function updateDashboardView(plan) {
        if (!dashboards[plan]) {
          plan = "free";
        }
        currentPlan = plan;
        
        // Update plan label
        const planLabelText = {
          free: "Plan: Free",
          starter: "Plan: Starter", 
          pro: "Plan: Professional",
        };
        if (planLabelEl) {
          planLabelEl.textContent = planLabelText[plan] || "Plan: ‚Äî";
        }

        // Show/hide bookings sections based on plan
        const bookingsFree = document.getElementById('bookings-free');
        const bookingsStarter = document.getElementById('bookings-starter');
        const bookingsPro = document.getElementById('bookings-pro');
        
        if (bookingsFree) {
          bookingsFree.style.display = (plan === 'free') ? 'flex' : 'none';
        }
        if (bookingsStarter) {
          bookingsStarter.style.display = (plan === 'starter') ? 'block' : 'none';
        }
        if (bookingsPro) {
          bookingsPro.style.display = (plan === 'pro') ? 'block' : 'none';
        }

        // Show/hide dashboards
        Object.values(dashboards).forEach(dash => {
          if (dash) dash.style.display = "none";
        });
        if (dashboards[plan]) {
          dashboards[plan].style.display = "block";
        }

        // Update locked elements
        allLockedElements.forEach(el => {
          const requiredTier = el.getAttribute("data-lock");
          el.classList.add("locked");

          if (plan === "pro") {
            el.classList.remove("locked");
          } else if (plan === "starter") {
            if (requiredTier === "starter") {
              el.classList.remove("locked");
            }
          }
        });
        
        // Update upgrade button
        if (upgradeBtn) {
          if (plan === "pro") {
            upgradeBtn.style.display = "none";
          } else {
            upgradeBtn.style.display = "block";
          }
        }
      }

      // Get plan from URL
      const urlParams = new URLSearchParams(window.location.search);
      let planFromUrl = urlParams.get("plan");
      
      currentPlan = "pro"; // Default
      // Only allow starter or pro plans (free removed from dropdown)
      if (planFromUrl && (planFromUrl === "starter" || planFromUrl === "pro")) {
        currentPlan = planFromUrl;
      } else if (planFromUrl === "free") {
        // Redirect free plan to professional
        currentPlan = "pro";
        if (window.history.replaceState) {
          const base = window.location.href.split("?")[0];
          const newUrl = new URL(base, window.location.origin);
          newUrl.searchParams.set("plan", "pro");
          window.history.replaceState({ path: newUrl.href }, '', newUrl.href);
        }
      }
      
      // Set dropdown and update view
      if (planSwitcher) {
        planSwitcher.value = currentPlan;
      }
      updateDashboardView(currentPlan);

      // Plan switcher event
      if (planSwitcher) {
        planSwitcher.addEventListener("change", (e) => {
          const newPlan = e.target.value;
          updateDashboardView(newPlan);
          
          // Update URL
          if (window.history.replaceState) {
            const base = window.location.href.split("?")[0];
            const newUrl = new URL(base, window.location.origin);
            newUrl.searchParams.set("plan", newPlan);
            window.history.replaceState({ path: newUrl.href }, '', newUrl.href);
          }
        });
      }

      // Modal functions
      function openUpgradeModal() {
        if (currentPlan === "pro") return;
        upgradeModal.classList.remove("hidden");
      }

      function closeUpgradeModal() {
        upgradeModal.classList.add("hidden");
      }
      
      // Event listeners
      upgradeTriggers.forEach(btn => {
        btn.addEventListener("click", openUpgradeModal);
      });
      
      if (closeModalBtn) {
        closeModalBtn.addEventListener("click", closeUpgradeModal);
      }
      
      if (modalViewPlansBtn) {
        modalViewPlansBtn.addEventListener("click", () => {
          console.log("Redirecting to pricing page...");
          closeUpgradeModal();
        });
      }

      // Close modal on background click
      upgradeModal.addEventListener("click", (e) => {
        if (e.target === upgradeModal) {
          closeUpgradeModal();
        }
      });

      // Escape key to close modal
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !upgradeModal.classList.contains("hidden")) {
          closeUpgradeModal();
        }
      });
    });
  </script>
</body>
</html>